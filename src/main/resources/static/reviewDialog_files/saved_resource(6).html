<!DOCTYPE html>
<!-- saved from url=(0070)https://tpc.googlesyndication.com/safeframe/1-0-33/html/container.html -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
    
    
    <title>2_252509_Vertical_Banner_Test_MGM_160x600</title>
    <style>html, body { margin: 0; padding: 0; width: 100%; height: 100%; }
*, *:before, *:after { box-sizing: border-box; }
.variant { position: relative; width: 100%; height: 100%; display: none; }
.z, .x, .y, .w, .h, .r, .o, .el { position: absolute; display: block; width: 100%; height: 100%; }
.z, .x, .y, .w, .h, .r, .o { pointer-events: none; }
.el { pointer-events: auto; }
.z, .x, .y, .w, .h, .o, .el { transform-origin: 0% 0%; }
.r { transform-origin: 50% 50%; }
.celtra-screen { position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: none; }
celtra-video { display: none; }
.celtra-banner.variant-2 { position: relative;overflow: hidden;top: 0;left: 0;width: 160px;height: 600px;margin-left: auto;margin-right: auto;font-family: Helvetica, sans-serif;user-select: none }
#variant-2 { background: rgba(255,255,255,1); }
.celtra-banner.variant-2 #variant-2 { display: block; }
.celtra-banner #celtra-screen-3 { z-index: 0; display: block; }

.celtra-banner.celtra-screen-4 #celtra-screen-4 { display: block; z-index: 1; }
.o251z { z-index: 2 }
.o251w { width: 160px }
.o251h { height: 600px }
.o251x { left: 0px }
.o251y { top: 0px }
.o251r { transform: rotate(0deg) }
.o251o { opacity: 1 }
.o251.el.hotspot {cursor: pointer}
.o327z { z-index: 1 }
.o327w { width: 300px }
.o327h { height: 600px }
.o327x { left: -70px }
.o327y { top: -1px }
.o327r { transform: rotate(0deg) }
.o327o { opacity: 1 }
.o327.el.picture { overflow: hidden; }
.o327.el.picture img { position: absolute; }
.o327.el.picture img {object-fit:contain;object-position:center center}
.o824z { z-index: 3 }
.o824w { width: 160px }
.o824h { height: 284px }
.o824x { left: 0px }
.o824y { top: 94px }
.o824r { transform: rotate(0deg) }
.o824o { opacity: 1 }
.o824.el.video video {object-fit: cover}
.o824.el.video {overflow: hidden}
.o824.el.video { background-color: #000; }
.o824.el.video video { position: absolute; pointer-events: none; }
.o824.el.video { display: flex; }
.o824.el.video video { position: relative !important; }
.o824.el.video .controls-wrapper { position: absolute; width: 100%; height: 100%; -webkit-tap-highlight-color: rgba(0,0,0,0); tap-highlight-color: rgba(0,0,0,0); }
.o824.el.video .play-button { position: absolute; width: 88px; height: 88px; cursor: pointer; left: calc(50% - 44px); top: calc(50% - 44px); z-index: 1; transform: scale(0); transition: transform 0.4s ease; }
.o824.el.video .play-button .play-triangle { position: absolute; width: 0; height: 0; border-top: 20px solid transparent; border-left: 34px solid rgba(255, 255, 255, 1); border-bottom: 20px solid transparent; left: 32px; top: 24px; }
.o824.el.video .play-button .play-background { background: rgba(0, 0, 0, .4); width: 84px; height: 84px; position: absolute; left: 2px; top: 2px; border-radius: 50%; }
.o824.el.video .play-button .play-outline { border: 2px solid white; opacity: .2; width: 88px; height: 88px; position: absolute; z-index: 0; border-radius: 50%; }
.o824.el.video .play-button.show { transform: scale(1); }
.o824.el.video .sound-controls { position: absolute; width: 32px; height: 32px; cursor: pointer; right: 14px; bottom: 14px; z-index: 1; opacity: 0; visibility: hidden; transition: opacity 1.5s, visibility 1.5s; }
.o824.el.video .sound-controls.show { visibility: visible; opacity: 1; transition: visibility 0s, opacity 1.5s; }
.o824.el.video .sound-controls .sound-button { position: absolute; width: 32px; height: 32px; transition: transform 0.4s ease, opacity 0.4s ease; transform: scale(0); opacity: 0; }
.o824.el.video .sound-controls .sound-button.show { transform: scale(1); opacity: 1; }
.o824.el.video .top-left-box { position: absolute; left: 14px; top: 14px; width: 32px; height: 32px; }
.o824.el.video .top-left-box .bg { background: rgba(0, 0, 0, .4); position: absolute; width: 32px; height: 32px; border-radius: 50%; left: 0; top: 0; }
.o824.el.video .top-left-box .loader { position: absolute; width: 32px; height: 32px; opacity: 0; transition: opacity 1.5s; z-index: 1; }
.o824.el.video .top-left-box .loader.show { opacity: 1; }
.o824.el.video .top-left-box .loader .loader-rotator { position: absolute; width: 32px; height: 32px; opacity: 1; animation: loader-rotor-full 1.6s linear infinite; }
.o824.el.video .top-left-box .loader .loader-circular { position: absolute; left: 0; z-index: 2; animation: rotor 2s ease infinite; }
.o824.el.video .top-left-box .loader .loader-circular-bg { position: absolute; left: 0; z-index: 1; animation: rotor 2s ease infinite; }
.o824.el.video .top-left-box .loader .loader-path { stroke: #fff; stroke-linecap: square; animation: dash-loader 2s ease infinite; }
.o824.el.video .top-left-box .loader .loader-path-bg { stroke: rgba(0, 0, 0, .4); stroke-linecap: square; animation: dash-loader 2s ease infinite; }
.o824.el.video .top-left-box .replay { position: absolute; width: 32px; height: 32px; cursor: pointer; visibility : hidden; opacity: 0; transition: opacity 1.5s, visibility 1.5s; z-index: 1; }
.o824.el.video .top-left-box .replay.show { visibility: visible; opacity: 1; transform: rotate(360deg) scale(1,1); transition: visibility 0s, transform 0.9s, opacity 1.5s; }
.o824.el.video .top-left-box .replay .replayer { width: 32px; height: 32px; transform: rotate(45deg) scale(1,1); }
.o824.el.video .top-left-box .resume { position: absolute; width: 32px; height: 32px; cursor: pointer; visibility: hidden; opacity: 0; transition: opacity 1.5s, visibility 1.5s; z-index: 2; }
.o824.el.video .top-left-box .resume.show { visibility: visible; opacity: 1; transition: visibility 0s, opacity 1.5s; }
.o824.el.video .top-left-box .resume .resume-ring { border: 2px solid #fff; position: absolute; width: 28px; height: 28px; border-radius: 50%; top: 2px; left: 2px; }
.o824.el.video .top-left-box .resume .resume-triangle { position: absolute; width: 32px; height: 32px; }
.o824.el.video .top-left-box .countdown { position: absolute; width: 32px; height: 32px; visibility: hidden; opacity: 0; transition: opacity 1.5s, visibility 1.5s; z-index: 1; }
.o824.el.video .top-left-box .countdown svg { position: absolute; top: 0; left: 0; transform: rotate(-90deg) scale(1, -1); }
.o824.el.video .top-left-box .countdown.show { visibility: visible; opacity: 1; transition: visibility 0s, opacity 1.5s; }
.o824.el.video .top-left-box .countdown .countdown-text-wrapper { font-size: 13px; color: #fff; font-family: Helvetica, Helvetica-Light, Arial, sans-serif; position: absolute; top: 0; left: 0; user-select: none; -moz-user-select: none; width: 32px; height: 32px; display: flex; justify-content: center; align-items: center;}
.o824.el.video .top-left-box .countdown .countdown-circle { stroke: white; fill: none; stroke-width: 2px; }
@keyframes loader-rotor-full { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
@keyframes rotor { 0%, 50% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
@keyframes dash-loader { 0%, 100% { stroke-dasharray: 2px, 90px; stroke-dashoffset: 0; } 50% { stroke-dasharray: 70px, 90px; stroke-dashoffset: 0; } }
</style>
</head>
<body>
<div class="celtra-banner"><div class="variant" id="variant-2"><div class="celtra-screen" id="celtra-screen-3"></div>
<div class="celtra-screen" id="celtra-screen-4"><div id="o251"><div class="o251z z o251x x o251y y"><div class="o251w w o251h h o251o o"><div class="o251r r"><div class="o251 el hotspot"></div></div></div></div></div><div id="o327"><div class="o327z z o327x x o327y y"><div class="o327w w o327h h o327o o"><div class="o327r r"><div class="o327 el picture"><img data-src="https://cache-ssl.celtra.com/api/blobs/878ead74c83e9337f31a3cb24a8c5c60352d7c14e4935841d97ec38a4fdae1bc/5_10_2019_MGM_160x600.jpg?transform=crush&amp;quality=85" width="300" height="600" src="./5_10_2019_MGM_160x600.jpg"></div></div></div></div></div><div id="o824"><div class="o824z z o824x x o824y y"><div class="o824w w o824h h o824o o"><div class="o824r r"><div class="o824 el video"><div class="controls-wrapper"><div class="play-button"><div class="play-background"></div><div class="play-triangle"></div><div class="play-outline"></div></div><div class="sound-controls"><div class="unmute-button sound-button"><svg viewBox="0 0 32 32"><path d="M27.5 23.3l1.1 1.1-4.2 4.2-4.4-4.4v4.3L11 22H4V10h1.8L3.2 7.4l4.2-4.2 5.5 5.5L20 3.5V11l5-5 1.5 1.5C28.8 9.7 30 12.8 30 16c0 2.7-.9 5.2-2.5 7.3z" opacity=".4"></path><path d="M25.1 8.9l-1.4 1.4c1.4 1.4 2.3 3.4 2.3 5.7 0 1.7-.5 3.2-1.3 4.4l1.4 1.4c1.2-1.6 1.9-3.7 1.9-5.9 0-2.7-1.1-5.2-2.9-7zm-3.4 8.6l1.5 1.5c.5-.9.8-1.9.8-2.9 0-1.6-.7-3.2-1.8-4.2l-1.4 1.4c.7.7 1.2 1.7 1.2 2.8 0 .4-.1.9-.3 1.4zM18 7.5l-3.6 2.7 3.6 3.6zM6 12v8h6l6 4.5v-2.3L7.8 12z" fill="#fff"></path><path transform="rotate(-45.001 15.9 15.9)" class="st1" d="M14.9 2.9h2v26h-2z" fill="#fff"></path></svg></div><div class="mute-button sound-button"><svg viewBox="0 0 32 32"><path d="M26.5 7.5L25 6l-5 5V3.5L11 10H4v12h7l9 6.5V21l5 5 1.5-1.5c2.2-2.2 3.5-5.3 3.5-8.5s-1.2-6.3-3.5-8.5z" opacity=".4"></path><path d="M18 7.5L12 12H6v8h6l6 4.5v-17zm4.2 4.3l-1.4 1.4c.7.7 1.2 1.7 1.2 2.8s-.4 2.1-1.2 2.8l1.4 1.4c1.1-1.1 1.8-2.6 1.8-4.2s-.7-3.2-1.8-4.2zm2.9-2.9l-1.4 1.4c1.4 1.4 2.3 3.4 2.3 5.7s-.9 4.2-2.3 5.7l1.4 1.4c1.8-1.8 2.9-4.3 2.9-7.1s-1.1-5.3-2.9-7.1z" fill="#fff"></path></svg></div></div><div class="top-left-box"><div class="loader"><div class="loader-rotator"><svg class="loader-circular" viewBox="0 0 32 32"><circle class="loader-path" cx="16" cy="16" r="12" fill="none" stroke-width="2"></circle></svg><svg class="loader-circular-bg" viewBox="0 0 32 32"><circle class="loader-path-bg" cx="16" cy="16" r="12" fill="none" stroke-width="6"></circle></svg></div></div><div class="replay"><div class="replayer"><svg viewBox="0 0 32 32"><path d="M25.9,6.1l-1.4-1.4l-4.2,4.2l1.4,1.4c3.1,3.1,3.1,8.2,0,11.3C20.1,23.2,18.1,24,16,24s-4.1-0.8-5.7-2.3 c-1.8-1.8-2.6-4.2-2.3-6.5l1.3,1.3l4.4-13.2L0.6,7.6l2.3,2.3l0.4,0.4C0.9,15.5,2,21.8,6.1,25.9C8.7,28.5,12.3,30,16,30 s7.3-1.5,9.9-4.1C31.4,20.4,31.4,11.6,25.9,6.1z" fill="rgba(0, 0, 0, .4)"></path><path d="M23.1,8.9c3.9,3.9,3.9,10.2,0,14.1S12.9,26.9,9,23c-3.2-3.2-3.8-7.9-1.8-11.7l1.4,1.4l2.1-6.4 L4.3,8.5l1.4,1.4C3,14.5,3.6,20.5,7.5,24.5c4.7,4.7,12.3,4.7,17,0s4.7-12.3,0-17L23.1,8.9z" fill="#fff"></path></svg></div></div><div class="resume"><div class="bg"></div><div class="resume-ring"></div><div class="resume-triangle"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 320"><path d="M120 100L120 220 230 160 120 100z" fill="#fff"></path></svg></div></div><div class="countdown"><div class="bg"></div><div class="countdown-text-wrapper"><div class="countdown-text"></div></div><svg viewBox="0 0 32 32"><circle class="countdown-circle" cx="16" cy="16"></circle></svg></div></div></div><celtra-video id="video-824" poster="https://cache-ssl.celtra.com/api/blobs/d25d0a5d3e9045ded117859a0d7a9ba0184a14c0c18c4dbc4d8a7341cbad279e/190402_na_MGM_242x428_backup.jpg?transform=crush&amp;quality=85" data-src="https://cache-ssl.celtra.com/api/videoStream/bdd225a0d2ae5a5759cd08f24053f93b69f3e91fcb8d4fdcbd4c1abc08444af5/mpeg4HQ/video.mp4?transform=VideoStream" data-meta="eyJsb2NhbElkIjo4MjQsImNsYXp6IjoiVmlkZW8iLCJuYW1lIjoiUmVhZHlTZXRGbG9yaWRhIiwiZmlsZU5hbWUiOiJNR01HcmFuZFZpZGVvXzI0MXg0MjgubXA0IiwiYmxvYkhhc2giOiJiZGQyMjVhMGQyYWU1YTU3NTljZDA4ZjI0MDUzZjkzYjY5ZjNlOTFmY2I4ZDRmZGNiZDRjMWFiYzA4NDQ0YWY1IiwiYXV0b3BsYXkiOmZhbHNlLCJsb29wIjpmYWxzZSwiY29udHJvbHMiOnRydWUsImZpdHRpbmciOiJjcm9wIiwibXV0ZWQiOmZhbHNlLCJzY3JlZW5Mb2NhbElkIjo0fQ==" playsinline="" webkit-playsinline=""><div fallback=""><p>Your browser doesn't support HTML5 video</p></div><source type="video/mp4" data-src="https://cache-ssl.celtra.com/api/videoStream/bdd225a0d2ae5a5759cd08f24053f93b69f3e91fcb8d4fdcbd4c1abc08444af5/mpeg4HQ/video.mp4?transform=VideoStream"><source type="video/webm" data-src="https://cache-ssl.celtra.com/api/videoStream/bdd225a0d2ae5a5759cd08f24053f93b69f3e91fcb8d4fdcbd4c1abc08444af5/webmHQ/video.webm?transform=VideoStream"></celtra-video></div></div></div></div></div></div></div></div>
<script type="text/javascript">(function(){function Ticker(callback,interval){var rAF=extractRequestAnimationFrame(),rAFOrIntervalId,now,before;callback=callback||function(){};function start(){if(rAFOrIntervalId!=null){return}before=Date.now();if(rAF){rAFOrIntervalId=rAF(onRequestAnimationFrame)}else{rAFOrIntervalId=setInterval(callback,interval)}}function stop(){if(!rAFOrIntervalId){return}if(rAF){var cAF=extractCancelAnimationFrame();cAF(rAFOrIntervalId)}else{clearInterval(rAFOrIntervalId)}rAFOrIntervalId=null}function onRequestAnimationFrame(){now=Date.now();if(now-before>=interval){callback();before=now}rAFOrIntervalId=rAF(onRequestAnimationFrame)}function extractRequestAnimationFrame(){var request=window.requestAnimationFrame||null;['ms','moz','webkit','o'].forEach(function(prefix){request=request||window[prefix+'RequestAnimationFrame']||null});return request}function extractCancelAnimationFrame(){var cancel=window.cancelAnimationFrame||null;['ms','moz','webkit','o'].forEach(function(prefix){cancel=cancel||window[prefix+'CancelAnimationFrame']||null});return cancel}return{start:start,stop:stop}}(function(){if(typeof window.CustomEvent==="function"){return false}function CustomEvent(event,params){params=params||{bubbles:false,cancelable:false,detail:undefined};var evt=document.createEvent('CustomEvent');evt.initCustomEvent(event,params.bubbles,params.cancelable,params.detail);return evt}CustomEvent.prototype=window.Event.prototype;window.CustomEvent=CustomEvent})();function eventDispatch(el,eventName){var event,idxArg=2,options={};if(arguments[idxArg]!==null&&typeof arguments[idxArg]==='object'){options.detail=arguments[idxArg++]}options.bubbles=!!arguments[idxArg++];options.cancelable=!!arguments[idxArg];if(options.detail){event=new CustomEvent(eventName,options)}else{if(typeof Event==='function'){event=new Event(eventName,options)}else{event=document.createEvent("Event");event.initEvent(eventName,options.bubbles,options.cancelable)}}el.dispatchEvent(event)}function SafeFrameSDKAdapter(initAdCallback){var sfApi,previousInViewPercentage=0,decodeSpan=document.createElement('span'),celtraTagElement,loadedEventTriggered=false;function initAdapter(){celtraTagElement=documentQuerySelector('.celtra-ad-v3, .celtra-ad-v4',window.parent.document);measureViewportIntersection();var w=getTopWindow();if('$sf'in w&&w['$sf'].ext){sfApi=w['$sf'].ext;initAdCallback();new Ticker(onMeasureViewPercentage,250).start()}else{throw new Error('Cannot access SafeFrame API')}}function onMeasureViewPercentage(){var inViewPercentage=sfApi.inViewPercentage();if(inViewPercentage!==previousInViewPercentage){eventDispatch(document,'adViewability',{viewable:inViewPercentage})}previousInViewPercentage=inViewPercentage}function openURL(url,title,params){decodeSpan.innerHTML=url;url=decodeSpan.innerText;window.open(url,title,params)}function getContainerSize(){var g=sfApi.geom().self;return{width:g.w,height:g.h}}function measureViewportIntersection(){eventDispatch(document,'viewabilityMeasurable',{measurable:true})}function triggerLoadedEvent(){if(celtraTagElement&&!loadedEventTriggered){eventDispatch(celtraTagElement,'celtraLoaded',true);loadedEventTriggered=true}}return{init:initAdapter,openURL:openURL,getContainerSize:getContainerSize,triggerLoadedEvent:triggerLoadedEvent}}function documentQuerySelector(cssSelector,doc){return(doc||document).querySelector(cssSelector)}function documentQuerySelectorAll(cssSelector,doc){return Array.prototype.slice.call((doc||document).querySelectorAll(cssSelector))}function getParentWindow(domElement){var doc=domElement.ownerDocument;return doc.defaultView||doc.parentWindow}function BrowserSDKAdapter(initAdCallback){var decodeSpan=document.createElement('span'),celtraTagElement=findCeltraTagElement(),parentWindows=[],windowBoundingClientRects=[],absoluteParentWindowRects=[],loadedEventTriggered=false;function findCeltraTagElement(){var el=window.frameElement;while(el&&el.parentNode){el=el.parentNode;if(el.classList.contains('celtra-ad-v3')||el.classList.contains('celtra-ad-v4')){return el}}return null}function initAdapter(){initParentWindows();onUpdateAbsoluteParentWindowRects();initVisibilityChangeListeners();measureViewportIntersection();initAdCallback()}function initVisibilityChangeListeners(){var topWindow=parentWindows[parentWindows.length-1];function dispatchVisibilityChange(){var viewablePercent=topWindow.document.hidden?0:100;eventDispatch(document,'visibilityChange',{viewable:viewablePercent})}['webkit','moz','ms',''].forEach(function(prefix){addEventListener(topWindow.document,prefix+'visibilitychange',dispatchVisibilityChange)});addEventListener(topWindow,'blur',function(){topWindow.document.hidden&&dispatchVisibilityChange()});addEventListener(topWindow,'focus',function(){!topWindow.document.hidden&&dispatchVisibilityChange()})}function initParentWindows(){var w=window;try{while(typeof w.parent.location.href!=='undefined'&&w.parent.document!==w.document){w=w.parent;parentWindows.push(w)}}catch(e){}if(parentWindows.length===0){parentWindows.push(window.top)}}function onUpdateAbsoluteParentWindowRects(){windowBoundingClientRects=parentWindows.map(getWindowBoundingClientRect);absoluteParentWindowRects=windowBoundingClientRects.slice(-1);for(var i=parentWindows.length-2;i>=0;i--){var rect=offsetRect(windowBoundingClientRects[i],absoluteParentWindowRects[absoluteParentWindowRects.length-1]);absoluteParentWindowRects.push(rect)}absoluteParentWindowRects.reverse()}function calculateIntersectionRatio(){var celtraIframeRect=window.frameElement.getBoundingClientRect(),iframeWidth=celtraIframeRect.width,iframeHeight=celtraIframeRect.height,minWidthViewable=iframeWidth,minHeightViewable=iframeHeight;for(var i=0;i<parentWindows.length;i++){var absoluteWindowRect=absoluteParentWindowRects[i],iframeLeftViewable=(celtraIframeRect.left>=0)?absoluteWindowRect.width-celtraIframeRect.left:iframeWidth+celtraIframeRect.left,iframeTopViewable=(celtraIframeRect.top>=0)?absoluteWindowRect.height-celtraIframeRect.top:iframeHeight+celtraIframeRect.top;var widthViewable=Math.min(Math.max(iframeLeftViewable,0),iframeWidth),heightViewable=Math.min(Math.max(iframeTopViewable,0),iframeHeight);minWidthViewable=Math.min(minWidthViewable,widthViewable);minHeightViewable=Math.min(minHeightViewable,heightViewable);celtraIframeRect=offsetRect(celtraIframeRect,windowBoundingClientRects[i])}return(minWidthViewable*minHeightViewable)/(iframeWidth*iframeHeight)}function getWindowBoundingClientRect(w){var rect;if(w.frameElement){rect=w.frameElement.getBoundingClientRect()}else{rect={x:0,y:0,top:0,left:0,width:w.innerWidth,height:w.innerHeight}}return rect}function offsetRect(r1,r2){return{x:r1.x+r2.x,y:r1.y+r2.y,top:r1.top+r2.top,left:r1.left+r2.left,width:r1.width,height:r1.height}}function openURL(url,title,params){decodeSpan.innerHTML=url;url=decodeSpan.innerText;window.open(url,title,params)}function getContainerElement(){if(window.frameElement){return window.frameElement.parentNode}else{return document.body}}function getContainerSize(){var containerElement=getContainerElement();return{width:containerElement.clientWidth,height:containerElement.clientHeight}}function measureViewportIntersection(){var previousViewabilityPercentage=0;function updateViewabilityMeasurable(isMeasurable){eventDispatch(document,'viewabilityMeasurable',{measurable:isMeasurable})}function updateViewablePercent(viewablePercent){if(viewablePercent!==previousViewabilityPercentage){eventDispatch(document,'adViewability',{viewable:viewablePercent})}previousViewabilityPercentage=viewablePercent}function onUpdateViewportIntersection(){var ratio=calculateIntersectionRatio();updateViewablePercent(ratio*100)}if(window.IntersectionObserver){updateViewabilityMeasurable(true);var thresholds=[],thresholdGranularity=50,i;for(i=0;i<=thresholdGranularity;i++){thresholds.push(i/thresholdGranularity)}var observer=new IntersectionObserver(function(entries){entries.forEach(function(entry){updateViewablePercent(entry.intersectionRatio*100)})},{threshold:thresholds});observer.observe(documentQuerySelector('.celtra-banner'))}else{var viewabilityMeasurable=true;try{viewabilityMeasurable=typeof window.top.document!='undefined'}catch(e){viewabilityMeasurable=false}if(!celtraTagElement){viewabilityMeasurable=false}updateViewabilityMeasurable(viewabilityMeasurable);if(!viewabilityMeasurable){return}new Ticker(onUpdateAbsoluteParentWindowRects,1000).start();new Ticker(onUpdateViewportIntersection,16).start()}}function triggerLoadedEvent(){if(celtraTagElement&&!loadedEventTriggered){eventDispatch(celtraTagElement,'celtraLoaded',true);loadedEventTriggered=true}}return{init:initAdapter,openURL:openURL,getContainerElement:getContainerElement,getContainerSize:getContainerSize,triggerLoadedEvent:triggerLoadedEvent}}function getTopWindow(){var w=window;try{while(typeof w.parent.location.href!=='undefined'&&w.parent.document!==w.document){w=w.parent}}catch(e){}return w}var _eventListeners=[];function addEventListener(el,event,cb){if(!el){return}for(var i=0;i<_eventListeners.length;i++){if(_eventListeners[i].target===el&&_eventListeners[i].event===event&&_eventListeners[i].listener===cb){return}}_eventListeners.push({target:el,event:event,listener:cb});el.addEventListener(event,cb)}function removeEventListener(el,event,cb){el.removeEventListener(event,cb);for(var i=0;i<_eventListeners.length;i++){if(_eventListeners[i].target===el&&_eventListeners[i].event===event&&_eventListeners[i].listener===cb){_eventListeners.splice(i,1);break}}}function removeAllEventListeners(){_eventListeners.forEach(function(obj){if(document.body.contains(obj.target)){obj.target.removeEventListener(obj.event,obj.listener)}});_eventListeners=[]}function getOpenURLOverride(originalUrl){var urlOverrides=typeof urlOpenedOverrideUrls==='object'?urlOpenedOverrideUrls:null;if(!urlOverrides||!urlOverrides.hasOwnProperty(originalUrl)){return originalUrl}return urlOverrides[originalUrl]}function playVideo(videoEl){if(!videoEl){return}if(videoEl.readyState===0&&videoEl.dataset.src){videoEl.src=videoEl.dataset.src;documentQuerySelectorAll('source',videoEl).forEach(function(source){source.src=source.dataset.src})}videoEl.play()}function replayVideo(videoEl){if(!videoEl){return}videoEl.currentTime=0;videoEl.play()}function pauseVideo(videoEl){if(!videoEl){return}videoEl.pause()}function muteVideo(videoEl){if(!videoEl){return}videoEl.muted=true}function unmuteVideo(videoEl){if(!videoEl){return}videoEl.muted=false}function containsClass(el,className){if(!el){return false}return el.classList.contains(className)}function addClass(el,className){if(!el){return}el.classList.add(className)}function removeClass(el,className){if(!el){return}el.classList.remove(className)}function VideoControls(videoElement,metaData){var controlsWrapper=videoElement.previousSibling,soundControls=documentQuerySelector('.sound-controls',controlsWrapper),muteButton=documentQuerySelector('.mute-button',soundControls),unmuteButton=documentQuerySelector('.unmute-button',soundControls),playButton=documentQuerySelector('.play-button',controlsWrapper),loaderIndicator=documentQuerySelector('.loader',controlsWrapper),replayButton=documentQuerySelector('.replay',controlsWrapper),resumeButton=documentQuerySelector('.resume',controlsWrapper),countdownIndicator=documentQuerySelector('.countdown',controlsWrapper),countdownCircle=documentQuerySelector('.countdown-circle',countdownIndicator),countdownText=documentQuerySelector('.countdown-text',countdownIndicator),crop=metaData.fitting!=='fit',showClass='show',clickEventName='click',playButtonVisibleProp='playButtonVisible',loaderIndicatorVisibleProp='loaderIndicatorVisible',resumeButtonVisibleProp='resumeButtonVisible',replayButtonVisibleProp='replayButtonVisible',countdownIndicatorVisibleProp='countdownIndicatorVisible',mutedProp='muted',soundControlsInitializedProp='soundControlsInitialized',ticker=new Ticker(render,16),controlsState={},dirty=true;metaData.hasAudio=true;setState([playButtonVisibleProp,loaderIndicatorVisibleProp,resumeButtonVisibleProp,replayButtonVisibleProp,countdownIndicatorVisibleProp,mutedProp,soundControlsInitializedProp],false);function setState(props,val){if(props.constructor===Array){props.forEach(function(prop){controlsState[prop]=val})}else{controlsState[props]=val}dirty=true}function getState(prop){return controlsState[prop]}function stopPropagation(e){e.stopPropagation()}function trackInteraction(){if(typeof tracking==='undefined'){return}tracking.trackUserInteraction(metaData.screenLocalId,{"objectClazz":metaData.clazz,"objectLocalId":metaData.localId,"objectName":metaData.name})}function render(){if(!dirty){return}if(getState(soundControlsInitializedProp)&&metaData.hasAudio){addClass(soundControls,showClass)}if(getState(mutedProp)){removeClass(muteButton,showClass);addClass(unmuteButton,showClass)}else{removeClass(unmuteButton,showClass);addClass(muteButton,showClass)}getState(resumeButtonVisibleProp)?addClass(resumeButton,showClass):removeClass(resumeButton,showClass);getState(countdownIndicatorVisibleProp)?addClass(countdownIndicator,showClass):removeClass(countdownIndicator,showClass);getState(playButtonVisibleProp)?addClass(playButton,showClass):removeClass(playButton,showClass);getState(loaderIndicatorVisibleProp)?addClass(loaderIndicator,showClass):removeClass(loaderIndicator,showClass);getState(replayButtonVisibleProp)?addClass(replayButton,showClass):removeClass(replayButton,showClass);dirty=false}function initSoundControls(){if(!metaData.hasAudio||getState(soundControlsInitializedProp)){return}addEventListener(soundControls,clickEventName,function(e){trackInteraction();toggleMuted();stopPropagation(e)});setState(soundControlsInitializedProp,true)}function toggleMuted(){if(getState(mutedProp)){unmuteVideo(videoElement)}else{muteVideo(videoElement)}}function togglePlaying(userInitiated){if(videoElement.paused){playVideo(videoElement,userInitiated)}else{pauseVideo(videoElement)}}function waitForVideoLoaded(cb){if(videoElement.readyState===4){cb()}else{addEventListener(videoElement,'loadeddata',function _cb(){cb();removeEventListener(videoElement,'loadeddata',_cb)})}}this.updateControlsWrapper=function(fittedDimensions,containerDimensions){controlsWrapper.style.width=(crop?containerDimensions.width:fittedDimensions.width)+'px';controlsWrapper.style.height=(crop?containerDimensions.height:fittedDimensions.height)+'px';controlsWrapper.style.top=crop?0:fittedDimensions.marginVertical+'px';controlsWrapper.style.left=crop?0:fittedDimensions.marginHorizontal+'px'};addEventListener(videoElement,'waiting',function(){setState(loaderIndicatorVisibleProp,true);setState([countdownIndicatorVisibleProp,resumeButtonVisibleProp],false)});addEventListener(videoElement,'playing',function(){initSoundControls();setState(countdownIndicatorVisibleProp,true);setState([playButtonVisibleProp,loaderIndicatorVisibleProp,replayButtonVisibleProp,resumeButtonVisibleProp],false)});addEventListener(videoElement,'ended',function(){if(!metaData.loop){setState(replayButtonVisibleProp,true);setState([loaderIndicatorVisibleProp,countdownIndicatorVisibleProp,resumeButtonVisibleProp],false)}});addEventListener(videoElement,'volumechange',function(){setState(mutedProp,videoElement.muted)});addEventListener(videoElement,'pause',function(){setState(resumeButtonVisibleProp,true);setState([countdownIndicatorVisibleProp,loaderIndicatorVisibleProp],false)});addEventListener(controlsWrapper,clickEventName,function(){trackInteraction();if(!videoElement.ended&&videoElement.currentTime>0){togglePlaying(true)}});addEventListener(playButton,clickEventName,function(e){trackInteraction();playVideo(videoElement,true);stopPropagation(e)});addEventListener(resumeButton,clickEventName,function(e){trackInteraction();playVideo(videoElement,true);stopPropagation(e)});addEventListener(replayButton,clickEventName,function(e){trackInteraction();replayVideo(videoElement,true);stopPropagation(e)});addEventListener(countdownIndicator,clickEventName,stopPropagation);addEventListener(loaderIndicator,clickEventName,stopPropagation);function setAttribute(el,attribute,value){el.setAttribute(attribute,value)}if(countdownIndicator){var radius=13;var circumference=2*Math.PI*radius;setAttribute(countdownCircle,'stroke-dasharray',circumference);setAttribute(countdownCircle,'r',radius);addEventListener(videoElement,'timeupdate',function(){var delta=videoElement.currentTime/videoElement.duration;setAttribute(countdownCircle,'stroke-dashoffset',circumference*delta);var timeRemaining=videoElement.duration-videoElement.currentTime;if(timeRemaining){countdownText.innerText=(timeRemaining<0)?0:Math.floor(timeRemaining)}})}if(!metaData.autoplay){setState(playButtonVisibleProp,true)}waitForVideoLoaded(function(){setState(mutedProp,videoElement.muted);ticker.start()});addEventListener(document,'destroy',function(){ticker.stop()});render()}function initViewability(){var viewableCoreDispatched=false;function onViewabilityChange(e){if(e.detail.viewable>0&&!viewableCoreDispatched){eventDispatch(document,'viewableCore');viewableCoreDispatched=true}}addEventListener(document,'adViewability',onViewabilityChange)}function listToArray(list){return Array.prototype.slice.call(list)}function arrayFind(arr,cb){for(var i=0;i<arr.length;i++){if(cb(arr[i])){return arr[i]}}return null}function preloadImages(variantId,screenId,eventName){var domSelectorArray=listToArray(arguments).slice(0,2);domSelectorArray.push('img');var imgs=documentQuerySelectorAll(domSelectorArray.join(' ').trim()),nProcessed=0;function dispatchImagesLoadedEvent(){eventDispatch(document,eventName)}function onImageLoadedOrError(){if(++nProcessed===imgs.length){dispatchImagesLoadedEvent()}}imgs.length===0&&dispatchImagesLoadedEvent();for(var i=0;i<imgs.length;i++){imgs[i].onload=onImageLoadedOrError;imgs[i].onerror=onImageLoadedOrError;imgs[i].setAttribute('src',imgs[i].getAttribute('data-src'))}}function Video(videoElement,metaData){var videoControls,wrapper;var containerDimensionsTicker=new Ticker(onContainerDimensionsChange,66);var videoDimensionsTicker=new Ticker(onVideoDimensionsChange,66);var container=videoElement.parentNode;var containerDimensions;var pausedDueTo={viewability:false,visibilityChange:false};var hasStartedPlaying=false;init();function init(){metaData=JSON.parse(atob(videoElement.getAttribute('data-meta')));wrapper=videoElement;while((wrapper=wrapper.parentElement)&&!containsClass(wrapper,'el'));if(!videoElement.volumeChangeOnAppear){videoElement.muted=videoElement.muted||metaData.muted}metaData.loop&&addEventListener(videoElement,'ended',function(){playVideo(videoElement)});addEventListener(videoElement,'ended',function(){eventDispatch(wrapper,'videoComplete')});addEventListener(videoElement,'pause',function(){eventDispatch(wrapper,'videoPause')});addEventListener(document,'pageHide',function(){pauseVideo(videoElement)});addEventListener(document,'adViewability',function(e){handleHiddenChange('viewability',e.detail.viewable===0)});addEventListener(videoElement,'playing',function(){hasStartedPlaying=true;pausedDueTo.viewability=false;pausedDueTo.visibilityChange=false});addEventListener(document,'visibilityChange',function(e){handleHiddenChange('visibilityChange',e.detail.viewable===0)});var videoDimensions=getVideoDimensions();metaData.aspectRatio=videoDimensions.width/videoDimensions.height;if(!metaData.aspectRatio){var containerDimensions=getContainerDimensions();metaData.aspectRatio=containerDimensions.width/containerDimensions.height}if(metaData.controls){videoControls=new VideoControls(videoElement,metaData)}}function handleHiddenChange(reason,isHidden){if(!isHidden&&pausedDueTo[reason]){playVideo(videoElement)}else if(hasStartedPlaying&&!videoElement.paused&&isHidden){pausedDueTo[reason]=true;pauseVideo(videoElement)}}function getVideoDimensions(){return{width:videoElement.videoWidth,height:videoElement.videoHeight}}function getContainerDimensions(){return{width:container.offsetWidth,height:container.offsetHeight}}function getFittedVideoDimensions(videoAspectRatio,containerWidth,containerHeight,crop){var width,height,marginHorizontal,marginVertical,fitToWidth=videoAspectRatio>(containerWidth/containerHeight);if(crop?!fitToWidth:fitToWidth){width=containerWidth;height=Math.ceil(containerWidth/videoAspectRatio);marginHorizontal=0;marginVertical=containerHeight-height}else{height=containerHeight;width=Math.ceil(containerHeight*videoAspectRatio);marginHorizontal=containerWidth-width;marginVertical=0}return{width:Math.ceil(width),height:Math.ceil(height),marginHorizontal:marginHorizontal>>1,marginVertical:marginVertical>>1}}function updateVideoPosition(){var crop=metaData.fitting!=='fit';var fittedDimensions=getFittedVideoDimensions(metaData.aspectRatio,containerDimensions.width,containerDimensions.height,crop);videoElement.style.width=(crop?containerDimensions.width:fittedDimensions.width)+'px';videoElement.style.height=(crop?containerDimensions.height:fittedDimensions.height)+'px';videoElement.style.top=crop?0:fittedDimensions.marginVertical+'px';videoElement.style.left=crop?0:fittedDimensions.marginHorizontal+'px';videoControls&&videoControls.updateControlsWrapper(fittedDimensions,containerDimensions)}function onContainerDimensionsChange(){var newContainerDimensions=getContainerDimensions();if(containerDimensions&&containerDimensions.width===newContainerDimensions.width&&containerDimensions.height===newContainerDimensions.height){return}containerDimensions=newContainerDimensions;updateVideoPosition()}function onVideoDimensionsChange(){var videoDimensions=getVideoDimensions();if(videoDimensions.height!==0&&videoDimensions.width!==0){metaData.aspectRatio=videoDimensions.width/videoDimensions.height;updateVideoPosition();videoDimensionsTicker.stop()}}addEventListener(document,'destroy',function(){containerDimensionsTicker.stop();videoDimensionsTicker.stop()});containerDimensionsTicker.start();if(!metaData.aspectRatio||!metaData.autoplay){videoDimensionsTicker.start()}}function preloadVideos(variantId,screenId,eventName){var domSelectorArray=listToArray(arguments).slice(0,2);domSelectorArray.push('celtra-video');var celtraVideos=documentQuerySelectorAll(domSelectorArray.join(' ').trim()),videos=[],numberOfRemainingVideos=celtraVideos.length;function dispatchVideosLoadedEvent(){if(--numberOfRemainingVideos>0){return}videos.forEach(function(video){removeEventListener(video,'canplay',onVideoLoadedOrError);removeEventListener(video,'error',onVideoLoadedOrError)});eventDispatch(document,eventName)}function onVideoLoadedOrError(){dispatchVideosLoadedEvent()}celtraVideos.length===0&&dispatchVideosLoadedEvent();celtraVideos.forEach(function(celtraVideo){var video=document.createElement('video');listToArray(celtraVideo.attributes).forEach(function(attribute){video.setAttribute(attribute.nodeName,attribute.nodeValue)});video.innerHTML=celtraVideo.innerHTML;celtraVideo.parentNode.replaceChild(video,celtraVideo);var metaData=JSON.parse(atob(video.getAttribute('data-meta')));video.muted=video.muted||metaData.muted;function initVideo(){new Video(video,metaData);if(typeof VideoTracking==='function'){new VideoTracking(video,metaData)}removeEventListener(video,'loadedmetadata',initVideo)}addEventListener(video,'canplay',onVideoLoadedOrError);addEventListener(video,'error',onVideoLoadedOrError);addEventListener(video,'loadedmetadata',initVideo);video.load();videos.push(video);if(!metaData.autoplay){initVideo()}})}function Logger(name){if(this instanceof Logger){name=name||'';var sink=noop;if(Logger.enabledNames.indexOf(name)>=0||Logger.enabledNames.indexOf('all')>=0){sink=function(){var args=[].slice.apply(arguments);args.unshift(Logger._ts()+' ['+Logger.sessionId+(this.name?' '+this.name:'')+']');console.log.apply(console,args)}}this.name=name;this.log=sink;this.warn=sink;this.debug=sink;this.error=sink}else{return new Logger(name)}}Logger._ts=function(){var d=new Date();function pad(s,len){s=s+'';while(s.length<len)s='0'+s;return s}return d.getFullYear()+'-'+pad(d.getMonth()+1,2)+'-'+pad(d.getDate(),2)+' '+pad(d.getHours(),2)+':'+pad(d.getMinutes(),2)+':'+pad(d.getSeconds(),2)+'.'+pad(d.getTime()-Math.floor(d.getTime()/1000)*1000,3)};Logger.init=function(enabledNames,sessionId){Logger.enabledNames=enabledNames;Logger.sessionId=sessionId||(Math.random()+'').slice(15)};Logger.initFromRuntimeParams=function(rp){Logger.init(rp.debug?rp.debug.split(','):[],rp.sessionId)};function extend(dst,src){for(var i=1;i<arguments.length;i++){var src=arguments[i];if(src instanceof Object){for(var k in src){dst[k]=src[k]}}}return dst}function randInt(){return(Math.random()+'').slice(2)}function noop(){}function crc32(str){"use strict";var crc=0^(-1),i=0,table_crc32c=[0,-227835133,-516198153,324072436,-946170081,904991772,648144872,-724933397,-1965467441,2024987596,1809983544,-1719030981,1296289744,-1087877933,-1401372889,1578318884,274646895,-499825556,-244992104,51262619,-675000208,632279923,922689671,-996891772,-1702387808,1760304291,2075979607,-1982370732,1562183871,-1351185476,-1138329528,1313733451,549293790,-757723683,-1048117719,871202090,-416867903,357341890,102525238,-193467851,-1436232175,1477399826,1264559846,-1187764763,1845379342,-1617575411,-1933233671,2125378298,820201905,-1031222606,-774358714,598981189,-143008082,85089709,373468761,-467063462,-1170599554,1213305469,1526817161,-1452612982,2107672161,-1882520222,-1667500394,1861252501,1098587580,-1290756417,-1606390453,1378610760,-2032039261,1955203488,1742404180,-1783531177,-878557837,969524848,714683780,-655182201,205050476,-28094097,-318528869,526918040,1361435347,-1555146288,-1340167644,1114974503,-1765847604,1691668175,2005155131,-2047885768,-604208612,697762079,986182379,-928222744,476452099,-301099520,-44210700,255256311,1640403810,-1817374623,-2130844779,1922457750,-1503918979,1412925310,1197962378,-1257441399,-350237779,427051182,170179418,-129025959,746937522,-554770511,-843174843,1070968646,1905808397,-2081171698,-1868356358,1657317369,-1241332974,1147748369,1463399397,-1521340186,-79622974,153784257,444234805,-401473738,1021025245,-827320098,-572462294,797665321,-2097792136,1889384571,1674398607,-1851340660,1164749927,-1224265884,-1537745776,1446797203,137323447,-96149324,-384560320,461344835,-810158936,1037989803,781091935,-588970148,-1834419177,1623424788,1939049696,-2114449437,1429367560,-1487280117,-1274471425,1180866812,410100952,-367384613,-112536529,186734380,-538233913,763408580,1053836080,-860110797,-1572096602,1344288421,1131464017,-1323612590,1708204729,-1749376582,-2065018290,1988219213,680717673,-621187478,-911630946,1002577565,-284657034,493091189,238226049,-61306494,-1307217207,1082061258,1395524158,-1589280451,1972364758,-2015074603,-1800104671,1725896226,952904198,-894981883,-638100751,731699698,-11092711,222117402,510512622,-335130899,-1014159676,837199303,582374963,-790768336,68661723,-159632680,-450051796,390545967,1230274059,-1153434360,-1469116676,1510247935,-1899042540,2091215383,1878366691,-1650582816,-741088853,565732008,854102364,-1065151905,340358836,-433916489,-177076669,119113024,1493875044,-1419691417,-1204696685,1247431312,-1634718085,1828433272,2141937292,-1916740209,-483350502,291187481,34330861,-262120466,615137029,-691946490,-980332558,939183345,1776939221,-1685949482,-1999470558,2058945313,-1368168502,1545135305,1330124605,-1121741762,-210866315,17165430,307568514,-532767615,888469610,-962626711,-707819363,665062302,2042050490,-1948470087,-1735637171,1793573966,-1104306011,1279665062,1595330642,-1384295599];for(i=0;i<str.length;i++){crc=(crc>>>8)^table_crc32c[(crc^str.charCodeAt(i))&0xFF]}return(crc^(-1))>>>0}function to_utf8(str){return unescape(encodeURIComponent(str))}(function(){if(this.defer)return;var w=getTopWindow();this.defer=function(f,d,id){var delay=d|0;var deferPerf;if(id){var perfObj;if(typeof defer.perf!=="undefined")perfObj=defer.perf;else if(typeof creative!=="undefined")perfObj=creative.perf;else if(typeof perf!=="undefined")perfObj=perf;if(perfObj&&!perfObj._stopTrackingDefers){deferPerf=perfObj.start('defer',{deferId:id,delay:delay})}}if(f){var fun=function(){if(deferPerf){deferPerf.end()}f()};w.setTimeout(fun,delay)}}})();var EventEmitter={emit:function(eventName){var listeners=this._listeners;if(listeners&&listeners[eventName]){var fParams=[].slice.call(arguments,1);listeners[eventName].forEach(function(f){f.apply(window,fParams)})}},emits:function(eventName){var args=arguments;return function(){this.emit.apply(this,args)}.bind(this)},addListener:function(eventName,f){var listeners=this._listeners;listeners||(listeners=this._listeners={});listeners[eventName]||(listeners[eventName]=[]);listeners[eventName].push(f)},removeListener:function(eventName,f){var listeners=this._listeners;if(listeners&&listeners[eventName]){listeners[eventName]=listeners[eventName].filter(function(x){return x!==f})}},once:function(eventName,f){var self=this;self.on(eventName,function g(){self.off(eventName,g);f.apply(this,arguments)})},onAll:function(eventNames,cb){eventNames.split(' ').waitForEach(function(m,done){this.once(m,done)},cb,this)}};EventEmitter.on=EventEmitter.addListener;EventEmitter.off=EventEmitter.removeListener;EventEmitter.addEventListener=EventEmitter.addListener;EventEmitter.removeEventListener=EventEmitter.removeListener;extend(TrackingCenter.prototype,EventEmitter);function TrackingCenter(sessionId,accountId,purpose,trackingUrl,trackers,useBatching){this._sessionId=sessionId;this._accountId=accountId;this._trackingUrl=trackingUrl;this._trackers=trackers;this._purpose=purpose;this._flushCycle=null;this._flushCycleLength=10000;this._useBatching=useBatching;this._usePixel=true;this.windowForPixels=window;this._instantiation=randInt();this._eventIndex=0;this._pendingEvents=[];this._eventsInProgress=[];this._pendingPixels=[];this._waitingTrackingRequests=0;this._decrementWaiting=this._decrementWaiting.bind(this);this.flush=this.flush.bind(this);this.batchFlush=this.batchFlush.bind(this);this._flushPixels=this._flushPixels.bind(this)}TrackingCenter.eventCountLimit=1000;TrackingCenter.prototype.setExperimentStatus=function(experiments){if(!experiments||!experiments.get)return;var batchingExperiment=experiments.get('BatchTrackingRequests');this._useBatching=batchingExperiment?batchingExperiment.chosenVariant.slice(0,7)!=="control":this._useBatching;var beaconForBatchingExperiment=batchingExperiment&&batchingExperiment.chosenVariant.slice(-6)==="Beacon";var beaconExperiment=experiments.get('TrackWithBeaconAPI')||beaconForBatchingExperiment;this._useBeacon=beaconExperiment&&this.windowForPixels.navigator&&this.windowForPixels.navigator.sendBeacon;this._usePixel=!(beaconForBatchingExperiment&&this._useBeacon)};TrackingCenter.prototype.batchFlush=function(){this._useBatching?this.flush():noop()};TrackingCenter.prototype.startBatchFlushCycle=function(initDelay){if(!this._useBatching)return;this.windowForPixels.setTimeout(this.flush,initDelay);this._flushCycle=this.windowForPixels.setTimeout(this.flush,this._flushCycleLength)};TrackingCenter.prototype.isTrackingLimitReached=function(){return this._eventIndex>=TrackingCenter.eventCountLimit};TrackingCenter.prototype._createTrackingEvent=function(event){event=JSON.parse(JSON.stringify(event));return extend({sessionId:this._sessionId,accountId:this._accountId,stream:'adEvents',instantiation:this._instantiation,index:this._eventIndex++,clientTimestamp:new Date/1000},event)};TrackingCenter.prototype._addEventPendingToQueues=function(event){var queue=this._resolvePixelsAndEventsForQueue([event]);if(this.isTrackingLimitReached()){queue.events.push(this._createTrackingEvent({name:'eventLimitReached'}))}queue.events.forEach(function(event){Logger('tracking').log('Queuing event '+JSON.stringify(event))});queue.pixels.forEach(function(pixel){Logger('tracking').log('Queuing pixel '+JSON.stringify(pixel))});this._pendingEvents=this._pendingEvents.concat(queue.events);this._pendingPixels=this._pendingPixels.concat(queue.pixels)};TrackingCenter.prototype.track=function(event,cb){this.trackNoLaterThan(event,0,cb)};TrackingCenter.prototype.trackNoLaterThan=function(event,timeout,cb){if(this.isTrackingLimitReached()){console.warn('Tracking limit reached: '+TrackingCenter.eventCountLimit+' events.');return}if(!isInteger(timeout)){timeout=1500}else if(timeout<0){timeout=0}cb=cb||noop;if(this._purpose!=='live'){var trackingEvent=this._createTrackingEvent(event);Logger('tracking').log('Ignoring non-live event '+JSON.stringify(trackingEvent));defer(cb);return}var waitingTimeout=null;this._addEventPendingToQueues(event);var trackingWindow=this.windowForPixels;this.once('trackingQueueEmptied',function(){if(waitingTimeout){trackingWindow.clearTimeout(waitingTimeout);waitingTimeout=null}cb()}.bind(this));if(!this._useBatching)waitingTimeout=trackingWindow.setTimeout(this.flush,timeout);else{waitingTimeout=trackingWindow.setTimeout(this._flushPixels,timeout)}function isInteger(x){return parseInt(x,10)===x}};TrackingCenter.prototype._resolvePixelsAndEventsForQueue=function(incomingEvents){var self=this;function resolve(inEvents,outEvents,outPixels){if(inEvents.length==0){return{events:outEvents,pixels:outPixels}}else{var inEvent=inEvents[0];var outEvent=self._createTrackingEvent(inEvent);var trackerResult=self._trackers.urlsAndEventsFor(outEvent);return resolve(inEvents.slice(1).concat(trackerResult.events||[]),outEvents.concat(outEvent),outPixels.concat(trackerResult.urls||[]))}}return resolve(incomingEvents,[],[])};TrackingCenter.prototype._fireBeacon=function(url,callback){this.windowForPixels.navigator.sendBeacon(url);callback()};TrackingCenter.prototype._firePixel=function(url,callback){function imgHandler(){img.onload=img.onerror=null;callback()};var img=this.windowForPixels.document.createElement('img');img.onload=img.onerror=imgHandler;try{img.src=url}catch(e){imgHandler()}};TrackingCenter.prototype._decrementWaiting=function(){if(this._waitingTrackingRequests>0){if(!--this._waitingTrackingRequests){this.emit('trackingQueueEmptied')}}};TrackingCenter.prototype.flush=function(cb,usePixel){var self=this;var callback=cb||noop;usePixel=typeof usePixel==='undefined'?this._usePixel:usePixel;var mine=self._pendingEvents;self._pendingEvents=[];self._eventsInProgress=self._eventsInProgress.concat(mine);if(mine.length){self._waitingTrackingRequests++;if(this._useBatching){this.windowForPixels.clearTimeout(this._flushCycle);callback=function(){self._flushCycle=self.windowForPixels.setTimeout(self.flush,self._flushCycleLength);(cb||noop)()}}var dequeueEvents=function(){self._eventsInProgress=self._eventsInProgress.filter(function(e){return mine.indexOf(e)===-1});self._decrementWaiting()};if(this._useBeacon)self._fireBeacon(self._getTrackerBeaconUrl(mine),dequeueEvents);if(usePixel)self._firePixel(self._getTrackerPixelUrl(mine),dequeueEvents)}self._flushPixels();if(self._waitingTrackingRequests===0){this.windowForPixels.setTimeout(callback,0)}else{this.once('trackingQueueEmptied',callback)}};TrackingCenter.prototype._flushPixels=function(){var self=this;self._pendingPixels.forEach(function(url){self._waitingTrackingRequests++;self._firePixel(url,self._decrementWaiting)});self._pendingPixels=[]};TrackingCenter.prototype._getTrackerUrl=function(body){base64json=this.windowForPixels.btoa(to_utf8(JSON.stringify(body)));return this._trackingUrl+'json/'+base64json+"?crc32c="+crc32(base64json)};TrackingCenter.prototype._getTrackerPixelUrl=function(events){return this._getTrackerUrl({events:events})};TrackingCenter.prototype._getTrackerBeaconUrl=function(events){return this._getTrackerUrl({events:events.map(function(event){var beaconEvent=JSON.parse(JSON.stringify(event));beaconEvent.beacon=true;return beaconEvent})})};TrackingCenter.prototype._getTrackerRedirectUrl=function(events,pixels,dest,options){options=options||{};var body={events:events,pixels:pixels,dest:dest};if(options.jsRedirectFunc){body.redirectFunc=options.jsRedirectFunc}return this._getTrackerUrl(body)};TrackingCenter.prototype.wrapRedirectPageUrl=function(dest,options){var url=this._getTrackerRedirectUrl(this._pendingEvents.concat(this._eventsInProgress),this._pendingPixels,dest,options);if(this._useBeacon){this.flush(undefined,false)}else{this._pendingEvents=[];this._pendingPixels=[]}return url};function Tracking(urls,runtimeParams,trackers){Logger.initFromRuntimeParams(runtimeParams);var trackingCenter=new TrackingCenter("s1557888746xdcf1c09f5a9b5bx57276648","21f7540c",runtimeParams.purpose,runtimeParams.secure?urls.trackingUrl:urls.insecureTrackingUrl,trackers,true);var lastInteractionTimestamp=null;function creativeLoaded(viewability00Measurable){trackingCenter.track({name:'creativeLoaded',viewability00Measurable:viewability00Measurable,viewability501Measurable:false,viewableTimeMeasurable:false});flush()}function creativeViewable(){trackingCenter.track({name:'viewable00'});flush()}function viewShown(variantId){var selectedVariant=arrayFind(unitVariants,function(variant){return variant.variantLocalId===variantId}),variantSize={width:selectedVariant.width,height:selectedVariant.height};trackingCenter.track({name:'viewShown',viewName:selectedVariant.width+' x '+selectedVariant.height,designSize:variantSize,availableSize:variantSize,clazz:'CreativeUnitVariant',unitName:'banner',unitVariantLocalId:variantId,initiationTimestamp:new Date/1000});flush()}function screenShown(variantId,screenId){trackingCenter.track(extendEvent(screenId,{name:'screenShown'}));flush()}function creativeRendered(){trackingCenter.track({name:'creativeRendered'});flush()}function extendEvent(initiatorScreenId,event){var selectedVariant=arrayFind(unitVariants,function(variant){return variant.variantLocalId===variantId});var isMaster=initiatorScreenId===masterScreen.localId;var title=isMaster?masterScreen.title:selectedVariant.screens[0].title;return extend({initiationTimestamp:new Date/1000,unitName:'banner',unitVariantLocalId:variantId,screenLocalId:initiatorScreenId,screenTitle:title,screenIsMaster:isMaster},event)}function trackEvent(initiatorScreenId,event){trackingCenter.track(extendEvent(initiatorScreenId,event))}function trackUserInteraction(initiatorScreenId,objectData){if(lastInteractionTimestamp){var interactionTimestamp=Date.now();if(interactionTimestamp-lastInteractionTimestamp>1000){trackEvent(initiatorScreenId,extend({name:'interaction'},objectData));lastInteractionTimestamp=interactionTimestamp}}else{trackEvent(initiatorScreenId,extend({name:'firstInteraction'},objectData));lastInteractionTimestamp=Date.now()}flush()}function flush(){trackingCenter.flush()}return{creativeLoaded:creativeLoaded,creativeRendered:creativeRendered,creativeViewable:creativeViewable,viewShown:viewShown,screenShown:screenShown,trackEvent:trackEvent,trackUserInteraction:trackUserInteraction,flush:flush}}var VIDEO_QUARTILE_EVENTS={videoStart:function(previousTime,currentTime,duration){return currentTime>Math.min(1,duration*0.25)},videoFirstQuartile:function(previousTime,currentTime,duration){var m=duration*0.25;return previousTime<m&&currentTime>=m},videoMidpoint:function(previousTime,currentTime,duration){var m=duration*0.50;return previousTime<m&&currentTime>=m},videoThirdQuartile:function(previousTime,currentTime,duration){var m=duration*0.75;return previousTime<m&&currentTime>=m},videoComplete:function(previousTime,currentTime,duration){return currentTime>Math.max(duration*0.75,duration-2)}};function CeltraVideoTracking(video,metaData){var clazz='Video',sourceType='File',videoPlayerMode='inline',localId=metaData.localId,name=metaData.name,fileName=metaData.fileName,blobHash=metaData.blobHash,autoplay=metaData.autoplay,screenLocalId=metaData.screenLocalId,segmentFrom=0,videoPlayAttemptedTracked=false,quartileEventsNotTrackedYet={},previousTime=null,ticker;init();function init(){ticker=new Ticker(onVideoPlayedSegment,250);addEventListener(video,'play',onPlay);addEventListener(video,'pause',onPause);addEventListener(video,'ended',onEnded);addEventListener(video,'durationchange',onDurationChange);addEventListener(video,'timeupdate',onTimeUpdate);addEventListener(document,'destroy',destroy);for(var quartileEvent in VIDEO_QUARTILE_EVENTS){quartileEventsNotTrackedYet[quartileEvent]=true}tracking.trackEvent(screenLocalId,{name:'viewShown',objectClazz:clazz,objectLocalId:localId,objectName:name,viewName:name,clazz:clazz,filename:fileName,label:name,source:blobHash,sourceType:sourceType,userInitiated:!autoplay,startMuted:!!video.muted,videoPlayerMode:videoPlayerMode,duration:video.duration});tracking.flush();onDurationChange();if(!video.paused){onPlay()}}function onPlay(){if(!videoPlayAttemptedTracked){tracking.trackEvent(screenLocalId,{name:'videoPlayAttempted',objectClazz:clazz,objectLocalId:localId,objectName:name,label:name,filename:fileName,trackable:true,userInitiated:!autoplay,autoReplay:metaData.loop,startMuted:!!video.muted,videoPlayerMode:videoPlayerMode,engineType:'html5',videoPreset:'webmHQ',sourceType:sourceType,source:blobHash});tracking.flush();videoPlayAttemptedTracked=true}ticker.start();onVideoPlayedSegment()}function onPause(){stopTicker();onVideoPlayedSegment();tracking.trackEvent(screenLocalId,{name:'videoPause',objectClazz:clazz,objectLocalId:localId,objectName:name});tracking.flush()}function onEnded(){stopTicker();onVideoPlayedSegment();tracking.trackEvent(screenLocalId,{name:'videoComplete',objectClazz:clazz,objectLocalId:localId,objectName:name,label:name});tracking.flush();segmentFrom=0}function onDurationChange(){if(video.readyState){tracking.trackEvent(screenLocalId,{name:'videoDurationUpdate',objectClazz:clazz,objectLocalId:localId,objectName:name,duration:video.duration});tracking.flush();removeEventListener(video,'durationchange',onDurationChange)}}function onTimeUpdate(){var currentTime;if(previousTime===null){currentTime=video.currentTime}else{currentTime=Math.max(video.currentTime,previousTime)}var duration=video.duration;if(duration!==null&&previousTime!==null&&currentTime>=0&&currentTime-previousTime<1){if(previousTime>0&&previousTime<1){previousTime=0}var doFlush=false;for(var quartileEvent in VIDEO_QUARTILE_EVENTS){if(quartileEventsNotTrackedYet[quartileEvent]&&VIDEO_QUARTILE_EVENTS[quartileEvent](previousTime,currentTime,duration)){quartileEventsNotTrackedYet[quartileEvent]=false;doFlush=true}}if(doFlush){tracking.flush()}}previousTime=currentTime}function onVideoPlayedSegment(){var fullscreenElement=document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement;var segmentTo=video.currentTime;if(segmentFrom===segmentTo){return}tracking.trackEvent(screenLocalId,{name:'videoPlayedSegment',objectClazz:clazz,objectLocalId:localId,objectName:name,from:segmentFrom,to:segmentTo,muted:video.muted,fullscreen:fullscreenElement===video,gaze:true});segmentFrom=segmentTo}function stopTicker(){ticker.stop()}function destroy(){stopTicker()}}function BaseUnitVariantSelector(unitVariants){this.unitVariants=unitVariants;this.containerWidth=null;this.containerHeight=null;this.selectedVariant=null;this.thresholdLandscape=1.2;this.thresholdPortrait=1/1.2; }BaseUnitVariantSelector.prototype.init=function(){};BaseUnitVariantSelector.prototype.sortVariants=function(fn){return this.unitVariants.slice(0).sort(fn)};BaseUnitVariantSelector.prototype.getVariantWithShortestDimension=function(dimension){return this.unitVariants.reduce(function(selectedVariant,currentVariant){return currentVariant[dimension]<selectedVariant[dimension]?currentVariant:selectedVariant})};BaseUnitVariantSelector.prototype.aspectRatioToBucket=function(aspectRatio){if(aspectRatio>this.thresholdLandscape){return'landscape'}else if(aspectRatio<this.thresholdPortrait){return'portrait'}else{return'square'}};BaseUnitVariantSelector.prototype.getBucketSortFunction=function(bucketPriorityMap,primarySortDimension){var secondarySortDimension=primarySortDimension==='width'?'height':'width';return function(a,b){if(a.bucket===b.bucket){if(a.variant[primarySortDimension]===b.variant[primarySortDimension]){return b.variant[secondarySortDimension]-a.variant[secondarySortDimension]}return b.variant[primarySortDimension]-a.variant[primarySortDimension]}return bucketPriorityMap[a.bucket]-bucketPriorityMap[b.bucket]}};BaseUnitVariantSelector.prototype.selectUnitVariant=function(placementWidth,placementHeight){var self=this;if(placementWidth>0&&placementHeight>0){var variantBuckets=self.unitVariants.map(function(variant){return{variant:variant,bucket:self.aspectRatioToBucket(variant.aspectRatio)}});var placementBucket=self.aspectRatioToBucket(placementWidth/placementHeight);var sortedVariants=null;if(placementBucket==='landscape'){var landscapeBucketPriorities={landscape:0,square:1,portrait:2};sortedVariants=variantBuckets.sort(self.getBucketSortFunction(landscapeBucketPriorities,'width'))}else if(placementBucket==='portrait'){var portraitBucketPriorities={portrait:0,square:1,landscape:2};sortedVariants=variantBuckets.sort(self.getBucketSortFunction(portraitBucketPriorities,'height'))}else{var squareBucketPriorities={square:0,landscape:1,portrait:2};sortedVariants=variantBuckets.sort(self.getBucketSortFunction(squareBucketPriorities,'width'))}var fitsPlacement=arrayFind(sortedVariants,function(variantBucket){return variantBucket.variant.width<=placementWidth&&variantBucket.variant.height<=placementHeight});return fitsPlacement?fitsPlacement.variant:sortedVariants[0].variant}else if(placementWidth>0&&placementHeight===0){var sortedByWidthDesc=self.sortVariants(function(a,b){return(b.width-a.width)||(a.variantLocalId-b.variantLocalId)}),fitsPlacementWidth=arrayFind(sortedByWidthDesc,function(variant){return variant.width<=placementWidth});return fitsPlacementWidth?fitsPlacementWidth:sortedByWidthDesc[sortedByWidthDesc.length-1]}else if(placementWidth===0&&placementHeight>0){var sortedByWidthAsc=self.sortVariants(function(a,b){return(a.width-b.width)||(a.variantLocalId-b.variantLocalId)}),fitsPlacementHeight=arrayFind(sortedByWidthAsc,function(variant){return variant.height<=placementHeight});return fitsPlacementHeight?fitsPlacementHeight:self.getVariantWithShortestDimension('height')}else{return self.getVariantWithShortestDimension('width')}};BaseUnitVariantSelector.prototype.setPlacementSize=function(width,height){if(window.frameElement){window.frameElement.width=width;window.frameElement.height=height}};BaseUnitVariantSelector.prototype.getComputedDimension=function(value,dimension){var otherDimension=dimension==='width'?'height':'width';if(this.selectedVariant.sizing==='responsive'&&this.selectedVariant.scaleUnit){return Math.max(this.selectedVariant[dimension],Math.ceil(value*(this.selectedVariant[dimension]/this.selectedVariant[otherDimension])))}else{return this.selectedVariant[dimension]}};BaseUnitVariantSelector.prototype.setNewUnitVariant=function(containerWidth,containerHeight){this.selectedVariant=this.selectUnitVariant(containerWidth,containerHeight);var placementWidth,placementHeight;if(containerWidth>0&&containerHeight===0){placementWidth=containerWidth;placementHeight=this.getComputedDimension(containerWidth,'height')}else if(containerWidth===0&&containerHeight>0){placementWidth=this.getComputedDimension(containerHeight,'width');placementHeight=containerHeight}else if(containerWidth>=this.selectedVariant.width&&containerHeight>=this.selectedVariant.height){placementWidth=containerWidth;placementHeight=(this.selectedVariant.sizing==='responsive'&&!this.selectedVariant.scaleUnit)?containerHeight:this.getComputedDimension(containerWidth,'height')}else{placementWidth=this.selectedVariant.width;placementHeight=this.selectedVariant.height}this.setPlacementSize(placementWidth,placementHeight);setVariantAndScreenId(this.selectedVariant.variantLocalId,this.selectedVariant.screens[0].localId)};function inherit(C,P){var F=function(){};F.prototype=P.prototype;C.prototype=new F();Object.defineProperties(C,{uber:{get:function(){return P.prototype},enumerable:false,configurable:false},uberConstructor:{get:function(){return P},enumerable:false,configurable:false}});C.prototype.constructor=C}inherit(LiveUnitVariantSelector,BaseUnitVariantSelector);function LiveUnitVariantSelector(unitVariants){BaseUnitVariantSelector.call(this,unitVariants);this.isInitialWidth0=null;this.isInitialHeight0=null;this.ticker=null;this._autoStart=true}LiveUnitVariantSelector.prototype.init=function(){var self=this;LiveUnitVariantSelector.uber.init.apply(this);this.setPlacementSize(0,0);var initialContainerSize=sdkAdapter.getContainerSize();this.isInitialWidth0=initialContainerSize.width===0;this.isInitialHeight0=initialContainerSize.height===0;this.setPlacementSize(initialContainerSize.width,initialContainerSize.height);this.ticker=new Ticker(this.onPlacementResize.bind(this),66);if(this.isInitialWidth0&&this.isInitialHeight0){this.setNewUnitVariant(0,0)}else{if(this._autoStart){this._startAutoResize()}addEventListener(document,'destroy',function(){self.destroy()})}};LiveUnitVariantSelector.prototype._startAutoResize=function(){this.onPlacementResize();this.ticker.start()};LiveUnitVariantSelector.prototype._stopAutoResize=function(){this.ticker.stop()};LiveUnitVariantSelector.prototype.onPlacementResize=function(){var containerSize=sdkAdapter.getContainerSize(),newContainerWidth=containerSize.width,newContainerHeight=containerSize.height;var widthChanged=this.isInitialWidth0?false:newContainerWidth!==this.containerWidth;var heightChanged=this.isInitialHeight0?false:newContainerHeight!==this.containerHeight;if(widthChanged||heightChanged){this.containerWidth=this.isInitialWidth0?0:newContainerWidth;this.containerHeight=this.isInitialHeight0?0:newContainerHeight;this.setNewUnitVariant(this.containerWidth,this.containerHeight)}};LiveUnitVariantSelector.prototype.destroy=function(){if(this.ticker){this.ticker.stop();this.ticker=null}};addEventListener(documentQuerySelector('.o251.el'),'click',function(){var url=getOpenURLOverride('https://www.expedia.com/g/pt/ms-hotel-mgmresorts-lasvegas?langid=1033');tracking.trackEvent(4,{name:'urlOpened',objectClazz:'Hotspot',objectLocalId:251,objectName:'Hotspot 1',url:url,label:'https://www.expedia.com/g/pt/ms-hotel-mgmresorts-lasvegas?langid=1033'});tracking.flush();sdkAdapter.openURL(url,'https://www.expedia.com/g/pt/ms-hotel-mgmresorts-lasvegas?langid=1033')});addEventListener(documentQuerySelector('.o251.el.hotspot'),'click',function(){tracking.trackUserInteraction(4,{"objectClazz":"Hotspot","objectLocalId":251,"objectName":"Hotspot 1"})});addEventListener(documentQuerySelector('.o824.el'),'videoComplete',function(){var video=documentQuerySelector('#video-824');if(video.currentTime===0&&!video.alreadyPlayed){unmuteVideo(video)}playVideo(video,false);video.alreadyPlayed=true});addEventListener(documentQuerySelector('.o824.el'),'videoComplete',function(){pauseVideo(documentQuerySelector('#video-824'))});var runtimeParams={"tagVersion":"6","deviceInfo":{"deviceType":"Desktop","primaryHardwareType":"Desktop","mobileDevice":false,"osName":"Windows","osVersion":"NT 6.3","platform":"DesktopPlatform","platformVersion":null,"browserName":"Chrome","browserVersion":"74.0.3729.108","browserRenderingEngine":"WebKit","vendor":"Google","model":"Chrome - Windows"},"weather":{"windy":"0","currentCondition":"cloudy","apparentTemperature":14.0,"temperature":14.4,"windSpeed":3,"cloudCoverage":100,"conditions":[{"name":"cloudy","weight":0}]},"ipCountryCode":"US","ipRegionCode":null,"ipPrincipalSubdivisionCode":"WA","ipCityGeonameId":null,"ipCity":null,"ipPostalCode":null,"ipLat":47.6092,"ipLng":-122.3314,"accountId":"21f7540c","folderId":"c98ab838","placementId":"c99bcac8","supplierId":null,"sessionId":"s1557888746xdcf1c09f5a9b5bx57276648","purpose":"live","secure":1,"clientTimestamp":"1557888746.897","clientTimeZoneOffsetInMinutes":420,"clientIp":"216.251.118.195","gpsLat":null,"gpsLng":null,"language":"zh","acceptLanguage":"zh-CN,zh;q=0.9,en-US;q=0.8,en;q=0.7","platformAdvId":null,"platformAdvIdTrackingLimited":null,"userIdentifiers":{},"variantChoices":{},"neustarSegment":null,"authBasis":"1557888746979,3ec3ce0c,c99bcac8","authToken":"edc2fec04f10a3fe65105b71001fcd90","customAudiences":{},"derivedAudiences":{},"destinationDefinitions":[],"dynamicContent":[],"tuneIosQueryStringFragment":null,"tuneAndroidQueryStringFragment":null,"tuneCustomAttributes":{},"admarvel_format":null,"overrides":{"placementId":"c99bcac8","customAudiences":{},"derivedAudiences":{},"deviceInfo":{"deviceType":"Desktop","primaryHardwareType":"Desktop","mobileDevice":false,"osName":"Windows","osVersion":"NT 6.3","platform":"DesktopPlatform","platformVersion":null,"browserName":"Chrome","browserVersion":"74.0.3729.108","browserRenderingEngine":"WebKit","vendor":"Google","model":"Chrome - Windows"},"language":"zh","ipCountryCode":"US","ipRegionCode":null,"ipPrincipalSubdivisionCode":"WA","ipCityGeonameId":null,"ipCity":null,"weather":{"windy":"0","currentCondition":"cloudy","apparentTemperature":14.0,"temperature":14.4,"windSpeed":3,"cloudCoverage":100,"conditions":[{"name":"cloudy","weight":0}]},"clientTimestamp":"1557888746.897","clientTimeZoneOffsetInMinutes":420},"utSignals":null,"_mraidCheck":null,"externalAdServer":"DFPPremium","externalCreativeId":"138270042606","externalCreativeName":null,"externalPlacementId":"21785981934","externalPlacementName":null,"externalSiteId":"22171697","externalSiteName":"expedia.com","externalSupplierId":null,"externalSupplierName":null,"externalLineItemId":"5060989876","externalSessionId":null,"externalBundleId":null,"externalCreativeWidth":null,"externalCreativeHeight":null,"externalCampaignId":"2541993534","externalCampaignName":null,"externalAdvertiserId":"37420337","clickUrl":"https://adclick.g.doubleclick.net/pcs/click?xai=AKAOjsuVgTDE9jrhq9dY7GXZHmap9LpehwxHqsIzOfyoYjtbBScR436sa74jDuETW3Z2w2j-V-T0QD2xi3hogioo0JjIK6q2FdMS-E9ShEl1TWKekILsJLGUHrFN2ZFEIZLL_-NHQ_j3PXuZX6lbNMuxT5mGpqxj2lEPLJJsoZGRwbliFt4GtUyM83C6RgYZQ9FcSVbGRkQ1sZ8urT4JFJGGkG8JNK35B4IXBXnXm36cEL56n2IeVwrd8tCobjCWX_Q80-HL9sErLZ0DoCRGqg&sai=AMfl-YTvBZEVIoqnWgW3nNB5dqZ3Fd1X2dNSOVzHSnHs5Ov1oOuI4E1VcbuVIEFXP--cQwu97YEtBmd-bs6OrCKdXjS061rgRXyt9SEK2rIhBld0Wo-orATli5WTzY6gt_7RLHjn&sig=Cg0ArKJSzKSwDHBGQa8CEAE&urlfix=1&adurl=","useClickAsDestination":null,"scriptId":"celtra-script-1","firehoseUrl":null,"clickEvent":"advertiser","clickUrlNeedsDest":null,"ncu":null,"firstPage":1,"dataURIsEnabled":0,"universalAndAppLinksInMRAID":0,"monotypeProjectId":"c46ed090-3671-4163-a85b-b06b4038ae38","iosAdvId":null,"iosAdvIdTrackingLimited":null,"androidAdvId":null,"androidAdvIdTrackingLimited":null,"moatRandom":{"first":964098631,"second":1517134529},"skipOffset":null,"_enablePoliteLoading":null,"_politeImageUrl":null,"_politeClickThrough":null,"sticky":null,"_mopubExt":null,"enabledServices":["googleMaps","contentSharing"],"vastCompanion":0,"creativeVariantLockSize":null,"vastVersion":null,"country":"US","productCategoryCode":null,"campaignName":"252509_Vertical_FastBanner_Test","agencyId":"eb0fb5d1","customPartnerAttributeBrandId":null,"preferredClickThroughWindow":"new","expandDirection":"undefined","hostPageLoadId":"4233316475252846"};var urls={"creativeUrl":"https://ads.celtra.com/compiled/3ec3ce0c/","apiUrl":"https://hub.celtra.com/api/","cachedApiUrl":"https://cache-ssl.celtra.com/api/","staticUrl":"https://cache-ssl.celtra.com/api/static/v967cdde1cf/","insecureCreativeUrl":"http://ads.celtra.com/compiled/3ec3ce0c/","insecureApiUrl":"http://hub.celtra.com/api/","insecureCachedApiUrl":"http://cache.celtra.com/api/","insecureStaticUrl":"http://cache.celtra.com/api/static/v967cdde1cf/","trackingUrl":"https://track.celtra.com/","insecureTrackingUrl":"http://track.celtra.com/","geoUrl":"https://geo.celtra.com/","insecureGeoUrl":"http://geo.celtra.com/","customAudiencesUrl":"https://audiences.celtra.com","insecureCustomAudiencesUrl":"http://audiences.celtra.com","shareUrl":"https://hub-user.celtra.com/share/","insecureShareUrl":"http://hub-user.celtra.com/share/"};urls.resourceUrl=runtimeParams.secure?urls.staticUrl:urls.insecureStaticUrl;
    
var macros = function (x) {
    if (x instanceof Array) {
        return x.map(macros);
    } else {
        var macroTags = [
            ['%%CACHEBUSTER%%', (Math.random()+'').slice(2)]
,['%n', (Math.random()+'').slice(2)]
,['%s', "https"]
,['{celtraAccountId}', "21f7540c"]
,['{celtraAgencyId}', "eb0fb5d1"]
,['{celtraAndroidAdvIdTrackingLimitedBoolStr}', ""]
,['{celtraAndroidAdvIdTrackingLimited}', ""]
,['{celtraAndroidAdvId}', ""]
,['{celtraCampaignId:int}', "3381311544"]
,['{celtraCampaignId}', "c98ab838"]
,['{celtraCampaignName}', "252509_Vertical_FastBanner_Test"]
,['{celtraCountryCode}', "US"]
,['{celtraCreativeId:int}', "1053019660"]
,['{celtraCreativeId}', "3ec3ce0c"]
,['{celtraCreativeVariant:urlenc}', ""]
,['{celtraCreativeVariant}', ""]
,['{celtraCustomPartnerAttribute\[code\]}', ""]
,['{celtraExternalAdServer}', "DFPPremium"]
,['{celtraExternalAdvertiserId}', "37420337"]
,['{celtraExternalBundleId}', ""]
,['{celtraExternalCampaignId}', "2541993534"]
,['{celtraExternalCampaignName}', ""]
,['{celtraExternalCreativeId}', "138270042606"]
,['{celtraExternalCreativeName}', ""]
,['{celtraExternalLineItemId}', "5060989876"]
,['{celtraExternalPlacementId}', "21785981934"]
,['{celtraExternalPlacementName}', ""]
,['{celtraExternalSessionId}', ""]
,['{celtraExternalSiteId}', "22171697"]
,['{celtraExternalSiteName}', "expedia.com"]
,['{celtraExternalSupplierId}', ""]
,['{celtraExternalSupplierName}', ""]
,['{celtraIosAdvIdTrackingLimitedBoolStr}', ""]
,['{celtraIosAdvIdTrackingLimited}', ""]
,['{celtraIosAdvId}', ""]
,['{celtraPlacementId:int}', "3382430408"]
,['{celtraPlacementId}', "c99bcac8"]
,['{celtraPlatformAdvIdTrackingLimited}', ""]
,['{celtraPlatformAdvId}', ""]
,['{celtraProductCategoryCode}', ""]
,['{celtraProto}', "https"]
,['{celtraRandom}', (Math.random()+'').slice(2)]
,['{celtraSessionId}', "s1557888746xdcf1c09f5a9b5bx57276648"]
,['{celtraSupplierId:int}', ""]
,['{celtraSupplierId}', ""]

        ];
        return macroTags.reduce(function(str, replacementRule, idx, arr) {
            return str.replace(new RegExp(replacementRule[0], 'ig'), replacementRule[1] ? replacementRule[1] : '');
        }, x);
    }
};
    
    var trackers = (function() {
    return [
        // 3rd-party tracker (regular)
function(event) {
    if (event.name == 'adLoading')
        return {urls: macros([])};

    if (event.name == 'firstInteraction')
        return {urls: macros([])};

    if (event.name == 'creativeLoaded')
        return {urls: macros([])};

    if (event.name == 'creativeRendered')
        return {urls: macros([])};

    if (event.name == 'viewable00')
        return {urls: macros([])};

    if (event.name == 'viewable501')
        return {urls: macros([])};

    if (event.name == 'expandRequested')
        return {urls: macros([])};

    if (event.name == 'videoPlayInitiated')
        return {urls: macros([])};

    if (event.name == 'videoStart')
        return {urls: macros([])};

    if (event.name == 'videoFirstQuartile')
        return {urls: macros([])};

    if (event.name == 'videoMidpoint')
        return {urls: macros([])};

    if (event.name == 'videoThirdQuartile')
        return {urls: macros([])};

    if (event.name == 'videoComplete')
        return {urls: macros([])};

    if (event.name == 'videoPause')
        return {urls: macros([])};

    if (event.name == 'videoMuted')
        return {urls: macros([])};

    if (event.name == 'videoUnmuted')
        return {urls: macros([])};

    if (event.name == 'custom')
        return {urls: macros({}[event.label] || [])};

    if (event.name == 'urlOpened')
        return {urls: macros({}[event.label] || [])};

    if (event.name == 'storeOpened')
        return {urls: macros({}[event.label] || [])};
},
// 3rd-party tracker (click regular)
function(event) {
    if (event.name === "firstInteraction")
        return {urls: macros([]), events: [{name: 'click'}] };
},
// Ad server tracker
function(event) {
    if (event.name === "firstInteraction")
        return {urls: macros(["https://adclick.g.doubleclick.net/pcs/click?xai=AKAOjsuVgTDE9jrhq9dY7GXZHmap9LpehwxHqsIzOfyoYjtbBScR436sa74jDuETW3Z2w2j-V-T0QD2xi3hogioo0JjIK6q2FdMS-E9ShEl1TWKekILsJLGUHrFN2ZFEIZLL_-NHQ_j3PXuZX6lbNMuxT5mGpqxj2lEPLJJsoZGRwbliFt4GtUyM83C6RgYZQ9FcSVbGRkQ1sZ8urT4JFJGGkG8JNK35B4IXBXnXm36cEL56n2IeVwrd8tCobjCWX_Q80-HL9sErLZ0DoCRGqg&sai=AMfl-YTvBZEVIoqnWgW3nNB5dqZ3Fd1X2dNSOVzHSnHs5Ov1oOuI4E1VcbuVIEFXP--cQwu97YEtBmd-bs6OrCKdXjS061rgRXyt9SEK2rIhBld0Wo-orATli5WTzY6gt_7RLHjn&sig=Cg0ArKJSzKSwDHBGQa8CEAE&urlfix=1&adurl="]), events: [{name: 'clickReportedToSupplier'}] };
}
    ]
})();
    trackers.urlsAndEventsFor = function(event) {
        return this.reduce(function(acc, tracker) {
            var ue = tracker(event) || {};
            return {
                urls:   acc.urls.concat(ue.urls || []),
                events: acc.events.concat(ue.events || [])
            };
        }, {urls: [], events: []});
    };
       
    
var adLoadingEvent = {"name":"adLoading","sessionId":"s1557888746xdcf1c09f5a9b5bx57276648"};
adLoadingEvent.clientTimestamp = new Date/1000;

trackers.urlsAndEventsFor(adLoadingEvent).urls.forEach(function(url) {
    // On IE 8+ URLs containing '%' character sometimes throw an error and
    // stop current JS run loop. One solution  would be to look for that
    // and replace it with '%25', but we've decided not to modify incoming
    // URLs, because this issue is really a combination of two external
    // problems: broken URL on a buggy browser.
    // https://celtra.atlassian.net/browse/MAB-4476
    try {
        var img = new Image;
        
        img.src = url;
    } catch(e) {}
});
    
    var urlOpenedOverrideUrls = {};
    var clickThroughDestinationUrl = null;
       var tracking=new Tracking(urls,runtimeParams,trackers);if('$sf'in getTopWindow()){window.SDKAdapter=SafeFrameSDKAdapter}else{window.SDKAdapter=BrowserSDKAdapter}window.UnitVariantSelector=LiveUnitVariantSelector;window.VideoTracking=CeltraVideoTracking;var sdkAdapter=new SDKAdapter(initAd),unitVariantSelector=new UnitVariantSelector([{"variantLocalId":2,"masterScreen":{"localId":3,"title":"Master"},"screens":[{"localId":4,"title":"Start"}],"sizing":"fixed","scaleUnit":false,"width":160,"height":600,"area":96000,"aspectRatio":0.26666666666667}]),adInited=false,variantId,screenId,masterScreen,creativeInView,creativeMeasurable,mandatoryAssetsPreloaded=false,unitVariants=[{"variantLocalId":2,"masterScreen":{"localId":3,"title":"Master"},"screens":[{"localId":4,"title":"Start"}],"sizing":"fixed","scaleUnit":false,"width":160,"height":600,"area":96000,"aspectRatio":0.26666666666667}];var mandatoryAssetsLoadEvents;var optionalAssetsLoadEvents;function getMasterScreen(){return arrayFind(unitVariants,function(variant){return variant.variantLocalId===variantId}).masterScreen}function showScreen(){if(!creativeInView||!mandatoryAssetsPreloaded||typeof screenId==='undefined'||typeof variantId==='undefined'){return}var celtraBanner=documentQuerySelector('.celtra-banner'),celtraScreen=documentQuerySelector('#celtra-screen-'+screenId);addClass(celtraBanner,'celtra-screen-'+screenId);addClass(celtraBanner,'variant-'+variantId);tracking.viewShown(variantId);tracking.screenShown(variantId,screenId);tracking.creativeRendered();preloadOptionalAssets();eventDispatch(celtraScreen,'pageAppear')}function hideScreen(){var celtraBanner=documentQuerySelector('.celtra-banner');if(variantId){removeClass(celtraBanner,'variant-'+variantId)}if(screenId){removeClass(celtraBanner,'celtra-screen-'+screenId)}if(variantId||screenId){eventDispatch(document,'pageHide')}variantId=null;screenId=null;masterScreen=null}function onViewableCore(e){removeEventListener(document,'viewableCore',onViewableCore);creativeInView=true;tracking.creativeViewable();showScreen()}function onViewabilityMeasurable(e){creativeMeasurable=!!e.detail.measurable;removeEventListener(document,'viewabilityMeasurable',onViewabilityMeasurable);if(mandatoryAssetsPreloaded){sdkAdapter.triggerLoadedEvent();tracking.creativeLoaded(creativeMeasurable)}if(creativeMeasurable){addEventListener(document,'viewableCore',onViewableCore)}else{creativeInView=true}}function onOptionalAssetsLoaded(){}function onOptionalAssetsLoadEvent(e){optionalAssetsLoadEvents[e.type]=true;for(var eventName in optionalAssetsLoadEvents){if(!optionalAssetsLoadEvents[eventName]){return}}onOptionalAssetsLoaded()}function preloadOptionalAssets(){optionalAssetsLoadEvents={'masterVideosLoaded':false,'videosLoaded':false};addEventListener(document,'masterVideosLoaded',onOptionalAssetsLoadEvent);addEventListener(document,'videosLoaded',onOptionalAssetsLoadEvent);preloadVideos('#variant-'+variantId,'#celtra-screen-'+masterScreen.localId,'masterVideosLoaded');preloadVideos('#variant-'+variantId,'#celtra-screen-'+screenId,'videosLoaded')}function onMandatoryAssetsLoaded(){mandatoryAssetsPreloaded=true;if(creativeMeasurable!==undefined){sdkAdapter.triggerLoadedEvent();tracking.creativeLoaded(creativeMeasurable)}showScreen()}function onMandatoryAssetsLoadEvent(e){mandatoryAssetsLoadEvents[e.type]=true;for(var eventName in mandatoryAssetsLoadEvents){if(!mandatoryAssetsLoadEvents[eventName]){return}}onMandatoryAssetsLoaded()}function preloadMandatoryAssets(){mandatoryAssetsLoadEvents={'masterImagesLoaded':false,'imagesLoaded':false};mandatoryAssetsPreloaded=false;addEventListener(document,'masterImagesLoaded',onMandatoryAssetsLoadEvent);addEventListener(document,'imagesLoaded',onMandatoryAssetsLoadEvent);preloadImages('#variant-'+variantId,'#celtra-screen-'+masterScreen.localId,'masterImagesLoaded');preloadImages('#variant-'+variantId,'#celtra-screen-'+screenId,'imagesLoaded')}function setVariantAndScreenId(selectedVariantId,selectedScreenId){if(variantId===selectedVariantId&&screenId===selectedScreenId){return}hideScreen();variantId=selectedVariantId;screenId=selectedScreenId;masterScreen=getMasterScreen();preloadMandatoryAssets()}function initAd(){if(adInited){return}unitVariantSelector.init();adInited=true}function setUpViewabilityAndSDKAdapter(){addEventListener(document,'viewabilityMeasurable',onViewabilityMeasurable);initViewability();sdkAdapter.init()}setUpViewabilityAndSDKAdapter();})(window);</script>

</body></html>