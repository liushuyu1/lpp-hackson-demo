require(["handlebars"],function(f){var h=f.template({1:function(d,a,e,f,g){var c,b;return'          \x3cdiv id\x3d"featured-destinations-'+d.escapeExpression((b=null!=(b=e.regionId||(null!=a?a.regionId:a))?b:e.helperMissing,"function"===typeof b?b.call(null!=a?a:{},{name:"regionId",hash:{},data:g}):b))+'" class\x3d"uitk-carousel-item uitk-col"\x3e\n            \x3cdiv class\x3d"flex-card flex-tile has-link"\x3e\n              \x3cdiv class\x3d"flex-figure"\x3e\n'+(null!=(c=e["with"].call(null!=a?a:{},null!=a?a.image:a,{name:"with",hash:{},fn:d.program(2,g,0),inverse:d.noop,data:g}))?c:"")+'              \x3c/div\x3e\n              \x3cdiv class\x3d"flex-content"\x3e\n                \x3cdiv class\x3d"flex-area-primary"\x3e\n                  \x3cdiv class\x3d"destination-details"\x3e\n                    \x3cdiv class\x3d"destination-details-wrapper"\x3e\n                      \x3ch1 class\x3d"destination-city-name"\x3e\n                        \x3cspan\x3e'+d.escapeExpression((b=null!=(b=e.cityName||(null!=a?a.cityName:a))?b:e.helperMissing,"function"===typeof b?b.call(null!=a?a:{},{name:"cityName",hash:{},data:g}):b))+'\x3c/span\x3e\n                      \x3c/h1\x3e\n                      \x3cp class\x3d"destination-affinities"\x3e\n'+(null!=(c=e.each.call(null!=a?a:{},null!=a?a.affinities:a,{name:"each",hash:{},fn:d.program(4,g,0),inverse:d.noop,data:g}))?c:"")+'                      \x3c/p\x3e\n                    \x3c/div\x3e\n                  \x3c/div\x3e\n                \x3c/div\x3e\n              \x3c/div\x3e\n              \x3ca class\x3d"flex-link" href\x3d"'+d.escapeExpression((b=null!=(b=e.url||(null!=a?a.url:a))?b:e.helperMissing,"function"===typeof b?b.call(null!=a?a:{},{name:"url",hash:{},data:g}):b))+'" target\x3d"_blank"\x3e\x3c/a\x3e\n            \x3c/div\x3e\n          \x3c/div\x3e\n'},2:function(d,a,e,f,g){var c;return'                  \x3cfigure\n                    class\x3d"image background aspect-ratio16-9"\n                    data-media-type\x3d"image"\n                    data-late\x3d"true"\n                    data-aspect-ratio\x3d"16-9"\n                    data-src\x3d"'+d.escapeExpression((c=null!=(c=e.url||(null!=a?a.url:a))?c:e.helperMissing,"function"===typeof c?c.call(null!=a?a:{},{name:"url",hash:{},data:g}):c))+'"\n                    data-alt\x3d"'+d.escapeExpression((c=null!=(c=e.alt||(null!=a?a.alt:a))?c:e.helperMissing,"function"===typeof c?c.call(null!=a?a:{},{name:"alt",hash:{},data:g}):c))+'"\n                    data-class\x3d"tile-media"\x3e\n                    \x3cfigcaption class\x3d"image-caption"\x3e'+d.escapeExpression((c=null!=(c=e.caption||(null!=a?a.caption:a))?c:e.helperMissing,"function"===typeof c?c.call(null!=a?a:{},{name:"caption",hash:{},data:g}):c))+'\x3c/figcaption\x3e\n                    \x3cspan class\x3d"media-loader"\x3e\n                      \x3cspan class\x3d"loader-primary loader-light loader-static loading" aria-hidden\x3d"true" title\x3d"Loading..."\x3e\x3c/span\x3e\n                    \x3c/span\x3e\n                  \x3c/figure\x3e\n'},4:function(d,a,e,f,g){var c;return'                          \x3cspan class\x3d"affinity"\x3e'+d.escapeExpression((c=null!=(c=e.displayedName||(null!=a?a.displayedName:a))?c:e.helperMissing,"function"===typeof c?c.call(null!=a?a:{},{name:"displayedName",hash:{},data:g}):c))+"\x3c/span\x3e\n"},compiler:[7,"\x3e\x3d 4.0.0"],main:function(d,a,e,f,g){var c,b;return'\x3cdiv id\x3d"featured-destinations-wrapper"\x3e\n  \x3cspan class\x3d"visuallyhidden" role\x3d"heading" aria-level\x3d"2"\x3e'+d.escapeExpression((b=null!=(b=e.title||(null!=a?a.title:a))?b:e.helperMissing,"function"===typeof b?b.call(null!=a?a:{},{name:"title",hash:{},data:g}):b))+'\x3c/span\x3e\n  \x3cheader class\x3d"cols-row-header section-header cf"\x3e\n    \x3ch3 id\x3d"featured-destinations-title" class\x3d"section-header-main"\x3e'+d.escapeExpression((b=null!=(b=e.title||(null!=a?a.title:a))?b:e.helperMissing,"function"===typeof b?b.call(null!=a?a:{},{name:"title",hash:{},data:g}):b))+'\x3c/h3\x3e\n  \x3c/header\x3e\n  \x3csection id\x3d"featured-destinations-carousel" class\x3d"uitk-carousel" data-control\x3d"uitk-carousel" data-peek\x3d"'+d.escapeExpression((b=null!=(b=e.isMobile||(null!=a?a.isMobile:a))?b:e.helperMissing,"function"===typeof b?b.call(null!=a?a:{},{name:"isMobile",hash:{},data:g}):b))+'"\x3e\n    \x3cdiv class\x3d"uitk-carousel-wrap"\x3e\n      \x3cdiv class\x3d"uitk-carousel-items uitk-grid all-grid-nowrap mobile-col-1-1 smalltablet-col-1-2 tablet-col-1-3 desktop-col-1-3 all-x-gutter-6"\x3e\n'+(null!=(c=e.each.call(null!=a?a:{},null!=a?a.destinations:a,{name:"each",hash:{},fn:d.program(1,g,0),inverse:d.noop,data:g}))?c:"")+"      \x3c/div\x3e\n    \x3c/div\x3e\n  \x3c/section\x3e\n\x3c/div\x3e\n"},useData:!0});f.templates=f.templates||{};f.templates.featuredDestinations=h;f.partials=f.partials||{};f.partials.featuredDestinations=h});define("featuredDestinations-loc",function(){return{featuredDestinationsTitle:"Popular Destinations for Travelers from {{origin}}"}});define("featuredDestinations-log",function(){return{log:function(f){f.hasOwnProperty("message")&&(window.dctk&&window.dctk.enabled&&window.dctk.logging&&window.dctk.logging.logError?window.dctk.logging.logMessage("sf-web:featured-destinations",f):require("dctk/clientLogging",function(h){h.logMessage("sf-web:featured-destinations",f)}))}}});define("featuredDestinations-order-variants",["featuredDestinations-filters","featuredDestinations"],function(f,h){return{1:function(d){return h.createDestinationsSet(f.byType(d,"DOMESTIC"),f.byType(d,"INTERNATIONAL"),6)},2:function(d){return h.createDestinationsSet(f.byType(d,"INTERNATIONAL"),f.byType(d,"DOMESTIC"),6)}}});define("featuredDestinations-filters",function(){return{byType:function(f,h){return f.filter(function(d){return d.relation.destinationType===h}).sort(function(d,a){return parseInt(a.relation.bookings,10)-parseInt(d.relation.bookings,10)})}}});
define("featuredDestinations","jquery handlebars sfAbTest featuredDestinations-loc featuredDestinations-log TravelContentService".split(" "),function(f,h,d,a,e,k){var g={config:{experimentId:25176,containerId:"#featured-destinations-container",containerCarouselId:"#featured-destinations-carousel"},evaluatePreconditions:function(a,b){var c=f.Deferred();if(b.hasOwnProperty("preferredAirport")&&b.preferredAirport.hasOwnProperty("airportGaiaMultiCityId")&&null!==b.preferredAirport.airportGaiaMultiCityId)d.get(a,!0).then(function(a){0<parseInt(a.value,10)?c.resolve(a):c.reject({type:"experiment",message:"experiment is on control"})});else if(b.hasOwnProperty("preferredAirport")&&b.preferredAirport.hasOwnProperty("origin")&&null===b.preferredAirport.airportGaiaMultiCityId){var g={type:"travelerProfile:airportGaiaMultiCityId",message:"preferredAirport airportGaiaMultiCityId is null for origin: "+b.preferredAirport.origin};e.log(g);c.reject(g)}else c.reject({type:"travelerProfile:preferredAirport",message:"preferredAirport is not present in travelerProfileModel"});return c.promise()},render:function(c,b,e){var d=b.lastIndexOf(",");f(g.config.containerId).html(h.partials.featuredDestinations({title:a.featuredDestinationsTitle.replace("{{origin}}",-1<d?b.substr(0,d):b),originCity:b,destinations:c,isMobile:e}));f(g.config.containerCarouselId).uitk_carousel()},buildModel:function(a){var b={regionId:a.geo.regionId,cityName:a.geo.name,url:"https://"+window.location.hostname+"/lp/destinations/"+a.geo.regionId+"?rfrr\x3dstf.populardest."+a.geo.regionId,affinities:a.tags.data.slice(0,3),image:a.images.data.filter(function(a){return a.hero})[0]||a.images.data[0]||{url:"https://thumbnails.expedia.com/LZGYBkK5ziN-cSYOlLte5nBw2_Q\x3d/640x360/images.trvl-media.com/media/content/expus/graphics/deals/TE_Clouds_card_r1.jpg",caption:"Default Image",type:"default"}};b.image.hasOwnProperty("type")&&"default"===b.image.type?e.log({type:"TCS:topDestinations",message:"no images found in the TCS topDestinations response for regionId: "+a.geo.regionId}):b.image.url=b.image.url.replace("res70","res20");return b},createDestinationsSet:function(a,b,e){var c=Math.floor(e/2),d=[];d=d.concat(a.length>=c?a.slice(0,b.length<c?c+(c-b.length):c):a);return d=d.concat(b.length>=c?b.slice(0,e-d.length):b)},init:function(a,b,d){k.getTopDestinationsFromRegionIdPromise({regionId:a.preferredAirport.airportGaiaMultiCityId,siteId:window.siteid,locale:window.locale}).done(function(c){g.render(b(c.topDestinations).map(function(a){return g.buildModel(a)}),void 0!==c.destination.geo.name?c.destination.geo.name:a.preferredAirport.airportCityState,d)}).fail(function(a){a.hasOwnProperty("type")&&e.log(a)})}};return g});require(["featuredDestinations","featuredDestinations-order-variants","featuredDestinations-log","travelerProfileModel"],function(f,h,d,a){try{f.evaluatePreconditions(f.config.experimentId,a).done(function(d){f.init(a,h[d.value],window.isMobile)}).fail(function(){})}catch(e){console.log(e),d.log(e)}});
//# sourceMappingURL=featuredDestinations-1-en_US.js.map