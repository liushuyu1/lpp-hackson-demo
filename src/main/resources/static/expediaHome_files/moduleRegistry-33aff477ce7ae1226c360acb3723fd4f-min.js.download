define("moduleRegistry",["moduleSwitches","moduleConfigs","uitk"],function(e,d){var a=a||{};a.loadModule=function(b,c,d,h){require("handlebars",function(){var c=!0;try{if(a.checkPages(e,h)){if("undefined"===typeof e||"undefined"===typeof e[b+"Enabled"])c=!1;var d=e[b+"Enabled"];"boolean"===typeof d&&d?a._load(b):"number"===typeof d&&a._checkAbacusAndLoad(d,b)}}catch(k){window.logError("sfError",k,{notes:"moduleRegistry/loadModule",module:b})}return c})};a._load=function(b){var c=d[b];"undefined"===typeof c&&(d[b]={},c=d[b]);if(!(c.mobileSuppress&&a.isMobile()||c.attached_js)){var e=a._getServerUrl(b);a.addScript(e);c.attached_js=!0;console.log("module loaded: "+b)}};a.isMobile=function(){var a=null!==navigator.userAgent.match(/iPad/i);return null!==navigator.userAgent.match(/Mobile|Android|BlackBerry/i)&&!a};a.addScript=function(a){var b=document.createElement("script");b.setAttribute("src",a);b.setAttribute("defer","");document.getElementsByTagName("body")[0].appendChild(b)};a._checkAbacusAndLoad=function(a,d){8691!==a&&9257!==a&&9706!==a&&9604!==a||require(["moduleRegistry","gc/abTest","gc/pageModel","dctk/dctk"],function(b,c,e,l){c=c.get(a);l.onReady(function(){l.logExperiment({id:a,guid:e.user.guid,tpid:1,eapid:0})});"object"===typeof c&&"number"===typeof c.value&&0<c.value&&b._load(d)})};a.checkPages=function(a,c){if("undefined"===typeof a||"undefined"===typeof a.pages)return!0;var b=a.pages;return"string"===typeof b?"all"===b:"object"===typeof b?-1<b.indexOf(c):!0};a._getServerUrl=function(a){return bundlePaths[a]};return a});require(["moduleRegistry","oip","jquery"],function(e,d,a){a(function(){console.groupCollapsed("modules loading..");e.loadModule("b2pAdBanner",window.siteid,window.locale);e.loadModule("gcHeaderMobileAppBanner",window.siteid,window.locale);e.loadModule("gcHeaderMobileAppStaticv1",window.siteid,window.locale);e.loadModule("storefrontTakeoverBanner",window.siteid,window.locale);e.loadModule("travelAlert",window.siteid,window.locale);e.loadModule("takeoverBanner",window.siteid,window.locale);e.loadModule("nextTrip",window.siteid,window.locale);e.loadModule("fareCalendarDatePicker",window.siteid,window.locale);e.loadModule("recentlyViewed",window.siteid,window.locale);e.loadModule("urgencyMsgBox",window.siteid,window.locale);e.loadModule("topReviewedProperties",window.siteid,window.locale);e.loadModule("topDeals",window.siteid,window.locale);e.loadModule("memberPricing",window.siteid,window.locale);e.loadModule("curationToolkit",window.siteid,window.locale);e.loadModule("couponBanner",window.siteid,window.locale);e.loadModule("cupidDestinations",window.siteid,window.locale);e.loadModule("dealsOptimization",window.siteid,window.locale);e.loadModule("featuredDestinations",window.siteid,window.locale);e.loadModule("shortlistPlayback",window.siteid,window.locale);e.loadModule("isAarpRTBandEmailForm",window.siteid,window.locale);e.loadModule("memberOnlyDeals",window.siteid,window.locale);e.loadModule("tacs",window.siteid,window.locale);e.loadModule("isRecentlySaved",window.siteid,window.locale);e.loadModule("isSemFlightMap",window.siteid,window.locale);console.groupEnd()})});define("SearchUrl",function(){var e=function(d,a,b){this.baseURL=d||"";this.div=a||"\x26";this.equ=b||"\x3d"};e.prototype=[];e.prototype.addParameter=function(d,a,b,c){if(a)this.push(d+this.equ+a);else if(b){a="";if(c||0===c)a=c;this.push(d+this.equ+a)}};e.prototype.toString=function(){return(this.baseURL+this.join(this.div)).replace("?"+this.div,"?").replace(this.div+"#"+this.div,"#")};e.prototype.beginQuery=function(){this.push("?")};e.prototype.beginHash=function(){this.push("#")};return e});var dependencies=["SearchUrl","env"];define("hotelSearchUrl",dependencies,function(e,d){return function(a){if(a.isHotelOnly&&a.isNinePlusRoomRequest){var b=a.ninePlusRoomUrl||"https://www.hotelplanner.com/Common/Services/Expedia/?";b+="ESite\x3d"+d.siteId;b+="\x26Loc\x3d"+d.locale;b+="\x26City\x3d"+encodeURIComponent(a.destination);if(a.startDate)if(uitk.utils.createLocalizedDate){var c=uitk.utils.createLocalizedDate(a.startDate,d.locale);if(c&&c.settings&&c.settings.date&&c.settings.date.format&&"Invalid Date"!=c.date){var f=c.settings.date.format["short"];c.settings.date.format["short"]="M/dd/yyyy";b+="\x26InDate\x3d"+c.shortDate();c.settings.date.format["short"]=f}}else b+="\x26InDate\x3d"+a.startDate;a.endDate&&(uitk.utils.createLocalizedDate?(a=uitk.utils.createLocalizedDate(a.endDate,d.locale))&&a.settings&&a.settings.date&&a.settings.date.format&&"Invalid Date"!=a.date&&(f=a.settings.date.format["short"],a.settings.date.format["short"]="M/dd/yyyy",b+="\x26OutDate\x3d"+a.shortDate(),a.settings.date.format["short"]=f):b+="\x26OutDate\x3d"+a.endDate);return b}f=new e("/Hotel-Search");f.beginQuery();a.isHashlessURLneeded||f.beginHash();a.latLong&&0>a.latLong.indexOf("undefined")&&a.trainOrMetroStationDestination?f.addParameter("destination",a.trainOrMetroStationDestination,!0):a.hotelId?f.addParameter("destination",a.city,!0):f.addParameter("destination",a.destination,!0);a.isDateless||(f.addParameter("startDate",a.startDate,!0),f.addParameter("endDate",a.endDate,!0));f.addParameter("group",a.group);"POI"==a.TASearchType?f.addParameter("latLong",a.latLong,!0):a.isHotelOnly&&"POSTALCODE"==a.TASearchType?f.addParameter("latLong",a.latLong,!0):4294967295>=parseInt(a.regionId)?f.addParameter("regionId",a.regionId,!0):f.addParameter("latLong",a.latLong,!0);b=[];c=[];for(var h=0;h<a.rooms.length;h++){var g=a.rooms[h];b[h]=g&&g.adults?g.adults:2;for(var l=g&&g.children?g.children.length:0,k=0;k<l;k++)c.push(h+1+"_"+g.children[k])}f.addParameter("adults",b.join(","));f.addParameter("children",c.join(","));a.hotelId&&f.addParameter("selected",a.hotelId);a.membersOnly&&f.addParameter("mctc",a.membersOnly);a.packageRates&&f.addParameter("packageRates",a.packageRates);return f.toString()}});define("flightSearchUrl",["SearchUrl"],function(e){return function(d){function a(a){var b=new e("",",",":");b.addParameter("from",a.origin,!0);b.addParameter("to",a.destination,!0);b.addParameter("departure",a.start+"TANYT",!0);return b.toString()}function b(a){if(a&&a.length){var b;var c=""+(a.length+"[");for(b=0;b<a.length;b++)c+=a[b].age||a[b],b!==a.length-1&&(c+=";");return c+"]"}}var c=new e("/Flights-Search");c.beginQuery();c.addParameter("trip",d.flighttype,!0,"roundtrip");c.addParameter("leg1",a({origin:d.originTLA||d.origin,destination:d.destinationTLA||d.destination,start:d.startDate}),!0);if(d.isRoundtrip)c.addParameter("leg2",a({origin:d.destinationTLA||d.destination,destination:d.originTLA||d.origin,start:d.endDate}),!0);else if(d.isMultiDest)for(var f=0;4>f&&d.multiDest.destination[f];f++)c.addParameter("leg"+(f+2),a({origin:d.multiDest.origin[f],destination:d.multiDest.destination[f],start:d.multiDest.startDate[f]}),!0);c.addParameter("passengers",function(a){var c=new e("",",",":");c.addParameter("children",b(a.ages),!0,0);c.addParameter("adults",a.adults,!0,0);c.addParameter("seniors","0",!0,0);c.addParameter("infantinlap",a.isChildInLap?"Y":"N",!0,"Y");return c.toString()}(d),!0,0);(function(a,b){var c=new e("",",",":");c.addParameter("cabinclass",a.cabinClass,!1);a.nonStop&&c.addParameter("maxhops","0",!0);a.noPenalty&&c.addParameter("nopenalty","Y",!0);c.addParameter("carrier",a.carrier,!1);b.addParameter("options",encodeURIComponent(c.toString()),!1)})(d,c);c.addParameter("mode","search");return c.toString()}});
define("packageSearchUrl",["SearchUrl"],function(e){return function(d,a){var b=new e("/flexibleshopping"),c;b.beginQuery();b.addParameter("packageType",a);b.addParameter("fromDate",d.startDate);b.addParameter("toDate",d.endDate);b.addParameter("ftla",d.origin);b.addParameter("ttla",d.destination);b.addParameter("isDirectFlight",d.isDirectFlight?"1":"0");b.addParameter("InfantInSeat",d.isChildInLap?"0":"1");b.addParameter("checkInDate",d.checkin);b.addParameter("checkOutDate",d.checkout);(c=d.cabinClassLegacy||d.cabinClass)&&b.addParameter("cabinClass",c[0]);if(d.rooms){var f=d.rooms.length;b.addParameter("numberOfRooms",f);for(c=0;c<f;c++){var h=c+1;var g=d.rooms[c]&&d.rooms[c].children?d.rooms[c].children.length:"0";b.addParameter("adultsPerRoom["+h+"]",d.rooms[c]&&d.rooms[c].adults&&0<=d.rooms[c].adults?d.rooms[c].adults:2,!0,"2");b.addParameter("childrenPerRoom["+h+"]",g,!0,"0");for(g=0;g<d.rooms[c].children.length;g++)b.addParameter("childAges["+h+"]["+(g+1)+"]",d.rooms[c].children[g],!0,"0")}}return b.toString()}});
define("dynamicDropdown",["gc/pageModel","sfSelectedLobs"],function(e,d){var a=a||{};a.init=function(b){uitk.subscribe("sfSelectedLobs.updated",a.lobChanged);$(".gcw-destination, .gcw-origin").mousedown(!0,$.proxy(a.showDropdown,this));$(".gcw-destination, .gcw-origin").on("keydown",$.proxy(a.showDropdown,this));$(".gcw-destination, .gcw-origin").on("keyup",$.proxy(a.showDropdown,this));b=d.getSelectedLob();a.render(b.searchType)};a.bodyClick=!1;a.el=$(".dropdown-con");a.actualInput=[];a.hotelDefaultValues={domestic:[{defaultValue:"東京",value:"東京"},{defaultValue:"大阪",value:"大阪"},{defaultValue:"京都",value:"京都"},{defaultValue:"沖縄",value:"沖縄"},{defaultValue:"札幌",value:"札幌"},{defaultValue:"福岡",value:"福岡"},{defaultValue:"名古屋",value:"名古屋"},{defaultValue:"横浜",value:"横浜"},{defaultValue:"成田",value:"成田"},{defaultValue:"神戸",value:"神戸"},{defaultValue:"広島",value:"広島"},{defaultValue:"仙台",value:"仙台"},{defaultValue:"舞浜",value:"舞浜"},{defaultValue:"長崎",value:"長崎"},{defaultValue:"奈良",value:"奈良"},{defaultValue:"函館",value:"函館"},{defaultValue:"箱根",value:"箱根"},{defaultValue:"高山",value:"高山"}],international:[{defaultValue:"ソウル",value:"ソウル"},{defaultValue:"ホノルル",value:"ホノルル"},{defaultValue:"台北",value:"台北"},{defaultValue:"バンコク",value:"バンコク"},{defaultValue:"シンガポール",value:"シンガポール"},{defaultValue:"パリ (およびその周辺地域), フランス",value:"パリ"},{defaultValue:"香港",value:"香港"},{defaultValue:"ニューヨーク",value:"ニューヨーク"},{defaultValue:"上海",value:"上海"},{defaultValue:"ロンドン",value:"ロンドン"},{defaultValue:"ロサンゼルス",value:"ロサンゼルス"},{defaultValue:"ラスベガス",value:"ラスベガス"},{defaultValue:"クアラルンプール",value:"クアラルンプール"},{defaultValue:"マニラ",value:"マニラ"},{defaultValue:"ホーチミン",value:"ホーチミン"},{defaultValue:"ローマ",value:"ローマ"},{defaultValue:"ミラノ (およびその周辺), イタリア",value:"ミラノ"},{defaultValue:"グアム島",value:"グアム島"}]};a.activityDefaultValues={domestic:[{defaultValue:"東京",value:"東京"},{defaultValue:"大阪",value:"大阪"},{defaultValue:"京都",value:"京都"},{defaultValue:"沖縄",value:"沖縄"},{defaultValue:"札幌",value:"札幌"},{defaultValue:"福岡",value:"福岡"},{defaultValue:"名古屋",value:"名古屋"},{defaultValue:"横浜",value:"横浜"},{defaultValue:"成田",value:"成田"},{defaultValue:"神戸",value:"神戸"},{defaultValue:"広島",value:"広島"},{defaultValue:"仙台",value:"仙台"},{defaultValue:"舞浜",value:"舞浜"},{defaultValue:"長崎",value:"長崎"},{defaultValue:"奈良",value:"奈良"},{defaultValue:"函館",value:"函館"},{defaultValue:"箱根",value:"箱根"},{defaultValue:"高山",value:"高山"}],international:[{defaultValue:"ソウル",value:"ソウル"},{defaultValue:"ホノルル",value:"ホノルル"},{defaultValue:"台北",value:"台北"},{defaultValue:"バンコク",value:"バンコク"},{defaultValue:"シンガポール",value:"シンガポール"},{defaultValue:"パリ (およびその周辺地域), フランス",value:"パリ"},{defaultValue:"香港",value:"香港"},{defaultValue:"ニューヨーク",value:"ニューヨーク"},{defaultValue:"上海",value:"上海"},{defaultValue:"ロンドン",value:"ロンドン"},{defaultValue:"ロサンゼルス",value:"ロサンゼルス"},{defaultValue:"ラスベガス",value:"ラスベガス"},{defaultValue:"クアラルンプール",value:"クアラルンプール"},{defaultValue:"マニラ",value:"マニラ"},{defaultValue:"ホーチミン",value:"ホーチミン"},{defaultValue:"ローマ",value:"ローマ"},{defaultValue:"ミラノ (およびその周辺), イタリア",value:"ミラノ"},{defaultValue:"グアム島",value:"グアム島"}]};a.flightDefaultValues={domestic:[{defaultValue:"東京",value:"東京"},{defaultValue:"大阪",value:"大阪"},{defaultValue:"京都",value:"京都"},{defaultValue:"札幌",value:"札幌"},{defaultValue:"福岡",value:"福岡"},{defaultValue:"沖縄",value:"沖縄"},{defaultValue:"高山",value:"高山"},{defaultValue:"仙台",value:"仙台"},{defaultValue:"成田",value:"成田"},{defaultValue:"横浜",value:"横浜"},{defaultValue:"名古屋",value:"名古屋"},{defaultValue:"神戸",value:"神戸"},{defaultValue:"奈良",value:"奈良"},{defaultValue:"舞浜",value:"舞浜"},{defaultValue:"広島",value:"広島"}],international:[{defaultValue:"ソウル",value:"ソウル"},{defaultValue:"バンコク",value:"バンコク"},{defaultValue:"ホノルル",value:"ホノルル"},{defaultValue:"台北",value:"台北"},{defaultValue:"シンガポール",value:"シンガポール"},{defaultValue:"上海",value:"上海"},{defaultValue:"香港",value:"香港"},{defaultValue:"グアム",value:"グアム"},{defaultValue:"バリ島",value:"バリ島"},{defaultValue:"ロサンゼルス",value:"ロサンゼルス"},{defaultValue:"パリ,フランス",value:"パリ"},{defaultValue:"マニラ",value:"マニラ"},{defaultValue:"セブ シティ",value:"セブ シティ"},{defaultValue:"プーケット",value:"プーケット"},{defaultValue:"ロンドン",value:"ロンドン"},{defaultValue:"ニューヨーク",value:"ニューヨーク"},{defaultValue:"ホーチミン",value:"ホーチミン"},{defaultValue:"ラスベガス",value:"ラスベガス"}]};a.packageDefaultValues={domestic:[{defaultValue:"東京",value:"東京"},{defaultValue:"大阪",value:"大阪"},{defaultValue:"京都",value:"京都"},{defaultValue:"札幌",value:"札幌"},{defaultValue:"福岡",value:"福岡"},{defaultValue:"沖縄",value:"沖縄"},{defaultValue:"高山",value:"高山"},{defaultValue:"仙台",value:"仙台"},{defaultValue:"成田",value:"成田"},{defaultValue:"横浜",value:"横浜"},{defaultValue:"名古屋",value:"名古屋"},{defaultValue:"神戸",value:"神戸"},{defaultValue:"奈良",value:"奈良"},{defaultValue:"舞浜",value:"舞浜"},{defaultValue:"広島",value:"広島"}],international:[{defaultValue:"オアフ島",value:"オアフ島"},{defaultValue:"バンコク",value:"バンコク"},{defaultValue:"ソウル",value:"ソウル"},{defaultValue:"台北",value:"台北"},{defaultValue:"グアム",value:"グアム"},{defaultValue:"シンガポール",value:"シンガポール"},{defaultValue:"プーケット",value:"プーケット"},{defaultValue:"セブ シティ",value:"セブ シティ"},{defaultValue:"バリ島",value:"バリ島"},{defaultValue:"ラスベガス",value:"ラスベガス"},{defaultValue:"ニューヨーク ",value:"ニューヨーク"},{defaultValue:"パリ,フランス",value:"パリ"},{defaultValue:"香港",value:"香港"},{defaultValue:"上海",value:"上海"},{defaultValue:"マニラ",value:"マニラ"},{defaultValue:"ホーチミン",value:"ホーチミン"},{defaultValue:"ロンドン",value:"ロンドン"},{defaultValue:"クアラルンプール",value:"クアラルンプール"}]};a.render=function(b){var c=0;switch(b){case "hotel":a.el.attr("id","h-m-dropdown-con-ori").addClass("h-dropdown-con");break;case "activity":a.el.attr("id","a-dropdown-con-ori").addClass("h-dropdown-con");break;case "flight":a.el.attr("id","dropdown-con-ori").removeClass("h-dropdown-con");break;case "package":a.el.attr("id","fh-dropdown-con-ori").removeClass("h-dropdown-con")}a.el.find(".domestic-ul").empty();a.el.find(".international-ul").empty();for(c;c<a[b+"DefaultValues"].domestic.length;c++)a.el.find(".domestic-ul").append('\x3cli class\x3d"domestic-destinations"\x3e\x3ca data-default-value\x3d"'+a[b+"DefaultValues"].domestic[c].defaultValue+'" href\x3d"javascript:void(0);"\x3e'+a[b+"DefaultValues"].domestic[c].value+"\x3c/a\x3e\x3c/li\x3e");c=0;for(c;c<a[b+"DefaultValues"].international.length;c++)a.el.find(".international-ul").append('\x3cli class\x3d"international-destinations"\x3e\x3ca data-default-value\x3d"'+a[b+"DefaultValues"].international[c].defaultValue+'" href\x3d"javascript:void(0);"\x3e'+a[b+"DefaultValues"].international[c].value+"\x3c/a\x3e\x3c/li\x3e");a.el.find("h2").html("").html("都市名を入力するか下記のリストから選んでください");a.el.find(".domestic-tab").html("").html("人気の国内都市");a.el.find(".international-tab").html("").html("人気の海外都市")};a.lobChanged=function(b,c){a.render(c.searchType)};a.showDropdown=function(b){b.stopPropagation();var c=$(b.currentTarget);parseInt(c.css("height").replace(/\D+/g,""));b=c.offset();var d={};0===c.val().length?(c.hasClass("gcw-origin")||c.hasClass("default-domestic-tab")?a.showDomesticTab():a.showInternationalTab(),d.display="block",d.position="absolute",b.top+=c.outerHeight(),a.actualInput=c,a.el.css(d).offset(b),a.bodyClick||($(document).bind("mousedown",$.proxy(a.closeDropdownOut,this)),a.bodyClick=!0),setTimeout(function(){require(["typeahead/core/message/SuggestionShownMessage"],function(a){a=new a.SuggestionShownMessage([],c.val(),"",c.data("lob"),0,c.prop("id"));uitk.publish(a.getTopic(),a)})},0)):a.hideDropdown()};a.hideDropdown=function(){a.el.css("display","none");a.actualInput=[];a.bodyClick&&($(document).unbind("mousedown",$.proxy(a.closeDropdownOut,this)),a.bodyClick=!1)};a.el.on("click",".close-con",function(b){a.hideDropdown()});a.el.on("click",".dropdown-tab",function(b){b.stopPropagation();b=$(b.currentTarget);if(b.hasClass("selected"))return!1;0>b.attr("class").indexOf("international")?a.showDomesticTab():a.showInternationalTab()});a.showInternationalTab=function(){a.el.find(".domestic-tab").removeClass("selected");a.el.find(".international-tab").addClass("selected");a.el.find(".domestic-container").css("display","none");a.el.find(".international-container").css("display",
"block")};a.showDomesticTab=function(){a.el.find(".domestic-tab").addClass("selected");a.el.find(".international-tab").removeClass("selected");a.el.find(".domestic-container").css("display","block");a.el.find(".international-container").css("display","none")};a.el.on("click",".domestic-destinations, .international-destinations",function(b){var c=$(b.currentTarget),d=a.actualInput;a.setValueOnInput($(b.currentTarget));require(["typeahead/core/DynamicDropdownSuggestion","typeahead/core/message/SuggestionSelectedMessage"],function(a,e){var f=new e.SuggestionSelectedMessage(new a.DynamicDropdownSuggestion(c.textContent),b,d.data("lob"),d.prop("id"));uitk.publish(f.getTopic(),f)})});a.setValueOnInput=function(b){b=b.children("a").data("default-value");a.actualInput.val("");a.actualInput.val(b);a.actualInput.trigger("change");a.hideDropdown()};a.closeDropdownOut=function(b){var c=a.el;c===$(b.target)||c.has($(b.target)).length||a.hideDropdown()};return a});define("tripPlanning",[],function(e){var d=d||{};d.init=function(a){Window.mediaLargeTablet=window.matchMedia("(max-width: 960px) and (min-width:726px)");Window.mediaSmallTablet=window.matchMedia("(max-width: 726px)");controlCardsVisibility(a);Window.mediaLargeTablet.addEventListener("change",function(){controlCardsVisibility(a)});Window.mediaSmallTablet.addEventListener("change",function(){controlCardsVisibility(a)})};return d});function controlCardsVisibility(e){var d;for(d=e-1;0<=d;d--)document.getElementById("trip-planning-card-"+d).style.display="block";document.getElementById("trip-planning-view-more-button").style.display="none";if(Window.mediaLargeTablet.matches)for(d=e-1;4<=d;d--)document.getElementById("trip-planning-card-"+d).style.display="none";else for(d=e-1;3<=d;d--)document.getElementById("trip-planning-card-"+d).style.display="none";document.getElementById("trip-planning-view-more-button").style.display="block"}function showMoreCards(e){var d=0;var a=Window.mediaLargeTablet.matches?e-4:Window.mediaSmallTablet.matches?3:e-3;var b=0;for(b;b<=e-1&&d<a;b++)"none"===document.getElementById("trip-planning-card-"+b).style.display&&(document.getElementById("trip-planning-card-"+b).style.display="block",d+=1),b===e-1&&(document.getElementById("trip-planning-view-more-button").style.display="none")}function dctkTrackClick(e){require("dctk/dctk",function(d){d.onReady(function(){d.trackEvent({name:"trip planning city click",rfrr:e})})})};
//# sourceMappingURL=moduleRegistry.js.map