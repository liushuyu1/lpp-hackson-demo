//tealium universal tag - utag.3143 ut4.0.201903280435, Copyright 2019 Tealium.com Inc. All Rights Reserved.
try{(function(id,loader){var u={"id":id};utag.o[loader].sender[id]=u;if(utag.ut===undefined){utag.ut={};}
var match=/ut\d\.(\d*)\..*/.exec(utag.cfg.v);if(utag.ut.loader===undefined||!match||parseInt(match[1])<41){u.loader=function(o,a,b,c,l,m){utag.DB(o);a=document;if(o.type=="iframe"){m=a.getElementById(o.id);if(m&&m.tagName=="IFRAME"){b=m;}else{b=a.createElement("iframe");}o.attrs=o.attrs||{};utag.ut.merge(o.attrs,{"height":"1","width":"1","style":"display:none"},0);}else if(o.type=="img"){utag.DB("Attach img: "+o.src);b=new Image();}else{b=a.createElement("script");b.language="javascript";b.type="text/javascript";b.async=1;b.charset="utf-8";}if(o.id){b.id=o.id;}for(l in utag.loader.GV(o.attrs)){b.setAttribute(l,o.attrs[l]);}b.setAttribute("src",o.src);if(typeof o.cb=="function"){if(b.addEventListener){b.addEventListener("load",function(){o.cb();},false);}else{b.onreadystatechange=function(){if(this.readyState=="complete"||this.readyState=="loaded"){this.onreadystatechange=null;o.cb();}};}}if(o.type!="img"&&!m){l=o.loc||"head";c=a.getElementsByTagName(l)[0];if(c){utag.DB("Attach to "+l+": "+o.src);if(l=="script"){c.parentNode.insertBefore(b,c);}else{c.appendChild(b);}}}};}else{u.loader=utag.ut.loader;}
if(utag.ut.typeOf===undefined){u.typeOf=function(e){return({}).toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase();};}else{u.typeOf=utag.ut.typeOf;}
u.ev={"view":1,"link":1};u.hasgtagjs=function(){window.gtagRename=window.gtagRename||""||"gtag";if(utag.ut.gtagScriptRequested){return true;}
var i,s=document.getElementsByTagName("script");for(i=0;i<s.length;i++){if(s[i].src&&s[i].src.indexOf("gtag/js")>=0){return true;}}
window.dataLayer=window.dataLayer||[];if(typeof window[window.gtagRename]!=="function"){window[window.gtagRename]=function(){dataLayer.push(arguments);};window[window.gtagRename]("js",new Date());}
return false;};u.scriptrequested=u.hasgtagjs();u.o=window[window.gtagRename];u.map_func=function(arr,obj,item){var i=arr.shift();obj[i]=obj[i]||{};if(arr.length>0){u.map_func(arr,obj[i],item);}else{obj[i]=item;}};u.hasOwn=function(o,a){return o!=null&&Object.prototype.hasOwnProperty.call(o,a);};u.isEmptyObject=function(o,a){for(a in o){if(u.hasOwn(o,a)){return false;}}return true;};u.map={"dcfl_advertiser_id":"advertiser_id","dcfl_activity_group":"activity_group","dcfl_activity":"activity","dcfl_counting_method":"counting_method","dcfl_event:conversion":"conversion","checkout.cartTotal.amount":"custom.u15,order_total","guid":"dc_custom_params.u","lob.domain":"custom.u1","dest":"custom.u2","numberOfRooms":"custom.u6","u7":"custom.u7","hotelName":"custom.u9","starRating":"custom.u11","hotelId":"custom.u13","currencyCode":"custom.u16","lengthOfStay":"custom.u5","pickUpandDropOffDate":"custom.u4","checkout.trl":"custom.u19","offeredAmenities":"custom.u12","random":"order_id","tuid":"custom.u25","rlt_channel_subchannel":"custom.u22","lt_channel_subchannel":"custom.u23","context.user.expUserProfileId":"custom.u24","carrierCodes":"custom.u10","carVendor":"custom.u10","cabinClass":"custom.u11","carrierCodeandFlightNumber":"custom.u18","packageType":"custom.u20","flightTripType":"custom.u20","entity.checkout.hotel.roomRatePerNight":"custom.u14","entity.checkout.hotel.bedTypeName":"custom.u17","destinationAirportCode":"custom.u2","originAirportCode":"custom.u3","checkout.cartTotal.amount.array":"cost","pricePerDay":"custom.u14","quantityField":"product_quantity"};u.extend=[function(a,b){try{if(1){if(b.siteId&&isConfirmationPage()&&b['checkout.trl']!=undefined){switch(b.siteId){case 1:b['dcfl_advertiser_id']="DC-2588783";b['dcfl_activity_group']="nauss258";b['dcfl_activity']="nausc757";break;case 3:b['dcfl_advertiser_id']="DC-2588791";b['dcfl_activity_group']="emeau044";b['dcfl_activity']="emeau681";break;case 4:b['dcfl_advertiser_id']="DC-2588785";b['dcfl_activity_group']="nacan473";b['dcfl_activity']="nacan696";break;case 6:b['dcfl_advertiser_id']="DC-2589196";b['dcfl_activity_group']="emeag212";b['dcfl_activity']="emeag697";break;case 8:b['dcfl_advertiser_id']="DC-2589197";b['dcfl_activity_group']="emeai531";b['dcfl_activity']="emeai032";break;case 9:b['dcfl_advertiser_id']="DC-2589198";b['dcfl_activity_group']="emeas272";b['dcfl_activity']="emeas696";break;case 11:b['dcfl_advertiser_id']="DC-2589205";b['dcfl_activity_group']="emean230";b['dcfl_activity']="emean400";break;case 12:b['dcfl_advertiser_id']="DC-2589193";b['dcfl_activity_group']="namex389";b['dcfl_activity']="namex048";break;case 14:b['dcfl_advertiser_id']="DC-2945316";b['dcfl_activity_group']="apacs715";b['dcfl_activity']="apacs875";break;case 15:b['dcfl_advertiser_id']="DC-2997500";b['dcfl_activity_group']="apacm785";b['dcfl_activity']="apacm192";break;case 16:b['dcfl_advertiser_id']="DC-2997587";b['dcfl_activity_group']="apack834";b['dcfl_activity']="apack947";break;case 17:b['dcfl_advertiser_id']="DC-2997550";b['dcfl_activity_group']="apact585";b['dcfl_activity']="apact123";break;case 18:b['dcfl_advertiser_id']="DC-3012675";b['dcfl_activity_group']="apach469";b['dcfl_activity']="apach276";break;case 20:b['dcfl_advertiser_id']="DC-2589195";b['dcfl_activity_group']="emeaf063";b['dcfl_activity']="emeaf289";break;case 25:b['dcfl_advertiser_id']="DC-2589206";b['dcfl_activity_group']="apaca891";b['dcfl_activity']="apaca689";break;case 27:b['dcfl_advertiser_id']="DC-2589208";b['dcfl_activity_group']="apaci776";b['dcfl_activity']="apaci425";break;case 28:b['dcfl_advertiser_id']="DC-2589209";b['dcfl_activity_group']="apacj310";b['dcfl_activity']="apacj181";break;case 29:b['dcfl_advertiser_id']="DC-2589207";b['dcfl_activity_group']="apacn447";b['dcfl_activity']="apacn688";break;case 61:b['dcfl_advertiser_id']="DC-3193419";b['dcfl_activity_group']="apaci003";b['dcfl_activity']="apaci316";break;case 62:b['dcfl_advertiser_id']="DC-2997604";b['dcfl_activity_group']="apact079";b['dcfl_activity']="apact191";break;case 63:b['dcfl_advertiser_id']="DC-2589199";b['dcfl_activity_group']="emeai233";b['dcfl_activity']="emeai843";break;case 64:b['dcfl_advertiser_id']="DC-2589204";b['dcfl_activity_group']="emeab946";b['dcfl_activity']="emeab310";break;case 65:b['dcfl_advertiser_id']="DC-2589201";b['dcfl_activity_group']="emeas307";b['dcfl_activity']="emeas294";break;case 66:b['dcfl_advertiser_id']="DC-2589200";b['dcfl_activity_group']="emean246";b['dcfl_activity']="emean535";break;case 67:b['dcfl_advertiser_id']="DC-2589202";b['dcfl_activity_group']="emead717";b['dcfl_activity']="emead267";break;case 68:b['dcfl_advertiser_id']="DC-2997741";b['dcfl_activity_group']="apacp942";b['dcfl_activity']="apacp291";break;case 69:b['dcfl_advertiser_id']="DC-3224677";b['dcfl_activity_group']="latam672";b['dcfl_activity']="latam387";break;case 70:b['dcfl_advertiser_id']="DC-3291249";b['dcfl_activity_group']="latam477";b['dcfl_activity']="latam583";break;case 71:b['dcfl_advertiser_id']="DC-3291279";b['dcfl_activity_group']="apacv752";b['dcfl_activity']="apacv908";break;case 72:b['dcfl_advertiser_id']="DC-3847545";b['dcfl_activity_group']="emeac116";b['dcfl_activity']="emeac358";break;case 73:b['dcfl_advertiser_id']="DC-3847494";b['dcfl_activity_group']="emeaf077";b['dcfl_activity']="emeaf275";break;case 74:b['dcfl_advertiser_id']="DC-2588791";b['dcfl_activity_group']="emeau044";b['dcfl_activity']="emeau681";break;case 75:b['dcfl_advertiser_id']="DC-3847494";b['dcfl_activity_group']="emeaf270";b['dcfl_activity']="emeaf786";break;case 1146:b['dcfl_advertiser_id']="DC-3645995";b['dcfl_activity']="nausa335";b['dcfl_activity_group']="nausa852";break;case 80001:b['dcfl_advertiser_id']="DC-5439637";b['dcfl_activity']="natra0";b['dcfl_activity_group']="natra0";break;case 80004:b['dcfl_advertiser_id']="DC-4259444";b['dcfl_activity']="Canad-";b['dcfl_activity_group']="Canad-";break;case 70201:b['dcfl_advertiser_id']="DC-5179340";b['dcfl_activity_group']="nauso0";b['dcfl_activity']="orb00";break;case 70301:b['dcfl_advertiser_id']="DC-5192003";b['dcfl_activity_group']="nausc00";b['dcfl_activity']="ctix00";break;case 70125:b['dcfl_advertiser_id']="DC-4598511";b['dcfl_activity_group']="sales0";b['dcfl_activity']="apaca0";break;case 70129:b['dcfl_advertiser_id']="DC-4600929";b['dcfl_activity_group']="apacn0";b['dcfl_activity']="apacn0";break;case 70150:b['dcfl_advertiser_id']="DC-4693435";b['dcfl_activity_group']="apaca0";b['dcfl_activity']="apaca0";break;case 70151:b['dcfl_advertiser_id']="DC-4692458";b['dcfl_activity_group']="apacn0";b['dcfl_activity']="apacn0";break;case 70472:b['dcfl_advertiser_id']="DC-5469129";b['dcfl_activity_group']="emeac0";b['dcfl_activity']="emeac0";break;case 70420:b['dcfl_advertiser_id']="DC-5472721";b['dcfl_activity_group']="emeaf0";b['dcfl_activity']="emeaf0";break;case 70463:b['dcfl_advertiser_id']="DC-5488524";b['dcfl_activity_group']="emeai0";b['dcfl_activity']="emeai0";break;case 70403:b['dcfl_advertiser_id']="DC-5472717";b['dcfl_activity_group']="emeau0";b['dcfl_activity']="emeau0";break;case 70406:b['dcfl_advertiser_id']="DC-5484924";b['dcfl_activity_group']="emead0";b['dcfl_activity']="emead0";break;case 70473:b['dcfl_advertiser_id']="DC-5470592";b['dcfl_activity_group']="emeaf0";b['dcfl_activity']="emeaf0";break;case 70465:b['dcfl_advertiser_id']="DC-5522838";b['dcfl_activity_group']="emeas0";b['dcfl_activity']="emeas0";break;case 10122006:b['dcfl_advertiser_id']="DC-2589203";b['dcfl_activity_group']="emeaa452";b['dcfl_activity']="emeaa375";break;default:break;}
b['dcfl_counting_method']="transactions";b['dc_order_id']=b['random'];b['dcfl_event']="conversion";}
if(b.siteId&&(utag.isPCO()||utag.isMCO()||utag.isFCO()||utag.isHCO())&&b['checkout.trl']!=undefined){switch(b.siteId){case 2004:b['dcfl_advertiser_id']="DC-3901108";b['dcfl_activity_group']="airas177";b['dcfl_activity']="airas0";break;case 2001:b['dcfl_advertiser_id']="DC-3899597";b['dcfl_activity_group']="airas264";b['dcfl_activity']="AirAs0";break;case 1257:b['dcfl_advertiser_id']="DC-3899565";b['dcfl_activity_group']="airas357";b['dcfl_activity']="AirAs0";break;case 1256:b['dcfl_advertiser_id']="DC-3899600";b['dcfl_activity_group']="airas317";b['dcfl_activity']="AirAs0";break;case 1255:b['dcfl_advertiser_id']="DC-3899497";b['dcfl_activity_group']="airas842";b['dcfl_activity']="AirAs0";break;case 2002:b['dcfl_advertiser_id']="DC-3899621";b['dcfl_activity_group']="airas167";b['dcfl_activity']="AirAs0";break;case 2000:b['dcfl_advertiser_id']="DC-3899617";b['dcfl_activity_group']="airas437";b['dcfl_activity']="AirAs0";break;case 1255:b['dcfl_advertiser_id']="DC-3899497";b['dcfl_activity_group']="airas842";b['dcfl_activity']="AirAs0";break;}
b['dcfl_counting_method']="transactions";b['dc_order_id']=b['random'];b['dcfl_event']="conversion";}
if(b.siteId&&utag.isHCO()&&b['checkout.trl']!=undefined){switch(b.siteId){case 60:b['dcfl_advertiser_id']="DC-2588783";b['dcfl_activity_group']="nauss258";b['dcfl_activity']="nausc757";break;case 30007712:b['dcfl_advertiser_id']="DC-2589204";b['dcfl_activity_group']="emeab946";b['dcfl_activity']="emeab310";break;case 30009314:b['dcfl_advertiser_id']="DC-2589047";b['dcfl_activity_group']="emeas663";b['dcfl_activity']="emeas340";break;case 30035327:b['dcfl_advertiser_id']="DC-2589200";b['dcfl_activity_group']="emean246";b['dcfl_activity']="emean535";break;case 30036392:b['dcfl_advertiser_id']="DC-2589202";b['dcfl_activity_group']="emead717";b['dcfl_activity']="emead267";break;case 1170:b['dcfl_advertiser_id']="DC-2588783";b['dcfl_activity_group']="nauss258";b['dcfl_activity']="nausc757";break;case 90011:b['dcfl_advertiser_id']="DC-2589205";b['dcfl_activity_group']="emean230";b['dcfl_activity']="emeas340";break;default:break;}
b['dcfl_counting_method']="transactions";b['dc_order_id']=b['random'];b['dcfl_event']="conversion";}
if(b.siteId&&(utag.isPCO()||utag.isMCO()||utag.isFCO())&&b['checkout.trl']!=undefined){switch(b.siteId){case 30031:b['dcfl_advertiser_id']="DC-2588783";b['dcfl_activity_group']="nauss258";b['dcfl_activity']="nausg811";break;case 1170:b['dcfl_advertiser_id']="DC-3645995";b['dcfl_activity_group']="nausa852";b['dcfl_activity']="nausa335";break;default:break;}
b['dcfl_counting_method']="transactions";b['dc_order_id']=b['random'];b['dcfl_event']="conversion";}
function isConfirmationPage(){return(utag.isLXCO()||utag.isCarCO()||utag.isHCO()||utag.isFCO()||utag.isPCO()||utag.isMCO()||isCruise());}
function isCruise(){if(utag.isCruiseCO()&&(b['siteId']==1||b['siteId']==4||b['siteId']==25)){return true;}
return false;}}}catch(e){utag.DB(e)}}];u.send=function(a,b){if(u.ev[a]||u.ev.all!==undefined){utag.DB("send:3143");utag.DB(b);var d,e,f,h,i,j,_event,p,key;u.data={"qsp_delim":"&","kvp_delim":"=","base_url":"https://www.googletagmanager.com/gtag/js","advertiser_id":"","activity_group":"","activity":"","counting_method":"","custom_scripts":"true","session_id":"","product_quantity":[],"dc_custom_params":{},"event_name":"","event":[],"custom":{}};for(c=0;c<u.extend.length;c++){try{d=u.extend[c](a,b);if(d==false)return}catch(e){}};utag.DB("send:3143:EXTENSIONS");utag.DB(b);for(d in utag.loader.GV(u.map)){if(b[d]!==undefined&&b[d]!==""){e=u.map[d].split(",");for(f=0;f<e.length;f++){u.map_func(e[f].split("."),u.data,b[d]);}}else{h=d.split(":");if(h.length===2&&b[h[0]]===h[1]){if(u.map[d]){u.data.event=u.data.event.concat(u.map[d].split(","));}}}}
utag.DB("send:3143:MAPPINGS");utag.DB(u.data);u.data.order_id=u.data.order_id||b._corder||"";u.data.order_total=u.data.order_total||b._ctotal||"";if(u.data.product_quantity.length===0&&b._cquan!==undefined){u.data.product_quantity=b._cquan.slice(0);}
if(typeof(u.data.advertiser_id)==="string"){u.data.advertiser_id=u.data.advertiser_id.split(",");}
if(typeof(u.data.activity_group)==="string"){u.data.activity_group=u.data.activity_group.split(",");}
if(typeof(u.data.activity)==="string"){u.data.activity=u.data.activity.split(",");}
if(typeof(u.data.counting_method)==="string"){u.data.counting_method=u.data.counting_method.split(",");}
if(typeof(u.data.session_id)==="string"){u.data.session_id=u.data.session_id.split(",");}
if(!u.data.advertiser_id){utag.DB(u.id+": Tag not fired: Required attribute not populated");return;}
u.data.base_url+="?id="+(u.data.advertiser_id[0]);for(i=0;i<u.data.advertiser_id.length;i++){u.o("config",u.data.advertiser_id[i]);}
if(u.data.order_id){for(i=0;i<u.data.event.length;i++){if(u.data.event[i]==="purchase"){p=true;}}
if(!p){u.data.event.push("purchase");}}
var total_qty=1;if(typeof(u.data.product_quantity)==="number"){total_qty=u.data.product_quantity;}else if(u.data.product_quantity.length===1){total_qty=u.data.product_quantity[0];}else if(u.data.product_quantity.length>1){for(i=0;i<u.data.product_quantity.length;i++){total_qty+=parseInt(u.data.product_quantity[i],10);}}
for(i=0;i<u.data.event.length;i++){_event=u.data.event[i];for(j=0;j<u.data.advertiser_id.length;j++){var eventIdData={};if(u.data.custom_scripts==="true"||u.data.custom_scripts){eventIdData.allow_custom_scripts=true;}else if(u.data.custom_scripts==="false"||!u.data.custom_scripts){eventIdData.allow_custom_scripts=false;}
if(u.data.session_id.length===1&&u.data.session_id[0]!==""){eventIdData.session_id=u.data.session_id[0];}else if(u.data.session_id[j]!==""){eventIdData.session_id=u.data.session_id[j];}
if(u.data.order_total){eventIdData.value=u.data.order_total;eventIdData.transaction_id=u.data.order_id;}
if(u.data.product_quantity){eventIdData.quantity=total_qty;}
for(key in u.data.custom){eventIdData[key]=u.data.custom[key];}
if(!u.isEmptyObject(u.data.dc_custom_params)){eventIdData.dc_custom_params={};for(key in u.data.dc_custom_params){eventIdData.dc_custom_params[key]=u.data.dc_custom_params[key];}}
eventIdData.send_to=u.data.advertiser_id[j]+"/"+u.data.activity_group[j]+"/"+u.data.activity[j]+"+"+u.data.counting_method[j];if(_event==="conversion"){u.o("event","conversion",eventIdData);}}}
if(!u.hasgtagjs()){u.scriptrequested=true;utag.ut.gtagScriptRequested=true;u.loader({"type":"script","src":u.data.base_url,"cb":null,"loc":"script","id":"utag_3143","attrs":{}});}
utag.DB("send:3143:COMPLETE");}
if(u.data.advertiser_id!=''){omg.pixel.fireTagPixel({id:id,name:'doubleclick_floodlight_Confirmation',label:'DoubleclickFloodlightConfirmation',context:{u:u,b:b}});}};utag.o[loader].loader.LOAD(id);}("3143","expedia.main"));}catch(error){utag.DB(error);}
