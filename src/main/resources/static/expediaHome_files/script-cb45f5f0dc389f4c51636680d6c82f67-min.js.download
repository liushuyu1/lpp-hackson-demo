require("gcw-custom-typeahead.hbs");define("gcwControllers","GcwActivitiesControllers GcwCarsControllers GcwCruisesControllers GcwFlightsControllers GcwHotelsControllers GcwPackagesControllers GcwRailsControllers GcwThreeppControllers".split(" "),function(g,f,e,b,a,d,c,h){return{activities:function(c,a,d,h){c=new g(c,a,d,h);c.init();return c},cars:function(c,a,d,h){c=new f(c,a,d,h);c.init();return c},cruises:function(c,a,d,h){c=new e(c,a,d,h);c.init();return c},flights:function(c,a,d,h){c=new b(c,a,d,h);c.init();return c},hotels:function(c,d,h,b){c=new a(c,d,h,b);c.init();return c},packages:function(c,a,h,b){c=new d(c,a,h,b);c.init();return c},rails:function(a,d,h,b){a=new c(a,d,h,b);a.init();return a},threepp:function(c,a,d,b){c=new h(c,a,d,b);c.init();return c}}});define("GcwActivitiesControllers",["classCheck","uitk","jquery","GcwUtilsControllers"],function(g,f,e,b){function a(c,h,n,b){g(this,a);d=this;d.$form=c;d.idSuffix=h;d.storedData=n;d.fieldsCollection=b}var d;a.prototype.init=function(){d.registerEvents();d.$form.data("gcw-original-action",d.$form.attr("action"));window.lx||(window.lx={})};a.prototype.registerEvents=function(){d.$form.on("change","[name\x3dgtDirection]",function(c){b.setHotel(d.idSuffix);b.swapGtSchedule(d.idSuffix,c.currentTarget.value)});f.subscribe("typeahead.opened",function(c,a){window.lx&&!window.lx.cache&&(window.lx.cache={});if(document.activeElement.id==="hotel-origin"+d.idSuffix||document.activeElement.id==="hotel"+d.idSuffix)window.lx.cache.hotelSuggestionsMap={},e.each(a.results,function(c){c=this.regionNames.fullName;c=e("\x3cinput /\x3e").html(c).text();var a={};a.hotelId=this.hotelId;a.lat=this.coordinates.lat;a["long"]=this.coordinates["long"];window.lx.cache.hotelSuggestionsMap[c]=a});else if(document.activeElement.id==="flight-origin"+d.idSuffix||document.activeElement.id==="flight"+d.idSuffix)window.lx.cache.airportSuggestionsMap={},e.each(a.results,function(c){c=this.hierarchyInfo.airport.airportCode;var a={};a.regionId=this.hierarchyInfo.airport.multicity;a.lat=this.coordinates.lat;a["long"]=this.coordinates["long"];a.airportFullName=this.regionNames.fullName;window.lx.cache.airportSuggestionsMap[c]=a})});f.subscribe("typeahead.resultSelected",function(c,a){var h=d.idSuffix,q;document.activeElement.id==="flight-origin"+h?q="#hotel":document.activeElement.id==="flight"+h&&(q="#hotel-origin");q=d.$form.find(q+h);b.changeRegionIdOnAirportSelectionFromTASuggestion(h,a,q)});d.$form.on("focus","#hotel-origin"+d.idSuffix,function(){var c=d.$form.find("#hotel-origin"+d.idSuffix),a=d.$form.find("#flight"+d.idSuffix);b.emptyEssLastSearchCacheForGTHotelFieldOnFocus(d.idSuffix,c,a)});d.$form.on("focus","#hotel"+d.idSuffix,function(){var c=d.$form.find("#hotel"+d.idSuffix),a=d.$form.find("#flight-origin"+d.idSuffix);b.emptyEssLastSearchCacheForGTHotelFieldOnFocus(d.idSuffix,c,a)})};return a});
define("GcwCarsControllers","classCheck uitk jquery GcwUtilsControllers xdate GcwUtilsProcessingFunctions".split(" "),function(g,f,e,b,a,d){function c(a,d,b,e){g(this,c);h=this;h.$form=a;h.idSuffix=d;h.storedData=b;h.fieldsCollection=e}var h;c.prototype.init=function(){var c=h.storedData;h.registerEvents(h);window.lx||(window.lx={});c&&c["gcw-car-gt-type"]&&h.$form.data("gcw-error-msg-id","gcw_gtDepartureArrivalTimingDifferenceErrorMessage");h.carVendorToggle();h.$form.data("gcw-original-action",h.$form.attr("action"));0<h.$form.find(".gcw-cars-time-select").length&&h.LoadCarDateTime()};c.prototype.registerEvents=function(c){var a=c.$form.data("gcw-error-msg-id");c.$form.on("change",".gcw-toggle-car-vendors, .gcw-toggle-discount-codes",function(){c.carVendorToggle()});c.$form.on("change","[name\x3dgtDirection]",function(a){b.setHotel(c.idSuffix);b.swapGtSchedule(c.idSuffix,a.currentTarget.value)});c.$form.on("change",".gcw-sub-nav-option",function(d){d=e(d.currentTarget).attr("value");"ttdGroundTransport"===d||"carsGroundTransport"===d?c.$form.data("gcw-error-msg-id","gcw_gtDepartureArrivalTimingDifferenceErrorMessage"):c.$form.data("gcw-error-msg-id",a)});f.subscribe("typeahead.opened",function(a,d){window.lx&&!window.lx.cache&&(window.lx.cache={});if(document.activeElement.id==="hotel-origin"+c.idSuffix||document.activeElement.id==="hotel"+c.idSuffix)window.lx.cache.hotelSuggestionsMap={},e.each(d.results,function(c){c=this.regionNames.fullName;c=e("\x3cinput /\x3e").html(c).text();var a={};a.hotelId=this.hotelId;a.lat=this.coordinates.lat;a["long"]=this.coordinates["long"];window.lx.cache.hotelSuggestionsMap[c]=a});else if(document.activeElement.id==="flight-origin"+c.idSuffix||document.activeElement.id==="flight"+c.idSuffix)window.lx.cache.airportSuggestionsMap={},e.each(d.results,function(c){c=this.hierarchyInfo.airport.airportCode;var a={};a.regionId=this.hierarchyInfo.airport.multicity;a.lat=this.coordinates.lat;a["long"]=this.coordinates["long"];a.airportFullName=this.regionNames.fullName;window.lx.cache.airportSuggestionsMap[c]=a})});f.subscribe("typeahead.resultSelected",function(a,h){var n=c.idSuffix,q;document.activeElement.id==="flight-origin"+n?q="#hotel":document.activeElement.id==="flight"+n&&(q="#hotel-origin");q=c.$form.find(q+n);b.changeRegionIdOnAirportSelectionFromTASuggestion(n,h,q);var l=e(h.element[0]).closest(".autocomplete").find('[data-provide\x3d"utypeahead"]'),m=l.data("gcw-storeable-name");q=h.suggestionSelected.data.coordinates.lat;var f=h.suggestionSelected.data.coordinates["long"];"gcw-destination"===m?(d.setInput(c.$form,"olat",q),d.setInput(c.$form,"olong",f),l.hasClass("gcw-carPickUp")&&l.hasClass("gcw-copy-pickup-to-dropoff")&&0<Object.keys(h.suggestionSelected.data.regionNames).length&&(l=h.suggestionSelected.data.regionNames.lastSearchName.replace(/&#39;/g,"'"),c.copyPickupToDropoff(n,l,q,f))):"gcw-carDropOff"===m&&(d.setInput(c.$form,"dlat",q),d.setInput(c.$form,"dlong",f))});c.$form.on("focus","#hotel-origin"+c.idSuffix,function(){var a=c.$form.find("#hotel-origin"+c.idSuffix),d=c.$form.find("#flight"+c.idSuffix);b.emptyEssLastSearchCacheForGTHotelFieldOnFocus(c.idSuffix,a,d)});c.$form.on("focus","#hotel"+c.idSuffix,function(){var a=c.$form.find("#hotel"+c.idSuffix),d=c.$form.find("#flight-origin"+c.idSuffix);b.emptyEssLastSearchCacheForGTHotelFieldOnFocus(c.idSuffix,a,d)})};c.prototype.carVendorToggle=function(){h=this;var c=h.$form.find(".gcw-toggle-car-vendors"),a=h.$form.find(".gcw-car-vendor-field"),d=a.find("select option:selected").val(),b=c.find("option:selected").data("gcw-toggled-vendor"),f=[],g=[];a.find("select option").each(function(c,a){0===e(a).parent("span").length&&e(a).wrap('\x3cspan style\x3d"display: none;" /\x3e');e(a).prop("disabled",!0).prop("selected",!1);f=e(a).data("gcw-discount-code-availability").split(",");-1<f.indexOf(b)&&g.push(e(a))});e.each(g,function(c,a){0<e(a).parent("span").length&&e(a).unwrap();e(a).prop("disabled",!1);e(a).val()===d&&e(a).prop("selected",!0)});a.find("select option:selected").val()||a.find("select option:enabled").eq(0).prop("selected",!0);c=h.discountCouponConfig(b);h.toggleCouponInputs(c)};c.prototype.toggleCouponInputs=function(c){h=this;var a={$corpCode:h.$form.find(".gcw-corp-code"),$rateCode:h.$form.find(".gcw-rate-code"),$couponCode:h.$form.find(".gcw-coupon-code"),$otherCouponCode:h.$form.find(".gcw-other-coupon-code")};e.each(a,function(c,a){a.addClass("gcw-disabled").find("input").prop("disabled",!0)});c&&(c.corp&&(a.$corpCode.removeClass("gcw-disabled").find("span").text(c.corp),a.$corpCode.find("input").prop("disabled",!1)),c.rate&&(a.$rateCode.removeClass("gcw-disabled").find("span").text(c.rate),a.$rateCode.find("input").prop("disabled",!1)),c.coupon&&(a.$couponCode.removeClass("gcw-disabled").find("span").text(c.coupon),a.$couponCode.find("input").prop("disabled",!1)),c.other&&(a.$otherCouponCode.removeClass("gcw-disabled").find("span").text(c.other),a.$otherCouponCode.find("input").prop("disabled",!1)))};c.prototype.discountCouponConfig=function(c){h=this;var a=h.$form.find(".gcw-car-vendor-field select option:selected").data("gcw-discount-code-data"),d={};if(a)switch(c){case "corp":a.split(",").forEach(function(c){"corp"===c.split("-")[0]&&(d[c.split("-")[0]]=c.split("-")[1])});break;case "special":a.split(",").forEach(function(c){"corp"!==c.split("-")[0]&&(d[c.split("-")[0]]=c.split("-")[1])})}return d};c.prototype.getCarNextPickupTime=function(c,a){var d="AM",h=c.getHours(),b=c.getMinutes();if(0<=b&&b<a)b=a;else{for(var n=a;b>=a;)a+=n;b=a;59<a&&(b=0,h+=1)}n=h;12<h&&24>h?(d="PM",n=h-12):0===h||24===h?n=12:12===h&&(d="PM");return(10>n?"0"+n:n).toString()+(0<=b&&10>b?"0"+b:b).toString()+d};c.prototype.getCarDateFormat=function(c,a){if(""===a||void 0===a)a="mm/dd/yyyy";return c.toString(a.replace(/m/g,"M").replace(/D/g,"d").replace(/Y/g,"y"))};c.prototype.LoadCarDateTime=function(){h=this;var c=new a,d=30,b=h.$form.find(".gcw-load-default-pickup-time option:eq(10)").val(),e=h.$form.find(".gcw-load-default-pickup-time option:eq(11)").val();""!==b&&void 0!==b&&""!==e&&void 0!==e&&(d=h.TimeIntervalCalculation(b,e));d=h.getCarNextPickupTime(c,d);h.$form.find(".gcw-load-default-pickup-time").attr("selected","selected").val(d);h.$form.find(".gcw-load-default-dropoff-time").attr("selected","selected").val(d);d=h.$form.find(".gcw-load-default-pickup-date").data("gcw-date-format");c=h.getCarDateFormat(c,d);h.$form.find(".gcw-load-default-pickup-date").val(c);c=(new a).addDays(4);c=h.getCarDateFormat(c,d);h.$form.find(".gcw-load-default-dropoff-date").val(c)};c.prototype.copyPickupToDropoff=function(c,a,b,e){h=this;h.$form.find(".gcw-carDropOff").val(a);f.prepFields();d.setInput(h.$form,"dlat",b);d.setInput(h.$form,"dlong",e)};c.prototype.TimeIntervalCalculation=function(c,a){var d=30;if(6===c.length&&6===a.length){var h=c.slice(0,2);var b=a.slice(0,2);var n=c.slice(2,4);var e=a.slice(2,4)}else h=c.slice(0,1),b=a.slice(0,1),n=c.slice(1,3),e=a.slice(1,3);b!==h?d=n===e?1<=b-h?60*(b-h):12===parseInt(h)?60*b:0:n>e?parseInt(e)+(60-n):e-n+(1<=b-h?60*(b-h):12===parseInt(h)?60*b:0):e>n&&(d=e-n);isNaN(d)&&(d=30);return d};return c});
define("GcwCruisesControllers",["classCheck","gcw-traveler-selector-state-manager"],function(g,f){function e(a,d,c,h){g(this,e);b=this;b.$form=a;b.idSuffix=d;b.storedData=c;b.fieldsCollection=h;b.travelerSelectorStateManager=new f(c)}var b;e.prototype.init=function(){b.registerEvents();b.setCruiseLine();b.setCruisesMonths()};e.prototype.registerEvents=function(){b.$form.on("change",".gcw-cruise-lane-select",function(a){b.cruiseLineSelected($(a.target))});uitk.subscribe("travelerselector.updatetravelerselector",function(a,d){b.travelerSelectorStateManager.updateNumberOfTravelers(a,d,b.$form)});uitk.subscribe("travelerselector.updaterooms",function(a,d){b.travelerSelectorStateManager._updateRooms(a,d,b.$form)});uitk.subscribe("travelerselector.clearClonedFields",function(a,d){b.travelerSelectorStateManager._clearClonedRooms(a,d,b.$form)})};e.prototype.cruiseLineSelected=function(a){var d=b.$form.find(".gcw-cruise-lane select");a=b.$form.find(".gcw-cruise-ship");var c=b.$form.find(".cruise-ship");d=d.val();d=b.$form.find("#ship-name-"+d+b.idSuffix);a.addClass("gcw-disabled");0<d.length?d.parent().removeClass("gcw-disabled"):c.parent().removeClass("gcw-disabled")};e.prototype.setCruiseLine=function(){var a=b.$form.find(".gcw-cruise-lane select"),d;b.storedData&&(a.length&&(d=b.storedData[a.data("gcw-storeable-name")]),d&&(a=b.$form.find("#ship-name-"+d+b.idSuffix))&&0<a.length&&(b.$form.find(".cruise-ship").parent().addClass("gcw-disabled"),a.parent().removeClass("gcw-disabled"),(d=b.storedData[a.data("gcw-storeable-name")])&&a.val(d)))};e.prototype.setCruisesMonths=function(){var a=b.$form.find(".gcw-months-loc"),d=b.$form.find(".gcw-cruise-departure-month select"),c=d.data("gcw-date-value-format"),h=d.data("gcw-months-options")?d.data("gcw-months-options"):23;if(a.length&&1>=d.find("option").length){a=a.val().split(";");var n=new Date,e=n.getMonth();n=n.getFullYear();var l;b.storedData&&(l=b.storedData[d.data("gcw-storeable-name")]);for(var m=1;m<=h;m++){var f=a[e]+" "+n.toString();e+=1;if("YYYY-MM-DD"===c){var g=e.toString();g=1===g.length?"0"+g:g;g=n.toString()+"-"+g+"-01"}else"Mmm+DD+YYYY"===c?(g=a[e-1].slice(0,3),g+=1===m?"+13,":"+01,",g+=n.toString()):g=e.toString()+"X"+n.toString();n=11<e?n+1:n;e=11<e?0:e;l&&l===g?d.append("\x3coption selected value\x3d"+g+"\x3e"+f+"\x3c/option\x3e"):d.append("\x3coption value\x3d"+g+"\x3e"+f+"\x3c/option\x3e")}}};return e});
define("GcwFlightsControllers","classCheck GcwUtilsControllers gcwDateFieldParser gcwDateFieldValidations gcw-traveler-selector-state-manager uitk".split(" "),function(g,f,e,b,a,d){function c(d,b,e,m){g(this,c);h=this;h.$form=d;h.idSuffix=b;h.storedData=e;h.fieldsCollection=m;h.travelerSelectorStateManager=new a(e)}var h;c.prototype.init=function(){h.registerEvents(h);h.$form.hasClass("gcw-dynamic-leg-fields")&&h.loadMultiFlightLegData();h.$form.hasClass("gcw-grey-out-irrelevant-dates")&&h.setDatepickersFirstValidDateFromStorage();h.$form.hasClass("gcw-oneway-packages")?h.toggleFlightHotelCheckoutValidator(h.$form.find("[name\x3d'flight-type']:checked")):void 0!==h.storedData&&!0===h.storedData["gcw-flights-sub-nav-oneway"]&&"1"===h.storedData["gcw-flights-add-hotel"]&&h.$form.find("#flight-type-roundtrip"+h.idSuffix).click();f.setRoomContainerClass(h.$form)};c.prototype.registerEvents=function(c){c.$form.on("change",".gcw-rooms-field",function(a){f.setRoomContainerClass(c.$form)});c.$form.on("click",".gcw-reverse-origin-and-destination",function(){c.reverseOriginAndDestination()});f.addFieldHandler(c);f.removeFieldHandler(c);c.prepopulateNextOriginHandler(c);c.greyoutIrrelevantDatesHandler(c);if(c.$form.hasClass("gcw-oneway-packages"))c.oneWayPackagesHandler();d.subscribe("travelerselector.updatetravelerselector",function(a,d){c.travelerSelectorStateManager.updateNumberOfTravelers(a,d,c.$form)});d.subscribe("travelerselector.updaterooms",function(a,d){c.travelerSelectorStateManager._updateRooms(a,d,c.$form)});d.subscribe("travelerselector.clearClonedFields",function(a,d){c.travelerSelectorStateManager._clearClonedRooms(a,d,c.$form)});c.addHotelReflectDateHandler(c)};c.prototype.addFields=function(){h=this;var c=h.$form.find("[data-gcw-additional-fields]"),a=c.last().find(".datepicker"),b=c.last().attr("id"),e=a.attr("id"),f=c.last();a=h.$form.find("[data-gcw-add-fields]");var g=c.length+2,t,u;f.hasClass("gcw-disabled")?(f.removeClass("gcw-disabled"),h.removeFlightLegEnabled()):(c=f.clone().find("input").val("").removeAttr("data-typeahead").end(),c.attr("id",b.replace(g-1,g)),c.find(".datepicker").attr("id",e.replace(g-1,g)),b=c.find('input[type\x3d"text"]'),e=c.find('input[type\x3d"hidden"]'),f=c.find(".leg-number"),f.length&&f.html(window.format.apply({},[f.data("flight-leg-num-token"),g])),b.each(function(){var c=$(this);h.setDataAttrForUta(c,g,!0);t=c.attr("data-gcw-storeable-name").slice(0,-1);u=c.attr("id");var a=u.replace(g-1,g),d=t+g;c.attr("data-gcw-storeable-name",d);c.data("gcw-storeable-name",d);c.attr("id",a);c.closest("label").attr("for",a);h.flightLegValid(c)}),e.each(function(){var c=$(this);t=c.attr("data-gcw-storeable-name");u=c.attr("id");var a=u.replace(g-1,g),d=t.replace(g-1,g);c.attr("data-gcw-storeable-name",d);c.data("gcw-storeable-name",d);c.attr("id",a)}),a.before(c),h.removeFlightLegEnabled(),h.addFieldsInCollection(c),d.prepFields())};c.prototype.focusNextEl=function(){h=this;h.$form.find("input[type\x3dtext].gcw-origin").last().focus().select()};c.prototype.removeFlightLegEnabled=function(){h=this;var c=h.$form.find("[data-gcw-additional-fields]"),a=c.length;c=c.find("a");var d=h.$form.find(".gcw-add-flight-leg");1<a?c.removeClass("gcw-disabled"):c.addClass("gcw-disabled");4<=a?d.addClass("gcw-disabled"):d.removeClass("gcw-disabled")};c.prototype.addFieldsInCollection=function(c){h=this;c.find("input").each(function(){h.fieldsCollection.add($(this))})};c.prototype.removeFieldsFromCollection=function(c){h=this;c.find("input").each(function(){h.fieldsCollection.remove($(this))})};c.prototype.removeFields=function(c){h=this;var a=h.$form.find("[data-gcw-additional-fields]"),b=a.attr("id"),n=!1,e;1<a.length?(c=c.closest(a),a=a.last().find("input"),c.remove(),a.each(function(){(e=$(this).data("gcw-storeable-name"))&&d.publish("gcw.storedDataUpdate",{targetStoreableName:e})}),a=h.$form.find("[data-gcw-additional-fields]"),h.readjustFlightLegNumbers(a),n=!0,h.removeFlightLegEnabled(),h.removeFieldsFromCollection(c)):(c.closest(a).attr("id",b),h.removeFlightLegEnabled());d.utils.focusElement(h.$form.find("#add-flight-leg"+h.idSuffix));return n};c.prototype.readjustFlightLegNumbers=function(c){h=this;var a,d,b,n;for(n=0;n<c.length;n++){var e=$(c[n]);var f=e.find(".datepicker");var g=parseInt(e.attr("id").match(/\d+/)[0],10);if(g!==n+2){var v=n+2;var w=e.attr("id");f=f.attr("id");e.attr("id",w.replace(g,v));e.find(".datepicker").attr("id",f.replace(g,v));w=e.find(".leg-number");w.length&&w.html(window.format.apply({},[w.data("flight-leg-num-token"),v]));e.find("input[type\x3dtext]").each(function(){var c=$(this);a=c.attr("id");d=c.attr("data-gcw-storeable-name").slice(0,-1);var b=a.replace(g,v),n=d+v;h.setDataAttrForUta(c,v,!1,g);c.attr("id",b);c.attr("data-gcw-storeable-name",n);c.data("gcw-storeable-name",n);c.parent("label").attr("for",b)});e.find("input[type\x3dhidden]").each(function(){var c=$(this);b=c.attr("data-gcw-storeable-name");a=c.attr("id");var d=a.replace(g,v),h=b.replace(g,v);c.attr("data-gcw-storeable-name",h);c.data("gcw-storeable-name",h);c.attr("id",d)})}}};c.prototype.setDataAttrForUta=function(c,a,d,b){h=this;d=d?a-1:b;c.hasClass("datepicker-trigger-input")||(b=c.attr("data-airport_code_element").replace(d,a),c.attr("data-airport_code_element",b),c.data("airport_code_element",b),b=c.attr("data-hotel_id_element").replace(d,a),c.attr("data-hotel_id_element",b),c.data("hotel_id_element",b),b=c.attr("data-lat_long_element").replace(d,a),c.attr("data-lat_long_element",b),c.data("lat_long_element",b),b=c.attr("data-region_id_element").replace(d,a),c.attr("data-region_id_element",b),c.data("region_id_element",b),b=c.attr("data-region_type_element").replace(d,a),c.attr("data-region_type_element",b),c.data("region_type_element",b),b=c.attr("data-station_code_element").replace(d,a),c.attr("data-station_code_element",b),c.data("station_code_element",b),b=c.attr("data-city_element").replace(d,a),c.attr("data-city_element",b),c.data("station_code_element",b),b=c.attr("data-country_code_element").replace(d,a),c.attr("data-country_code_element",b),c.data("country_code_element",b),b=c.attr("data-category_element").replace(d,a),c.attr("data-category_element",b),c.data("category_element",b),b=c.attr("data-heds_element").replace(d,a),c.attr("data-heds_element",b),c.data("heds_element",b),b=c.attr("data-search_name_element").replace(d,a),c.attr("data-search_name_element",b),c.data("search_name_element",b),b=c.attr("data-point_of_supply_element").replace(d,a),c.attr("data-point_of_supply_element",b),c.data("point_of_supply_element",b),a=c.attr("data-ta_element").replace(d,a),c.attr("data-ta_element",a),c.data("ta_element",a))};c.prototype.loadMultiFlightLegData=function(){h=this;var c=0,a;if(h.storedData)for(a in h.storedData)3===a.indexOf("-multidest-")&&c++;1<c&&h.addFieldsFromStorage(c);return[c]};c.prototype.addFieldsFromStorage=function(c){h=this;var a=3;for(a;a<=c+1;a++)h.addFields(),h.$form.find(".gcw-multidest-flights-container").find(".gcw-storeable").each(function(){var c=$(this),a=c.data("gcw-storeable-name"),d=h.storedData[a];a&&d&&-1<a.indexOf("gcw-multidest-start-date")&&(d=e.localizedDateFromStorage(d));c.val(d)})};c.prototype.setDatepickersFirstValidDateFromStorage=function(){h=this;var c=[];c=c.concat(h.$form.find('.gcw-date-field[data-gcw-field-available-for-sub-nav-option*\x3d"multi"]').get());c=c.concat(h.$form.find(".gcw-multidest-flights-container").find(".gcw-multidest-date-field").get());$.each(c,function(c,a){var d=$(a),n=h.getNextDateField(d);d=d.find("input");0<n.length&&b.gcw_is_valid_date(e.parseDateField(d),null,d).valid&&h.updateDatepickerFirstValidDate(n,d.val())})};c.prototype.toggleFlightHotelCheckoutValidator=function(c){h=this;"oneway"===c.data("gcw-sub-nav-option-name")?$("#flight-hotel-checkout"+h.idSuffix).removeClass("gcw-flight-hotel-date"):$("#flight-hotel-checkout"+h.idSuffix).addClass("gcw-flight-hotel-date")};c.prototype.flightLegValid=function(c){c.parent().removeClass("invalid")};c.prototype.getNextOriginLocationField=
function(c){h=this;return c.hasClass("gcw-location-field")?h.$form.find('.gcw-multidest-flights-container [data-gcw-additional-fields\x3d"flightlegs"]:eq(0) .gcw-multidest-location-field:eq(0)'):c.parents('[data-gcw-additional-fields\x3d"flightlegs"]').next().find(".gcw-multidest-location-field:eq(0)")};c.prototype.copyTypeaheadState=function(c,a){h=this;a.find('[data-provide\x3d"utypeahead"]').val(c.find('[data-provide\x3d"utypeahead"]').val());$.each(c.find('input[type\x3d"hidden"][data-gcw-storeable-name]'),function(c,d){var h=$(d).data("gcw-storeable-name");h=h.substr(h.lastIndexOf("-")+1);a.find('[data-gcw-storeable-name$\x3d"'+h+'"]').val($(d).val())});d.prepFields()};c.prototype.getNextDateField=function(c){h=this;return c.hasClass("gcw-date-field")?h.$form.find('.gcw-multidest-flights-container [data-gcw-additional-fields\x3d"flightlegs"]:eq(0) .gcw-multidest-date-field'):c.parents('[data-gcw-additional-fields\x3d"flightlegs"]').nextAll('[data-gcw-additional-fields\x3d"flightlegs"]:eq(0)').find(".gcw-multidest-date-field")};c.prototype.updateDatepickerFirstValidDate=function(c,a){h=this;var d=c.find('[data-control\x3d"datepicker"]');0<d.length&&d.uitk_datepicker("updateOptions",{firstValidDate:a});return d};c.prototype.prepopulateNextOriginHandler=function(c){d.subscribe("typeahead.resultSelected",function(a,d){if(c.$form.is(":visible")){var h=d.element.parents('[data-control\x3d"autocomplete"]').find('[data-provide\x3d"utypeahead"]'),b=c.$form.find(".gcw-sub-nav-option:checked");c.$form.hasClass("gcw-prepopulate-flying-from")&&0<h.length&&h.hasClass("gcw-destination")&&0<b.length&&"multi"===b.data("gcw-sub-nav-option-name")&&(h=h.parents('[data-control\x3d"autocomplete"]').parent(),b=c.getNextOriginLocationField(h),0<h.length&&0<b.length&&(c.copyTypeaheadState(h,b),b.next().find('[data-provide\x3d"utypeahead"]').focus()))}})};c.prototype.greyoutIrrelevantDatesHandler=function(c){d.subscribe("datepicker.selectDate",function(a,d){if(c.$form.is(":visible")){var h=d.element,b=c.$form.find(".gcw-sub-nav-option:checked");c.$form.hasClass("gcw-grey-out-irrelevant-dates")&&0<h.length&&0<b.length&&"multi"===b.data("gcw-sub-nav-option-name")&&(b=h.parents('[data-control\x3d"datepicker"]').parent(),b=c.getNextDateField(b),c.updateDatepickerFirstValidDate(b,h.val()))}});d.subscribe("gcw.flight.addedFields",function(a,d){if(c.$form.is(":visible")){var h=d.prevElement,n=d.element,q=c.$form.find(".gcw-sub-nav-option:checked");c.$form.hasClass("gcw-grey-out-irrelevant-dates")&&0<q.length&&"multi"===q.data("gcw-sub-nav-option-name")&&0<n.length&&0<h.length&&(h=h.find(".gcw-multidest-date-field").find("input"),n=n.find(".gcw-multidest-date-field"),b.gcw_is_valid_date(e.parseDateField(h),null,h).valid&&c.updateDatepickerFirstValidDate(n,h.val()))}});d.subscribe("gcw.flight.removedFields",function(a,d){if(c.$form.is(":visible")){var h=0<d.prevElement.length?d.prevElement:c.$form.find(".gcw-date-field:visible").parent(),n=d.nextElement,q=c.$form.find(".gcw-sub-nav-option:checked");c.$form.hasClass("gcw-grey-out-irrelevant-dates")&&0<q.length&&"multi"===q.data("gcw-sub-nav-option-name")&&0<h.length&&0<n.length&&(h=0<h.find(".gcw-multidest-date-field").length?h.find(".gcw-multidest-date-field").find("input"):h.find(".gcw-date-field").find("input"),n=n.find(".gcw-multidest-date-field"),b.gcw_is_valid_date(e.parseDateField(h),null,h).valid&&c.updateDatepickerFirstValidDate(n,h.val()))}})};c.prototype.oneWayPackagesHandler=function(){h=this;h.$form.on("change","[name\x3d'flight-type']",function(c){h.toggleFlightHotelCheckoutValidator($(c.target))})};c.prototype.reflectHotelStayDates=function(c){if(c.prop("checked")){c=h.$form.find(".gcw-start-date:visible").first();var a=h.$form.find(".gcw-partial-start-date:visible").first(),d=e.parseDateField(c),b=e.parseDateField(a),n=h.$form.find(".gcw-end-date:visible").first(),f=h.$form.find(".gcw-partial-end-date:visible").first(),g=e.parseDateField(n),u=e.parseDateField(f);(""===a.val()||b.date<d.date||b.date>g.date)&&a.val(c.val());(""===f.val()||u.date>g.date||u.date<d.date)&&f.val(n.val())}};c.prototype.addHotelReflectDateHandler=function(){h=this;h.$form.on("change",'[name\x3d"addHotel"]',function(c){h.reflectHotelStayDates($(c.target))})};c.prototype.reverseOriginAndDestination=function(){h=this;var c=h.$form.find(".gcw-location-field:eq(0)"),a=h.$form.find(".gcw-location-field:eq(1)"),b=c.find('[data-provide\x3d"utypeahead"]').val(),e=a.find('[data-provide\x3d"utypeahead"]').val();c.find('[data-provide\x3d"utypeahead"]').val(e).change();a.find('[data-provide\x3d"utypeahead"]').val(b).change();$.each(a.find('input[type\x3d"hidden"][data-gcw-storeable-name]'),function(d,h){var b=$(h).data("gcw-storeable-name");b=b.substr(b.lastIndexOf("-")+1);var n={};n[b]=c.find('[data-gcw-storeable-name$\x3d"'+b+'"]').val();c.find('[data-gcw-storeable-name$\x3d"'+b+'"]').val($(h).val()).change();a.find('[data-gcw-storeable-name$\x3d"'+b+'"]').val(n[b]).change()});var f=h.$form.find(".gcw-location-field:eq(0) .label").text(),g=h.$form.find(".gcw-location-field:eq(1) .label").text();d.utils.liveAnnounce((e?f+" "+e:"")+(e&&b?". ":"")+(b?g+" "+b:""));d.prepFields()};return c});
define("GcwHotelsControllers",["classCheck","jquery","GcwUtilsControllers","gcw-traveler-selector-state-manager","uitk"],function(g,f,e,b,a){function d(a,n,e,l){g(this,d);c=this;c.$form=a;c.idSuffix=n;c.storedData=e;c.fieldsCollection=l;c.travelerSelectorEnabled=c.$form.hasClass("gcw-traveler-selector");c.travelerSelectorStateManager=new b(e)}var c;d.prototype.init=function(){c.registerEvents(c);e.setRoomContainerClass(c.$form);c.setNRoomsClass();c.disableFlightAndCar()};d.prototype.registerEvents=function(c){var d=c.$form.find(".gcw-guests-select"),h="#hotel-rooms"+c.idSuffix+", #hotel-1-adults"+c.idSuffix+", #hotel-1-children"+c.idSuffix;d.length&&(c.$form.on("change",h,function(){c.applyGuestsRules()}),c.$form.on("guestsChange",d,function(){c.applyGuestsRules();e.setRoomContainerClass(c.$form)}),c.$form.on("change",d,function(a){var d=c.$form.find(".gcw-guests-select select").data("gcw-guests-toggled-field-on-value").toString();f(a.target).val()===d&&f(a.target).addClass("guestsInactive");c.applyGuestsRules()}),c.applyGuestsRules());c.$form.on("change setNRoomsClass",".gcw-rooms-field",function(a){e.setRoomContainerClass(c.$form);c.setNRoomsClass();c.disableFlightAndCar()});a.subscribe("travelerselector.updatetravelerselector",function(a,d){c.travelerSelectorStateManager.updateNumberOfTravelers(a,d,c.$form)});a.subscribe("travelerselector.updaterooms",function(a,d){c.travelerSelectorStateManager._updateRooms(a,d,c.$form)});a.subscribe("travelerselector.clearClonedFields",function(a,d){c.travelerSelectorStateManager._clearClonedRooms(a,d,c.$form)})};d.prototype.applyGuestsRules=function(){c=this;var a=c.$form.find(".gcw-guests-select select").hasClass("guestsInactive"),d=c.$form.find(".hotels.room-data"),b=d.find(".num-adults").val()[0],e=d.find(".num-children").val()[0],g=c.$form.find(".gcw-rooms-field").find("select").val(),p=!1;d=c.$form.find(".gcw-guests-select");d=c.getGuestsRules(d.find("select").data("gcw-guests-field-visible-on"));f.each(d,function(c,a){a.adults===b&&a.children===e&&a.rooms===g&&(p=!0)});a?c.toggleGuestsField(!1):c.toggleGuestsField(p)};d.prototype.setNRoomsClass=function(){c=this;var a=c.$form.find(".gcw-rooms-container");if(a.length){var d=c.$form.find(".gcw-rooms-field").find("select").val(),b=a.attr("class").split(" "),e;f.each(b,function(c,a){-1<a.indexOf("total-rooms")&&(e=b.indexOf(a))});a.removeClass();e&&b.splice(e,1);b.push("gcw-total-rooms-"+d);a.addClass(b.toString().replace(/,/g," "))}};d.prototype.getGuestsRules=function(c){var a={};f.each(c.split(","),function(c,d){a["rule"+c]={};f.each(d.split("\x26"),function(d,b){a["rule"+c][b.split("-")[0]]=b.split("-")[1]})});return a};d.prototype.disableFlightAndCar=function(){c=this;var a=c.$form.find(".gcw-hotel-add-flight"),d=c.$form.find(".gcw-hotel-add-car"),b=c.$form.find("#disable-flight-package-wrapper"+c.idSuffix),e=c.$form.find("#disable-car-package-wrapper"+c.idSuffix),f=c.$form.find(".gcw-rooms-field"),g=c.$form.find(".gcw-hotel-add-flight").find(".gcw-trigger-tooltip").data("gcw-rooms-restriction-n-rooms");g="undefined"===typeof g?3:g;f=c.travelerSelectorEnabled?f.val():f.find("select").val();("group"===f?9:f)>g?(a.addClass("gcw-disabled"),d.addClass("gcw-disabled"),b.removeClass("gcw-disabled"),e.removeClass("gcw-disabled")):(a.removeClass("gcw-disabled"),d.removeClass("gcw-disabled"),b.addClass("gcw-disabled"),e.addClass("gcw-disabled"))};d.prototype.toggleGuestsField=function(a){c=this;var d=c.$form.find(".gcw-guests-select"),b=c.$form.find(".gcw-rooms-field"),h=c.$form.find(".hotels.room-data");a?(d.removeClass("gcw-disabled"),b.addClass("gcw-disabled"),h.first().addClass("gcw-disabled")):(d.addClass("gcw-disabled"),b.removeClass("gcw-disabled"),h.first().removeClass("gcw-disabled"))};return d});
define("GcwPackagesControllers",["classCheck","GcwUtilsControllers","gcw-traveler-selector-state-manager","gcwDateFieldParser","uitk"],function(g,f,e,b,a){function d(a,b,q,l){g(this,d);c=this;c.$form=a;c.idSuffix=b;c.storedData=q;c.fieldsCollection=l;c.travelerSelectorStateManager=new e(q)}var c;d.prototype.init=function(){c.registerEvents();f.setRoomContainerClass(c.$form)};d.prototype.registerEvents=function(){a.subscribe("datepicker.selectDate",function(d,b){var h=b.element;var n=h.closest("form"),e=$(n).attr("data-gcw-key"),q=$("#partialCarBooking-"+e).prop("checked");"undefined"===typeof q&&(q=!1);e=$(n).find(".gcw-start-date:visible");var f=$(n).find(".gcw-partial-car-pickup-date:visible");q&&(h.hasClass("gcw-start-date")||h.hasClass("gcw-partial-car-pickup-date"))?(n=$(n).find(".gcw-load-default-pickup-time"),e.first().val()!==f.first().val()?(""===$(n).children("option:selected").val()&&(h=$(n).find('option[value\x3d""]'),e=c.$form.find("#liveAnnouncePartialCar .gwc-partial-car-pickup-time-changed"),$(n).children("option:selected").removeAttr("selected"),$(n).children('option[value\x3d"1000AM"]').prop("selected",!0),a.utils.liveAnnounce(e.text().replace("{0}",h.text()).replace("{1}",$(n).find("option:selected").text()),"polite")),$(n).find('option[value\x3d""]').remove()):(h=c.$form.find("#liveAnnouncePartialCar .gwc-partial-car-based-on-flight"),e=$(n).find('option[value\x3d""]').length,""!==h.text()&&0===e&&$(n).prepend("\x3coption value\x3d''\x3e"+h.text().trim()+"\x3c/option\x3e"))):q&&(h.hasClass("gcw-end-date")||h.hasClass("gcw-partial-car-dropoff-date"))&&(h=$(n).find(".gcw-end-date"),e=$(n).find(".gcw-partial-car-dropoff-date"),n=$(n).find(".gcw-load-default-dropoff-time"),h.first().val()!==e.first().val()?(""===$(n).children("option:selected").val()&&(h=$(n).find("option:first"),e=c.$form.find("#liveAnnouncePartialCar .gwc-partial-car-dropoff-time-changed"),$(n).children("option:selected").removeAttr("selected"),$(n).children('option[value\x3d"1000AM"]').prop("selected",!0),c.$form.find(".gcw-load-default-dropoff-time:visible option:first").hide(),a.utils.liveAnnounce(e.text().replace("{0}",h.text()).replace("{1}",$(n).find("option:selected").text()),"polite")),$(n).find('option[value\x3d""]').remove()):(h=c.$form.find("#liveAnnouncePartialCar .gwc-partial-car-based-on-flight"),e=$(n).find('option[value\x3d""]').length,""!==h.text()&&0===e&&$(n).prepend("\x3coption value\x3d''\x3e"+h.text().trim()+"\x3c/option\x3e")))});var d=c.$form.find(".gcw-rooms-field");c.$form.on("change",d,function(a){f.setRoomContainerClass(c.$form)});c.$form.on("change",".gcw-partial-hotel",function(a){c.reflectHotelPartialStayDates($(a.target))});c.$form.on("change",".gcw-packages-partial-car",function(a){c.reflectPartialCarDates($(a.target))});c.$form.on("change","#partialHotelBooking-hp-package",function(a){0<$(c.$form.find("[name\x3dfh-subNav]")).length&&(c.$form.find(".gcw-partial-hotel").prop("checked",a.target.checked),a.target.checked?(c.$form.find("#packages-partial-dates-fh-hp-package").removeClass("gcw-disabled"),c.$form.find("#packages-partial-dates-hp-package").removeClass("gcw-disabled")):(c.$form.find("#packages-partial-dates-fh-hp-package").addClass("gcw-disabled"),c.$form.find("#packages-partial-dates-hp-package").addClass("gcw-disabled")))});a.subscribe("travelerselector.updatetravelerselector",function(a,d){c.travelerSelectorStateManager.updateNumberOfTravelers(a,d,c.$form)});a.subscribe("travelerselector.updaterooms",function(a,d){c.travelerSelectorStateManager._updateRooms(a,d,c.$form)});a.subscribe("travelerselector.clearClonedFields",function(a,d){c.travelerSelectorStateManager._clearClonedRooms(a,d,c.$form)})};d.prototype.reflectHotelPartialStayDates=function(a){if(a.prop("checked")){a=c.$form.find(".gcw-start-date:visible").first();var d=c.$form.find(".gcw-partial-start-date:visible").first(),h=b.parseDateField(a),e=b.parseDateField(d),f=c.$form.find(".gcw-end-date:visible").first(),g=c.$form.find(".gcw-partial-end-date:visible").first(),r=b.parseDateField(f),t=b.parseDateField(g);(""===d.val()||e.date<h.date||e.date>r.date)&&d.val(a.val());(""===g.val()||t.date>r.date||t.date<h.date)&&g.val(f.val())}};d.prototype.reflectPartialCarDates=function(a){if(a.prop("checked")){a=c.$form.find(".gcw-start-date:visible").first();var d=c.$form.find(".gcw-partial-car-pickup-date:visible").first(),b=c.$form.find(".gcw-end-date:visible").first(),h=c.$form.find(".gcw-partial-car-dropoff-date:visible").first();""===d.val()&&d.val(a.val());""===h.val()&&h.val(b.val())}};return d});require("uitk_localized_dateApi");
define("GcwRailsControllers",["classCheck","uitk","jquery","GcwUtilsProcessingFunctions"],function(g,f,e,b){function a(c,b,n,e){g(this,a);d=this;d.$form=c;d.idSuffix=b;d.storedData=n;d.fieldsCollection=e}var d;a.prototype.init=function(){d.registerEvents();d.loadRailcardData();if(d.isCrossSupply()){var c=d.$form.find(".gcw-origin:visible");(c=b.getUTAFeature(c,"point_of_supply"))&&d.loadFormFieldsBasedOnPOS(c)}c=d.$form.find(".gcw-rails-time-select");if(0<c.length){var a=d.getDepartureTime();c.each(function(c,d){e(d).val(a)})}};a.prototype.registerEvents=function(){d.$form.on("click",".gcw-add-fields",function(c){c.preventDefault();d.addFields();d.focusSelect()});d.$form.on("click",".gcw-remove-fields",function(c){var a=e(c.target);c.preventDefault();d.removeFields(a)});d.$form.on("change railcardEnabled",".gcw-railcard-select",function(c){c=e(c.target);d.railcardNumberEnabled(c);d.railcardValid(c)});var c=d.isCrossSupply();if(d.$form.hasClass("gcw-rails-cross-country-class")||c){var a,b,q,l,g;f.subscribe("typeahead.suggestion_selected",function(h,n){if(c){g=n.suggestion.data.hierarchyInfo.rails.pointOfSupply;var e=g;if(e.constructor===Array)b:{e=d.$form.data("siteid");for(var f=d.$form.find(".gcw-supply-mapping-with-siteid").data("gcw-supply-mapping-with-siteid").split(";"),m=0,p=f.length;m<p;m++)if(+f[m].split(":")[1]===+e){e=f[m].split(":")[0];break b}e=void 0}g=e;d.loadFormFieldsBasedOnPOS(g)}q=n.suggestion.data.hierarchyInfo.country.name;-1<n.domElementId.indexOf("rail-destination")?b=-1<["Ungarn","Slowenien"].indexOf(q):a=-1<["Ungarn","Slowenien"].indexOf(q);l=a||b;d.$form.find(".gcw-cross-country").val(l)})}};a.prototype.isCrossSupply=function(){return"true"===e(".gcw-rails-cross-supply-flag").val()};a.prototype.loadFormFieldsBasedOnPOS=function(c){var a=d.$form.find(".datepicker");var b=d.$form.find(".gcw-"+c.toLowerCase()+"-config").data("gcw-"+c.toLowerCase()+"-config");c=b.lastValidTravelDate;var e=d.getLastValidTravelDate(c);var l=b.anytimeSearchSupported;var f=b.railCardOptions;var g=b.railcardsVisible;d.updateDateOptions(a,c,e.shortDate());d.updateAnytimeSelect(l);d.updateRailCard(g,f);d.updateValidation(b)};a.prototype.updateValidation=function(c){d.$form.data("gcw-max-travelers",c.maxTravelers);d.$form.data("rail-age-boundary",c.ageBoundary);d.$form.data("rail-accompanying-age",c.accompanyingAge)};a.prototype.updateRailCard=function(c,a){var b=d.$form.find(".railcard-data");if(c){var h=d.$form.find(".gcw-railcard-select");b.removeClass("hidden");h.find("option").remove().end();h.val(d.$form.find(".gcw-railcard-select option:first").val());e.each(a,function(){e("\x3coption/\x3e",{value:this.value,text:this.label}).appendTo(h)});d.railcardNumberEnabled(h);d.$form.find(".gcw-remove-fields").trigger("click")}else b.addClass("hidden")};a.prototype.updateAnytimeSelect=function(c){var a=d.$form.find("select[name\x3deTime], select[name\x3dsTime]"),b=a.find("option:first");c?b.show():(b.hide(),c=d.getDepartureTime(),a.val(c))};a.prototype.updateDateOptions=function(c,a,d){c.uitk_datepicker("updateOptions",{lastValidDate:d,maxRangeLength:a-1});c.data("last-valid-date",d);c.data("max-range-length",a-1)};a.prototype.getLastValidTravelDate=function(c){return f.utils.createLocalizedDate((new XDate).addDays(c-1),f.locale)};a.prototype.loadRailcardData=function(){var c=0,a={},b;if(d.storedData)for(b in d.storedData)3===b.indexOf("-railcard-")&&(a[b]=d.storedData[b],c++);c/=2;d.addFieldsFromStorage(a,c);d.enableRailCardSelectFromStorage();return[a,c]};a.prototype.addFieldsFromStorage=function(c,a){var b=1,h=[];for(b;b<=a;b++){var e=c["gcw-railcard-card-"+b];var f=c["gcw-railcard-amount-"+b];e&&(d.addFields(e,f),h.push([e,f]))}return h};a.prototype.addFields=function(c,a){var b=d.$form.find("[data-gcw-additional-fields]"),h=b.last().attr("id"),l=b.find("select"),f=b.last(),g=d.$form.find("[data-gcw-add-fields]"),r=b.length,t,u;f.hasClass("gcw-disabled")?(f.removeClass("gcw-disabled"),1<l.length&&1<l.val().length&&l.val(""),c&&(l.first().val(c),l.last().val(a)),d.railcardNumberEnabled(l.first())):(b=f.clone(),b.attr("id",h.replace(r-1,r)),h=b.find("select"),h.each(function(){var c=e(this);t=c.attr("data-gcw-storeable-name").slice(0,-1);u=c.attr("id");var a=u.replace(r-1,r),d=t+r;c.attr("data-gcw-storeable-name",d);c.data("gcw-storeable-name",d);c.attr("id",a);c.closest("label").attr("for",a)}),g.before(b),c&&(h.first().val(c),h.last().val(a)),d.railcardNumberEnabled(h.first()))};a.prototype.railcardNumberEnabled=function(c){var a=c.parents("label").siblings("label"),d=a.siblings("a"),b=a.parents("fieldset").next(".gcw-advanced-options");""!==c.val()?(a.removeClass("gcw-disabled"),d.removeClass("gcw-disabled"),b.removeClass("gcw-disabled")):(a.addClass("gcw-disabled"),d.addClass("gcw-disabled"),b.addClass("gcw-disabled"))};a.prototype.enableRailCardSelectFromStorage=function(){var c=d.$form.find(".gcw-railcard-select");e.each(c,function(c,a){setTimeout(function(){e(a).trigger("railcardEnabled")},20)})};a.prototype.getDepartureTime=function(c){var a=c||new Date;a.setMinutes(30*Math.ceil((a.getMinutes()+30)/30));c=a.getHours();a=a.getMinutes();a=10>a?"0"+a:a.toString();c=10>c?"0"+c:c.toString();return c+a};a.prototype.focusSelect=function(){var c=d.$form.find("select.gcw-railcard-select").last();f.utils.focusElement(c)};a.prototype.removeFields=function(c){var a=d.$form.find("[data-gcw-additional-fields]"),b=a.attr("id"),e=!1;if(1<a.length){e=a.last().find("select");b=e.first().data("gcw-storeable-name");var l=e.eq(1).data("gcw-storeable-name");c.closest(a).remove();e=d.$form.find("[data-gcw-additional-fields]");c=e.last().find("select").first();d.readjustRailcardsNumbers(e);e=!0;d.railcardNumberEnabled(c);b&&f.publish("gcw.storedDataUpdate",{targetStoreableName:b});l&&f.publish("gcw.storedDataUpdate",{targetStoreableName:l})}else c.closest(a).attr("id",b),b=a.find("select"),""!==b.val()&&(b.first().val(""),b.last().val("1")),d.railcardNumberEnabled(b.first());f.utils.focusElement(d.$form.find("#add-rail-card"+d.idSuffix));return e};a.prototype.readjustRailcardsNumbers=function(c){var a,d,b;for(b=0;b<c.length;b++){var l=e(c[b]);var f=parseInt(l.attr("id").match(/\d+/)[0],10);if(f!==b){var g=b;var r=l.attr("id");l.attr("id",r.replace(f,g));l.find("select").each(function(){var c=e(this);a=c.attr("id");d=c.attr("data-gcw-storeable-name").slice(0,-1);var b=a.replace(f,g),h=d+g;c.attr("id",b);c.attr("data-gcw-storeable-name",h);c.data("gcw-storeable-name",h);c.parent("label").attr("for",b)})}}};a.prototype.railcardValid=function(c){c.parent().removeClass("invalid")};return a});
define("GcwUtilsControllers",["classCheck"],function(g){function f(){g(this,f)}f.setHotel=function(e){var b=$("#hotel-origin"+e).val(),a=$("#hotel"+e).val();a&&!b&&$("#hotel-origin"+e).val(a);b&&!a&&$("#hotel"+e).val(b)};f.swapGtSchedule=function(e,b){var a=$("input#gt-hotel-departure-date"+e),d=$("#gt-dropoff-time"+e),c=$("input#gt-origin-hotel-departure-date"+e),h=$("#gt-hotel-departure-time"+e);"to-airport"===b?(c.val(a.val()),h.val(d.val())):(a.val(c.val()),d.val(h.val()))};f.setRoomContainerClass=function(e){var b=$(".gcw-rooms-container");e=e.find(".gcw-rooms-field").find("select").val();void 0!==e&&(1<e||"group"===e?b.addClass("clearBoth"):b.removeClass("clearBoth"),1<e?b.addClass("rooms-wrapping"):b.removeClass("rooms-wrapping"))};f.emptyEssLastSearchCacheForGTHotelFieldOnFocus=function(e,b,a){!a.val().length&&b.data("autocomplete")&&(b.data("autocomplete").opts.regionid="0",b.data("autocomplete").opts.rid="0",b.data("autocomplete").cache={})};f.changeRegionIdOnAirportSelectionFromTASuggestion=function(e,b,a){window.lx&&!window.lx.cache&&(window.lx.cache={});if(document.activeElement.id==="flight-origin"+e||document.activeElement.id==="flight"+e)if(e=b.element[0].dataset.airportCode,window.lx.cache.airportSuggestionsMap&&(e=window.lx.cache.airportSuggestionsMap[e]))a.data("regionid",e.regionId),a.data("rid",e.regionId),a.data("autocomplete")&&(a.data("autocomplete").opts.regionid=e.regionId),a.data("autocomplete")&&(a.data("autocomplete").opts.rid=e.regionId),a.data("autocomplete")&&(a.data("autocomplete").cache={})};f.addFieldHandler=function(e){e.$form.on("click",".gcw-add-fields",function(b){b.preventDefault();b=$(b.target);if(b.parents("form").hasClass("gcw-prepopulate-flying-from")){var a=b.parent().prev().find(".gcw-multidest-location-field:eq(1)");e.addFields();var d=e.getNextOriginLocationField(a);0<a.length&&0<a.find('[data-provide\x3d"utypeahead"]').val().trim().length&&0<d.length?(e.copyTypeaheadState(a,d),d.next().find('[data-provide\x3d"utypeahead"]').focus()):e.focusNextEl()}else e.addFields(),e.focusNextEl();uitk.publish("gcw."+b.parents("form").data("lob-form")+".addedFields",{prevElement:e.$form.find("[data-gcw-additional-fields]").last().prev(),element:e.$form.find("[data-gcw-additional-fields]").last()})})};f.removeFieldHandler=function(e){e.$form.on("click",".gcw-remove-fields",function(b){b.preventDefault();b=$(b.target);var a=$(this);if(a.parents("form").hasClass("no-gcw-dynamic-leg-fields"))$(".btn-clear",a.siblings()).trigger("click"),$("input.gcw-multidest-date",a.siblings()).val("");else{var d=b.parents("[data-gcw-additional-fields]");a=d.prev(".gcw-multi-flight-data");var c=d.next(".gcw-multi-flight-data");d=d.parents("form").data("lob-form");e.removeFields(b);uitk.publish("gcw."+d+".removedFields",{prevElement:a,nextElement:c})}})};return f});define("GcwThreeppControllers",["classCheck","jquery","gcw-traveler-selector-state-manager","uitk"],function(g,f,e,b){function a(c,b,n,q){g(this,a);d=this;d.$form=c;d.idSuffix=b;d.storedData=n;d.fieldsCollection=q;d.travelerSelectorStateManager=new e(n)}var d;a.prototype.init=function(){d.registerEvents()};a.prototype.registerEvents=function(){b.subscribe("travelerselector.updatetravelerselector",function(c,a){d.travelerSelectorStateManager.updateNumberOfTravelers(c,a,d.$form)});b.subscribe("travelerselector.updaterooms",function(c,a){d.travelerSelectorStateManager._updateRooms(c,a,d.$form)});b.subscribe("travelerselector.clearClonedFields",function(c,a){d.travelerSelectorStateManager._clearClonedRooms(c,a,d.$form)})};return a});define("gcwDataPreloadingFunctions",["GcwCruisesDataPreloadingFunctions","GcwFlightsDataPreloadingFunctions","GcwThreeppDataPreloadingFunctions","GcwThreeppDataPreloadingFunctionsCloud","GcwCarsDataPreloadingFunctions"],function(g,f,e,b,a){return{cruises:function(a,c,b){a=new g(a,c);a.init();return a},flights:function(a,c,b){a=new f(a,c);a.init();return a},threepp:function(a,c,b,n){a=new e(a,c,b,n);a.init();return a},threepp_cloud:function(a,c,h,e){a=new b(a,c,h,e);a.init();return a},cars:function(d,c,b){d=new a(d,c);d.init();return d}}});
define("GcwCruisesDataPreloadingFunctions",["classCheck","jquery","uitk","xdate"],function(g,f,e,b){function a(c,b,e){g(this,a);d=this;d.$form=c;d.storedData=b;d.ignoreSavedFormData=e}var d;a.prototype.init=function(){d.registerEvents();0<d.$form.find(".cruise-earliest-departure-date").length?d.setOptions(!0):d.setOptionsForDateRanger()};a.prototype.registerEvents=function(){d.$form.on("change",".cruise-destination, .cruise-earliest-departure-date",function(){d.setOptions(!1)})};a.prototype.loadDestinationOptions=function(c){var a={},b="",e=d.$form.find(".cruise-destination"),l=e.val();c&&c.destinationsMap&&1<=Object.keys(c.destinationsMap).length&&(a["Most Popular"]=[],a["Other Destinations"]=[],f.each(c.destinationsMap,function(c,d){d&&d.popular?a["Most Popular"].push({value:d.deepLink,label:d.displayText,index:d.index}):a["Other Destinations"].push({value:d.deepLink,label:d.displayText,index:d.index})}),a["Most Popular"].sort(function(c,a){return c.index-a.index}),a["Other Destinations"].sort(function(c,a){return c.label>a.label}));f.each(a,function(c,a){a&&0<a.length&&(b+='\x3coptgroup label\x3d"'+c+("Most Popular"===c?' ---"\x3e':'"\x3e'),f.each(a,function(c,a){b+='\x3coption value\x3d"'+a.value+'"\x3e'+a.label+"\x3c/option\x3e"}),b+="\x3c/optgroup\x3e")});""!==b&&(e.find("option").not(":first").remove(),e.find("optgroup").remove(),e.find("option").after(b));e.val(l)};a.prototype.setOptionsForDateRanger=function(c){var a=d.$form.find(".cruise-destination"),b=d.$form.find("#cruise-start-date-hp-cruise"),e=d.$form.find("#cruise-end-date-hp-cruise"),l=function(c){d.loadDestinationOptions(c);d.loadDateRangerOptions(c)};a.prop("disabled",!0);b.prop("disabled",!0);e.prop("disabled",!0);c=c||l;f.ajax({dataType:"json",method:"GET",type:"GET",timeout:1E4,url:"/cruise/search/api/options"}).done(c).always(function(){a.prop("disabled",!1);b.prop("disabled",!1);e.prop("disabled",!1)})};a.prototype.loadDateRangerOptions=function(c){var a=f(".cruise-date-ranger-start"),d=f(".cruise-date-ranger-end");c&&c.searchFiltersListType&&c.searchFiltersListType.departureDates&&(c={lastValidDate:c.searchFiltersListType.departureDates[c.searchFiltersListType.departureDates.length-1]},a.attr("data-last-valid-date",c.lastValidDate),d.attr("data-last-valid-date",c.lastValidDate),a.uitk_datepicker("updateOptions",c),d.uitk_datepicker("updateOptions",c))};a.prototype.selectDestinationOptions=function(c,a){var b=d.$form.find(".cruise-destination");b.val("");if(a&&d.storedData&&!d.ignoreSavedFormData){var h=b.data("gcw-storeable-name");if(h=d.storedData[h])b.val(h),e.publish("gcw.inputChanged",{input:b,value:h})}else c.destinations&&""!==c.destinations&&b.val(c.destinations)};a.prototype.selectMonthsOptions=function(c,a){var h=d.$form.find(".cruise-earliest-departure-date");h.val("");if(a&&d.storedData&&!d.ignoreSavedFormData){var q=h.data("gcw-storeable-name");if(q=d.storedData[q])h.val(q),e.publish("gcw.inputChanged",{input:h,value:q})}else if(c.earliestDeptDate&&""!==c.earliestDeptDate){var l=c.earliestDeptDate.split("-");q=l[0];var f=("0"+l[1]).slice(-2);l=("0"+l[2]).slice(-2);q=new b(q+"-"+f+"-"+l);q=d.getFormattedDate(q,!0,!1);h.val(q)}};a.prototype.setOptions=function(c,a){var b=d.$form.find(".cruise-destination"),h=d.$form.find(".cruise-earliest-departure-date"),e=d.getSearchParameters(c),g=function(a){d.loadDestinationOptions(a);d.populateDataForMonthsFilter(a);d.selectDestinationOptions(e,c);d.selectMonthsOptions(e,c)};a=a||g;b.prop("disabled",!0);h.prop("disabled",!0);f.ajax({data:e,dataType:"json",method:"GET",type:"GET",timeout:1E4,url:"/cruise/search/api/options"}).done(a).always(function(){b.prop("disabled",!1);h.prop("disabled",!1)})};a.prototype.populateDataForMonthsFilter=function(c){if(c&&c.searchFiltersListType&&c.searchFiltersListType.departureMonths){var a=d.$form.find(".cruise-earliest-departure-date"),b="";c.searchFiltersListType.departureMonths.forEach(function(c){var a=c.replace("-"," ");c=c.substring(0,3);c=(new Date(Date.parse(c+"  1, 2012"))).getMonth()+1;10>c&&(c="0"+c);var d=a.split(" ")[1];b+='\x3coption value\x3d"'+(d+"-"+c+"-01")+'"\x3e'+a+"\x3c/option\x3e"});""!==b&&(a.find("option").not(":first").remove(),a.find("option").after(b))}};a.prototype.getFormattedDate=function(c,a,b){var h="";d.isValidDate(c)&&(a?(a=("0"+c.getDate()).slice(-2),h=("0"+(c.getMonth()+1)).slice(-2)):(a=c.getDate(),h=c.getMonth()+1),c=c.getFullYear(),h=b?h+"/"+a+"/"+c:c+"-"+h+"-"+a);return h};a.prototype.getSearchParameters=function(c){var a=d.$form.find(".cruise-destination"),e=d.$form.find(".cruise-earliest-departure-date");if(c&&d.storedData){var q=d.storedData[a.data("gcw-storeable-name")];var l=d.storedData[e.data("gcw-storeable-name")]}c=q||a.val();l=l||e.val();e={};""!==c?e.destinations=c:""===l&&(e.destinations="");""!==l&&(l=new b(l),c=new b(l.getFullYear(),l.getMonth()+1,0),e.earliestDeptDate=d.getFormattedDate(l,!1,!1),e.latestDeptDate=d.getFormattedDate(c,!1,!1));return e};a.prototype.isValidDate=function(c){return null!==c&&"undefined"!==typeof c&&"invalid date"!==(new b(c))[0].toString().toLowerCase()};return a});define("GcwFlightsDataPreloadingFunctions",["classCheck"],function(g){function f(b,a){g(this,f);e=this;e.$form=b;e.storedData=a;e.airlinesListConfig={selectElementContainer:b.find(".gcw-airline-select").parent(),selectElement:b.find(".gcw-airline-select"),request:{url:"/travel-entities/airlines",params:{siteid:b.data("siteid"),locale:b.data("locale"),sort:"name",isMajor:!0}}}}var e;f.prototype.init=function(){e.getAirlinesList(e.airlinesListConfig.request).then(function(b){0<b.length?(e.setAirlinesHTMLOptionsList(e.createAirlinesHTMLOptionsList(b)),void 0!==e.storedData&&e.storedData[e.airlinesListConfig.selectElement.data("gcw-storeable-name")]&&e.setLastSearchAirline(e.storedData[e.airlinesListConfig.selectElement.data("gcw-storeable-name")])):e.hideHTMLOptionsListContainer()}).fail(function(){e.hideHTMLOptionsListContainer()});return e};f.prototype.getAirlinesList=function(b){return $.ajax({method:"GET",type:"GET",url:b.url,data:b.params,dataType:"json",timeout:1E4}).then(function(a){return e.parseAirlinesListResponse(a)})};f.prototype.parseAirlinesListResponse=function(b){return b.data||[]};f.prototype.createAirlinesHTMLOptionsList=function(b){var a="";b.forEach(function(d){a+='\x3coption value\x3d"'+d.code+'"\x3e'+d.name+"\x3c/option\x3e"});return a};f.prototype.setAirlinesHTMLOptionsList=function(b){e.airlinesListConfig.selectElement.append(b)};f.prototype.setLastSearchAirline=function(b){e.airlinesListConfig.selectElement.val(b)};f.prototype.hideHTMLOptionsListContainer=function(){e.airlinesListConfig.selectElementContainer.hide()};return f});
define("GcwThreeppDataPreloadingFunctions",["classCheck","jquery"],function(g,f){function e(a,d,c,h){g(this,e);b=this;b.$form=a;b.storedData=d;b.ignoreSavedFormData=c;b.key=h;b.locale=b.$form&&b.$form.data("locale")?b.$form.data("locale").substring(0,2):"en";b.url="https://threepp-destination-service.prod-p.expedia.com/all-inclusive-vacation-destination/wizard/getWizardJSON?fram\x3dExpediaRocks\x26lang\x3d"+b.locale+"\x26callback\x3d?"}var b;e.prototype.init=function(){b.$form.hasClass("set-origin")&&(b.getOrigins(!0),b.registerEvents());b.getAdvancedDropdownState(!0,b.key)};e.prototype.registerEvents=function(){b.$form.on("change",".gcw-threepp-origin-input",function(a){b.getDestinations()});b.$form.on("change",".gcw-threepp-destination-input",function(a){b.getDurationAndHotels()})};e.prototype.getAdvancedDropdownState=function(a,d){a&&"true"===localStorage.getItem("threePP-advanced-options"+d)&&(f("#threePP-advanced-options-fields"+d).attr("style","visibility: visible; opacity: 1;"),f("#threePP-advanced-options-fields"+d).removeClass("fade").addClass(" open"),window.localStorage.setItem("threePP-advanced-options"+d,"false"))};e.prototype.getDurationAndHotels=function(a){var d=b.$form.find(".gcw-threepp-destination-input").val();1<(d&&d.length?d.split("|"):[]).length?(b.getDuration(a),b.getHotels(a)):(b.resetHotels(),b.resetDuration(a))};e.prototype.getOrigins=function(a){var d=b.$form.find(".gcw-threepp-origin-input");f.ajax({dataType:"json",method:"GET",type:"GET",timeout:1E4,url:b.url+"\x26q\x3do"}).done(function(c){var h=[];f.each(c,function(c,a){h.push('\x3coption data-sort\x3d"'+a.name+'" value\x3d"'+a.code+'"\x3e'+a.name+"\x3c/option\x3e")});d.append(h.sort().join(""));a&&(b.loadValueFromLocalStorage(d),b.getDestinations(a))})};e.prototype.getDestinations=function(a){var d=b.$form.find(".gcw-threepp-origin-input"),c=b.$form.find(".gcw-threepp-destination-input");d.length&&d.val()?(d=b.url+"\x26q\x3dd\x26p\x3d"+d.val(),f.ajax({dataType:"json",method:"GET",type:"GET",timeout:1E4,url:d}).done(function(d){var h=[];f.each(d,function(c,a){if(a&&a.name){var d=a.name,b='" data-label\x3d"'+a.name;if(void 0!==a.destinations)if(1<a.destinations.length){var e=a.destinations.map(function(c){return c.durations}).sort(function(c,a){return a.length-c.length})[0];h.push('\x3coption value\x3d"'+a.name.replace(/\s/g,"kkk")+"xxx"+a.code.split(",").sort().join("_")+"|"+e+'" country\x3d"'+d+b+'" class\x3d"region"\x3e'+a.name+"\x3c/option\x3e");f.each(a.destinations,function(c,a){h.push('\x3coption country\x3d"'+d+('" data-label\x3d"'+a.name)+'" value\x3d"'+a.code+"|"+a.durations+"|"+a.hotels+'"\x3e - '+a.name+"\x3c/option\x3e")})}else h.push('\x3coption value\x3d"'+a.code+"|"+a.destinations[0].durations+"|"+a.destinations[0].hotels+'" country\x3d"'+d+b+'" class\x3d"region"\x3e'+a.name+" ("+a.destinations[0].name+")\x3c/option\x3e");else h.push('\x3coption value\x3d"'+a.name.replace(/\s/g,"kkk")+"xxx"+a.code.split(",").sort().join("_")+'|3,7,14" country\x3d"'+d+b+'" class\x3d"region"\x3e'+a.name+"\x3c/option\x3e")}});0<h.length&&(c.html(h.join("")),a&&(b.loadValueFromLocalStorage(c),b.getDurationAndHotels(a)))})):c.children().first().prop("selected",!0)};e.prototype.getHotels=function(a){var d=b.$form.find(".gcw-threepp-destination-input");d.length&&d.val()&&(d=d.val().split("|"),2<d.length&&f.ajax({dataType:"json",method:"GET",type:"GET",timeout:1E4,url:b.url+"\x26q\x3dh\x26p\x3d"+d[2]}).done(function(c){var d=[];f.each(c,function(c,a){a&&a.code&&a.name&&d.push('\x3coption value\x3d"'+a.code+'"\x3e'+b.toTitleCase(a.name)+"\x3c/option\x3e")});0<d.length&&(c=b.$form.find(".gcw-threepp-hotels-select"),c.html(c.children().first()),c.append(d.join("")),a&&b.loadValueFromLocalStorage(c))}))};e.prototype.getDuration=function(a){var d=b.$form.find(".gcw-threepp-destination-input");if(d.length&&d.val()&&(d=d.val().split("|"),1<d.length)){d=d[1];var c=d.split(",");if(f.isArray(c)&&"3,7,14"!==d){var h=b.$form.find(".gcw-threepp-duration-select");h.children().addClass("gcw-disabled");f.each(c,function(c,a){h.find("option[value\x3d"+a+"DAYS]").removeClass("gcw-disabled")});h.find("option[value\x3d7DAYS]").hasClass("gcw-disabled")?h.find("option:not(.gcw-disabled)").first().prop("selected","selected"):h.val("7DAYS");a&&b.loadValueFromLocalStorage(h)}else b.resetDuration(a)}};e.prototype.resetHotels=function(){var a=b.$form.find(".gcw-threepp-hotels-select");a.html(a.children().first());a.children().first().prop("selected",!0)};e.prototype.resetDuration=function(a){var d=b.$form.find(".gcw-threepp-duration-select");d.children().removeClass("gcw-disabled");d.find("option[value\x3d1DAYS]").addClass("gcw-disabled");d.find("option[value\x3d2DAYS]").addClass("gcw-disabled");a?b.loadValueFromLocalStorage(d):d.val("7DAYS")};e.prototype.toTitleCase=function(a){return a.replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()})};e.prototype.loadValueFromLocalStorage=function(a){if(b.storedData&&!b.ignoreSavedFormData){var d=a.data("gcw-storeable-name");(d=b.storedData[d])&&a.val(d)}};return e});
define("GcwThreeppDataPreloadingFunctionsCloud",["classCheck","jquery"],function(g,f){function e(a,d,c,h){g(this,e);b=this;b.$form=a;b.storedData=d;b.ignoreSavedFormData=c;b.key=h;b.locale=b.$form&&b.$form.data("locale")?b.$form.data("locale").substring(0,2):"en";b.url="https://threepp-destination-service.prod-p.expedia.com/all-inclusive-vacation-destination/wizard/getWizardJSON?fram\x3dExpediaRocks\x26lang\x3d"+b.locale+"\x26callback\x3d?"}var b;e.prototype.init=function(){b.$form.hasClass("set-origin")&&(b.getOrigins(!0),b.registerEvents());b.getAdvancedDropdownState(!0,b.key)};e.prototype.registerEvents=function(){b.$form.on("change",".gcw-threepp-origin-input",function(a){b.getDestinations()});b.$form.on("change",".gcw-threepp-destination-input",function(a){b.getDurationAndHotels()})};e.prototype.getAdvancedDropdownState=function(a,d){a&&"true"===localStorage.getItem("threePP-advanced-options"+d)&&(f("#threePP-advanced-options-fields"+d).attr("style","visibility: visible; opacity: 1;"),f("#threePP-advanced-options-fields"+d).removeClass("fade").addClass(" open"),window.localStorage.setItem("threePP-advanced-options"+d,"false"))};e.prototype.getDurationAndHotels=function(a){var d=b.$form.find(".gcw-threepp-destination-input").val();1<(d&&d.length?d.split("|"):[]).length?(b.getDuration(a),b.getHotels(a)):(b.resetHotels(),b.resetDuration(a))};e.prototype.getOrigins=function(a){var d=b.$form.find(".gcw-threepp-origin-input");f.ajax({dataType:"json",method:"GET",type:"GET",timeout:1E4,url:b.url+"\x26q\x3do"}).done(function(c){var h=[];f.each(c,function(c,a){h.push('\x3coption data-sort\x3d"'+a.name+'" value\x3d"'+a.code+'"\x3e'+a.name+"\x3c/option\x3e")});d.append(h.sort().join(""));a&&(b.loadValueFromLocalStorage(d),b.getDestinations(a))})};e.prototype.getDestinations=function(a){var d=b.$form.find(".gcw-threepp-origin-input"),c=b.$form.find(".gcw-threepp-destination-input");d.length&&d.val()?(d=b.url+"\x26q\x3dd\x26p\x3d"+d.val(),f.ajax({dataType:"json",method:"GET",type:"GET",timeout:1E4,url:d}).done(function(d){var h=[];f.each(d,function(c,a){if(a&&a.name){var d=a.name,b='" data-label\x3d"'+a.name;if(void 0!==a.destinations)if(1<a.destinations.length){var e=a.destinations.map(function(c){return c.durations}).sort(function(c,a){return a.length-c.length})[0];h.push('\x3coption value\x3d"'+a.code+"|"+e+'" country\x3d"'+d+b+'" class\x3d"region"\x3e'+a.name+"\x3c/option\x3e");f.each(a.destinations,function(c,a){h.push('\x3coption country\x3d"'+d+('" data-label\x3d"'+a.name)+'" value\x3d"'+a.code+"|"+a.durations+"|"+a.hotels+'"\x3e - '+a.name+"\x3c/option\x3e")})}else h.push('\x3coption value\x3d"'+a.code+"|"+a.destinations[0].durations+"|"+a.destinations[0].hotels+'" country\x3d"'+d+b+'" class\x3d"region"\x3e'+a.name+" ("+a.destinations[0].name+")\x3c/option\x3e");else h.push('\x3coption value\x3d"'+a.code+'|3,7,14" country\x3d"'+d+b+'" class\x3d"region"\x3e'+a.name+"\x3c/option\x3e")}});0<h.length&&(c.html(h.join("")),a&&(b.loadValueFromLocalStorage(c),b.getDurationAndHotels(a)))})):c.children().first().prop("selected",!0)};e.prototype.getHotels=function(a){var d=b.$form.find(".gcw-threepp-destination-input");d.length&&d.val()&&(d=d.val().split("|"),2<d.length&&f.ajax({dataType:"json",method:"GET",type:"GET",timeout:1E4,url:b.url+"\x26q\x3dh\x26p\x3d"+d[2]}).done(function(c){var d=[];f.each(c,function(c,a){a&&a.code&&a.name&&d.push('\x3coption value\x3d"'+a.code+'"\x3e'+b.toTitleCase(a.name)+"\x3c/option\x3e")});0<d.length&&(c=b.$form.find(".gcw-threepp-hotels-select"),c.html(c.children().first()),c.append(d.join("")),a&&b.loadValueFromLocalStorage(c))}))};e.prototype.getDuration=function(a){var d=b.$form.find(".gcw-threepp-destination-input");if(d.length&&d.val()&&(d=d.val().split("|"),1<d.length)){d=d[1];var c=d.split(",");if(f.isArray(c)&&"3,7,14"!==d){var h=b.$form.find(".gcw-threepp-duration-select");h.children().addClass("gcw-disabled");f.each(c,function(c,a){h.find("option[value\x3d"+a+"]").removeClass("gcw-disabled")});h.find("option[value\x3d7]").hasClass("gcw-disabled")?h.find("option:not(.gcw-disabled)").first().prop("selected","selected"):h.val("7");a&&b.loadValueFromLocalStorage(h)}else b.resetDuration(a)}};e.prototype.resetHotels=function(){var a=b.$form.find(".gcw-threepp-hotels-select");a.html(a.children().first());a.children().first().prop("selected",!0)};e.prototype.resetDuration=function(a){var d=b.$form.find(".gcw-threepp-duration-select");d.children().removeClass("gcw-disabled");d.find("option[value\x3d1]").addClass("gcw-disabled");d.find("option[value\x3d2]").addClass("gcw-disabled");a?b.loadValueFromLocalStorage(d):d.val("7")};e.prototype.toTitleCase=function(a){return a.replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()})};e.prototype.loadValueFromLocalStorage=function(a){if(b.storedData&&!b.ignoreSavedFormData){var d=a.data("gcw-storeable-name");(d=b.storedData[d])&&a.val(d)}};return e});define("GcwCarsDataPreloadingFunctions",["classCheck","jquery","uitk","xdate"],function(g,f,e,b){function a(c,b){g(this,a);d=this;d.$form=c;d.storedData=b}var d;a.prototype.init=function(){d.carRentalHintText(d.$form.data("siteid"))};a.prototype.carRentalHintText=function(c){var a=d.$form.find(".car-rental-hint-text"),b=a.data("hint-order");0<a.length&&b&&(c=d.getValuesByPOS(c),d.phValue=a.attr("placeholder"),d.pickingUpInput=a,d.values=c,d.order=b,d.cycleDelayMillis=2E3,d.placeholderNext=0,d.intervalId=setInterval(d.cyclePlaceholderHelper.bind(null,a,c,b),d.cycleDelayMillis),d.$form.on("focus",".car-rental-hint-text",function(c){d.stopPlaceholderCycle();d.updateInputPlaceholder(d.pickingUpInput,d.phValue)}),d.$form.on("blur",".car-rental-hint-text",function(c){d.stopPlaceholderCycle();d.placeholderNext=0;d.intervalId=setInterval(d.cyclePlaceholderHelper.bind(null,d.pickingUpInput,d.values,d.order),d.cycleDelayMillis)}))};a.prototype.getValuesByPOS=function(c){c=d.$form.find(".pos"+c).val().split(";");var a;for(a=0;a<c.length;a++)c[a]="Try “"+c[a]+"”";return c};a.prototype.cyclePlaceholderHelper=function(a,b,e){d.updateInputPlaceholder(a,d.getPlaceholderText(b));d.placeholderNext=d.getNextPlaceholderIndex(b.length,e)};a.prototype.updateInputPlaceholder=function(a,d){a.attr("placeholder",d)};a.prototype.getPlaceholderText=function(a){return d.placeholderNext===a.length?d.phValue:a[d.placeholderNext]};a.prototype.getNextPlaceholderIndex=function(a,b){if("fixed"===b)return(d.placeholderNext+1)%(a+1);for(var c=Math.floor(Math.random()*(a+1));c===d.placeholderNext;)c=Math.floor(Math.random()*(a+1));return c};a.prototype.stopPlaceholderCycle=function(){clearInterval(d.intervalId)};return a});
define("gcwDateFieldParser",["uitk_localized_dateApi"],function(){function g(f){f&&(f.setHours(0),f.setMinutes(0),f.setSeconds(0));return f}return{parseDateField:function(f){var e=f.closest('[data-control \x3d "datepicker"]');f=f.closest("label");var b=g(uitk.datePickerCalendarObj.getDateFromString(e.find("input").val(),!0)),a=e.attr("data-first-valid-date")||uitk.datePickerCalendarObj.toStringFromDate(new Date),d=g(uitk.datePickerCalendarObj.getDateFromString(a,!0)),c=e.attr("data-last-valid-date"),h=g(uitk.datePickerCalendarObj.getDateFromString(c,!0));e={$div:e,$label:f,errorMessages:[],date:b,options:{pairedStartFieldId:e.data("start-date"),pairedEndFieldId:e.data("end-date"),datePickerType:"singleDate",firstValidDate:d,lastValidDate:h,firstValidString:a,lastValidString:c,minRangeLength:e.find("input").data("min-range-length"),maxRangeLength:e.data("max-range-length")}};e.options.pairedStartFieldId&&(e.options.datePickerType="endDate",e.options.pairedStartField=$(e.options.pairedStartFieldId),e.options.minRangeLength=e.options.pairedStartField.find("input").data("min-range-length"),e.options.maxRangeLength=e.options.pairedStartField.closest('[data-control \x3d "datepicker"]').data("max-range-length"));e.options.pairedEndFieldId&&(e.options.datePickerType="startDate",e.options.pairedEndField=$(e.options.pairedEndFieldId));return e},convertToDateFromString:function(f){f.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):[0-9]{2}\.[0-9]{3}Z$/)?(f=new Date(f),f.setTime(f.getTime()+6E4*f.getTimezoneOffset())):f=uitk.datePickerCalendarObj.getDateFromString(f,!0);return f},localizedDateFromStorage:function(f){return f.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):[0-9]{2}\.[0-9]{3}Z$/)?uitk.utils.createLocalizedISODate(f.substring(0,10),uitk.locale).shortDate({pad:!0}):f}}});define("gcwDateFieldValidations",["xdate"],function(g){function f(e,b,a,d,c){return{fieldId:e,msgId:b,strParams:d,valid:a,hideMessage:c}}return{gcw_is_valid_date:function(e,b,a){b=e.date;e=a.attr("id");a=a.attr("placeholder");b=null!==b&&"undefined"!==typeof b&&"invalid date"!==(new g(b))[0].toString().toLowerCase();return f(e,"gcw_is_valid_date",b,a)},gcw_date_range:function(e,b,a){b=!0;var d=[];a=a.attr("id");if(e.options.firstValidDate&&e.options.lastValidDate){var c=e.options.lastValidDate;e.options.firstValidDate<=e.date&&e.date<=c||(b=!1,d=[uitk.datePickerCalendarObj.toStringFromDate(e.options.firstValidDate),uitk.datePickerCalendarObj.toStringFromDate(e.options.lastValidDate)])}return f(a,"gcw_date_range",b,d)},gcw_max_date:function(e,b,a){b=!0;a=a.attr("id");e.options.lastValidDate&&e.date>e.options.lastValidDate&&(b=!1);return f(a,"gcw_max_date",b,[e.options.lastValidString])},gcw_min_date:function(e,b,a){b=!0;a=a.attr("id");e.options.firstValidDate&&e.date<e.options.firstValidDate&&(b=!1);return f(a,"gcw_min_date",b,[e.options.firstValidString])},gcw_min_range:function(e,b,a){var d=!0,c=!1;a=a.attr("id");if("startDate"===e.options.datePickerType||"endDate"===e.options.datePickerType)if(e.options.pairedEndFieldId||e.options.pairedStartFieldId)d=b.$form.find(e.options.pairedEndFieldId||e.options.pairedStartFieldId).find("input"),b=b.gcwForm.getDateFromString(d.val()),d=b-e.date,"startDate"===e.options.datePickerType&&(c=!0),"endDate"===e.options.datePickerType&&(d=e.date-b),d=d/1E3/60/60/23>=e.options.minRangeLength?!0:!1;return f(a,"gcw_min_range",d,[e.options.minRangeLength],c)},gcw_max_range:function(e,b,a){var d=a.data("gcw-max-range-error")?a.data("gcw-max-range-error"):"gcw_max_range",c=!0,h=!1,n=a.attr("id");if(e.options.maxRangeLength&&(e.options.pairedEndFieldId||e.options.pairedStartFieldId)){c=b.$form.find(e.options.pairedEndFieldId||e.options.pairedStartFieldId).find("input");c=b.gcwForm.getDateFromString(c.val());var q=c-e.date;"startDate"===e.options.datePickerType&&(h=!0);"endDate"===e.options.datePickerType&&(q=e.date-c);c=q/1E3/60/60/24;q=0;var l=[" "];if(0<b.$form.find("[name\x3dfh-subNav]").length&&a.attr("class"))for(l=a.attr("class").split(" "),q=0;q<l.length&&"package-departing-hp-package-validation"!==l[q];q++);c="package-departing-hp-package-validation"===l[q]&&document.getElementById("flight-type-one-way-hp-package").checked?!0:c<=e.options.maxRangeLength?!0:!1}return f(n,d,c,[e.options.maxRangeLength],h)},gcw_date_range_one_way:function(e,b,a){b=!0;var d=[];a=a.attr("id");!e.options.oneWayCheck||e.options.departingDate<=e.date||(b=!1,d=[uitk.datePickerCalendarObj.toStringFromDate(e.options.departingDate)]);return f(a,"gcw_date_range_one_way",b,d)}}});
define("gcwDatePickerOverrides",["uitk","uitk_datepicker"],function(g,f){return{setConfig:function(e,b){var a={1:{en_US:{calendarDateFormat:"mmddyy",calendarDateSeparator:"/",startDayOfTheWeek:0,calendarMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"},es_MX:{calendarDateFormat:"mmddyy",calendarDateSeparator:"/",startDayOfTheWeek:1,calendarMonths:"Ene Feb Mar Abr May Jun Jul Ago Sep Oct Nov Dic".split(" "),daysOfTheWeek:"DLMMJVS".split(""),closeLink:"Cerrar"},zh_CN:{calendarDateFormat:"mmddyy",calendarDateSeparator:"/",startDayOfTheWeek:0,calendarMonths:"一月 二月 三月 四月 五月 六月 七月 八月 九月 十月 十一月 十二月".split(" "),daysOfTheWeek:"日一二三四五六".split(""),closeLink:"关闭"}},3:{en_GB:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:1,calendarMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"}},4:{en_CA:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:0,calendarMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"},fr_CA:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:0,calendarMonths:"JAN FÉV MAR AVR MAI JUN JUL AOÛ SEP OCT NOV DÉC".split(" "),daysOfTheWeek:"DLMMJVS".split(""),closeLink:"Fermer"}},6:{de_DE:{calendarDateFormat:"ddmmyy",calendarDateSeparator:".",startDayOfTheWeek:1,calendarMonths:"Jan Feb Mär Apr Mai Jun Jul Aug Sep Okt Nov Dez".split(" "),daysOfTheWeek:"SMDMDFS".split(""),closeLink:"Schließen"}},8:{it_IT:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:1,calendarMonths:"GEN FEB MAR APR MAG GIU LUG AGO SET OTT NOV DIC".split(" "),daysOfTheWeek:"DLMMGVS".split(""),closeLink:"Chiudi"}},9:{es_ES:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:1,calendarMonths:"Ene Feb Mar Abr May Jun Jul Ago Sep Oct Nov Dic".split(" "),daysOfTheWeek:"DLMMJVS".split(""),closeLink:"Cerrar"}},11:{nl_NL:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"-",startDayOfTheWeek:1,calendarMonths:"JAN FEB MRT APR MEI JUN JUL AUG SEP OKT NOV DEC".split(" "),daysOfTheWeek:"ZMDWDVZ".split(""),closeLink:"Sluiten"}},12:{es_MX:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:1,calendarMonths:"Ene Feb Mar Abr May Jun Jul Ago Sep Oct Nov Dic".split(" "),daysOfTheWeek:"DLMMJVS".split(""),closeLink:"Cerrar"}},14:{en_SG:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:0,calendarMonths:"JAN FEB MAR APR MAY JUN JUL AUG SEP OCT NOV DEC".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"}},15:{en_MY:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:1,calendarMonths:"JAN FEB MAR APR MAY JUN JUL AUG SEP OCT NOV DEC".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"}},16:{en_US:{calendarDateFormat:"yymmdd",calendarDateSeparator:".",startDayOfTheWeek:0,calendarMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"},ko_KR:{calendarDateFormat:"yymmdd",calendarDateSeparator:".",startDayOfTheWeek:0,calendarMonths:"1월 2월 3월 4월 5월 6월 7월 8월 9월 10월 11월 12월".split(" "),daysOfTheWeek:"일월화수목금토".split(""),closeLink:"닫기"}},17:{en_GB:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:1,calendarMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"},th_TH:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:1,calendarMonths:"ม.ค. ก.พ. มี.ค. เม.ย. พ.ค. มิ.ย. ก.ค. ส.ค. ก.ย. ต.ค. พ.ย. ธ.ค.".split(" "),daysOfTheWeek:"อา. จ. อ. พ. พฤ. ศ. ส.".split(" "),closeLink:"ปิด"}},18:{en_HK:{calendarDateFormat:"yymmdd",calendarDateSeparator:"/",startDayOfTheWeek:0,calendarMonths:"JAN FEB MAR APR MAY JUN JUL AUG SEP OCT NOV DEC".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"},zh_CN:{calendarDateFormat:"yymmdd",calendarDateSeparator:"/",startDayOfTheWeek:0,calendarMonths:"一月 二月 三月 四月 五月 六月 七月 八月 九月 十月 十一月 十二月".split(" "),daysOfTheWeek:"日一二三四五六".split(""),closeLink:"关闭"},zh_HK:{calendarDateFormat:"yymmdd",calendarDateSeparator:"/",startDayOfTheWeek:0,calendarMonths:"一月 二月 三月 四月 五月 六月 七月 八月 九月 十月 十一月 十二月".split(" "),daysOfTheWeek:"日一二三四五六".split(""),closeLink:"關閉"}},20:{fr_FR:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:1,calendarMonths:"JAN FÉV MAR AVR MAI JUN JUL AOU SEP OCT NOV DEC".split(" "),daysOfTheWeek:"DLMMJVS".split(""),closeLink:"Fermer"}},25:{en_AU:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:1,calendarMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"}},27:{en_GB:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:1,calendarMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"}},28:{en_US:{calendarDateFormat:"yymmdd",calendarDateSeparator:"/",startDayOfTheWeek:0,calendarMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"},ja_JP:{calendarDateFormat:"yymmdd",calendarDateSeparator:"/",startDayOfTheWeek:0,calendarMonths:"1月;2月;3月;4月;5月;6月;7月;8月;9月;10月 ;11月;12月".split(";"),daysOfTheWeek:"日;月;火;水 ;木;金;土".split(";"),closeLink:"閉じる"}},29:{en_AU:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:1,calendarMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"}},61:{en_GB:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:1,calendarMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"},id_ID:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:0,calendarMonths:"Jan Feb Mar Apr Mei Jun Jul Agu Sep Okt Nov Des".split(" "),daysOfTheWeek:"MSSRKJS".split(""),closeLink:"Tutup"}},62:{en_US:{calendarDateFormat:"yymmdd",calendarDateSeparator:"/",startDayOfTheWeek:0,calendarMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"},zh_TW:{calendarDateFormat:"yymmdd",calendarDateSeparator:"/",startDayOfTheWeek:0,calendarMonths:"一月 二月 三月 四月 五月 六月 七月 八月 九月 十月 十一月 十二月".split(" "),daysOfTheWeek:"日一二三四五六".split(""),closeLink:"關閉"}},63:{en_IE:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:1,calendarMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"}},64:{fr_BE:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:1,calendarMonths:"JAN FEV MAR AVR MAI JUN JUL AOU SEP OCT NOV DEC".split(" "),daysOfTheWeek:"DLMMJVS".split(""),closeLink:"Fermer"},nl_BE:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:1,calendarMonths:"JAN FEB MRT APR MEI JUN JUL AUG SEP OKT NOV DEC".split(" "),daysOfTheWeek:"ZMDWDVZ".split(""),closeLink:"Sluiten"}},65:{sv_SE:{calendarDateFormat:"yymmdd",calendarDateSeparator:"-",startDayOfTheWeek:1,calendarMonths:"JAN FEB MAR APR MAJ JUN JUL AUG SEP OKT NOV DEC".split(" "),daysOfTheWeek:"SMTOTFL".split(""),closeLink:"Stäng"}},66:{nb_NO:{calendarDateFormat:"ddmmyy",calendarDateSeparator:".",startDayOfTheWeek:0,calendarMonths:"JAN FEB MAR APR MAI JUN JUL AUG SEP OKT NOV DES".split(" "),daysOfTheWeek:"SMTOTFL".split(""),closeLink:"Lukk"}},67:{da_DK:{calendarDateFormat:"ddmmyy",calendarDateSeparator:".",startDayOfTheWeek:1,calendarMonths:"JAN FEB MAR APR MAJ JUN JUL AUG SEP OKT NOV DEC".split(" "),daysOfTheWeek:"SMTOTFL".split(""),closeLink:"Luk"}},68:{en_PH:{calendarDateFormat:"mmddyy",calendarDateSeparator:"/",startDayOfTheWeek:0,calendarMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"}},69:{pt_BR:{calendarDateFormat:"ddmmyy",
calendarDateSeparator:"/",startDayOfTheWeek:1,calendarMonths:"JAN FEV MAR ABR MAI JUN JUL AGO SET OUT NOV DEZ".split(" "),daysOfTheWeek:"DSTQQSS".split(""),closeLink:"Fechar"}},70:{es_AR:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:1,calendarMonths:"Ene Feb Mar Abr May Jun Jul Ago Sep Oct Nov Dic".split(" "),daysOfTheWeek:"DLMMJVS".split(""),closeLink:"Cerrar"}},71:{vi_VN:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:0,calendarMonths:"Tháng 1;Tháng 2;Tháng 3;Tháng 4;Tháng 5;Tháng 6;Tháng 7;Tháng 8;Tháng 9;Tháng 10;Tháng 11;Tháng 12".split(";"),daysOfTheWeek:"CN T2 T3 T4 T5 T6 T7".split(" "),closeLink:"Đóng"}},72:{de_CH:{calendarDateFormat:"ddmmyy",calendarDateSeparator:".",startDayOfTheWeek:1,calendarMonths:"JAN FEB MÄR APR MAI JUN JUL AUG SEP OKT NOV DEZ".split(" "),daysOfTheWeek:"SMDMDFS".split(""),closeLink:"Schließen"},fr_CH:{calendarDateFormat:"ddmmyy",calendarDateSeparator:".",startDayOfTheWeek:1,calendarMonths:"JAN FÉV MAR AVR MAI JUN JUL AOU SEP OCT NOV DEC".split(" "),daysOfTheWeek:"DLMMJVS".split(""),closeLink:"Fermer"}},73:{fi_FI:{calendarDateFormat:"ddmmyy",calendarDateSeparator:".",startDayOfTheWeek:1,calendarMonths:"tammikuu helmikuu maaliskuu huhtikuu toukokuu kesäkuu heinäkuu elokuu syyskuu lokakuu marraskuu joulukuu".split(" "),daysOfTheWeek:"Su Ma Ti Ke To Pe La".split(" "),closeLink:"Sulje"}},75:{zh_CN:{calendarDateFormat:"yymmdd",calendarDateSeparator:"/",startDayOfTheWeek:0,calendarMonths:"一月 二月 三月 四月 五月 六月 七月 八月 九月 十月 十一月 十二月".split(" "),daysOfTheWeek:"日一二三四五六".split(""),closeLink:"关闭"}},70125:{en_AU:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:1,calendarMonths:"JAN FEB MAR APR MAY JUN JUL AUG SEP OCT NOV DEC".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"}},70129:{en_AU:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:1,calendarMonths:"JAN FEB MAR APR MAY JUN JUL AUG SEP OCT NOV DEC".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"}},70150:{en_AU:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:1,calendarMonths:"JAN FEB MAR APR MAY JUN JUL AUG SEP OCT NOV DEC".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"}},70151:{en_AU:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:1,calendarMonths:"JAN FEB MAR APR MAY JUN JUL AUG SEP OCT NOV DEC".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"}},70201:{en_US:{calendarDateFormat:"mmddyy",calendarDateSeparator:"/",startDayOfTheWeek:0,calendarMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"},es_MX:{calendarDateFormat:"mmddyy",calendarDateSeparator:"/",startDayOfTheWeek:1,calendarMonths:"Ene Feb Mar Abr May Jun Jul Ago Sep Oct Nov Dic".split(" "),daysOfTheWeek:"DLMMJVS".split(""),closeLink:"Cerrar"}},70301:{en_US:{calendarDateFormat:"mmddyy",calendarDateSeparator:"/",startDayOfTheWeek:0,calendarMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"}},70403:{en_GB:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:1,calendarMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"}},70406:{de_DE:{calendarDateFormat:"ddmmyy",calendarDateSeparator:".",startDayOfTheWeek:1,calendarMonths:"JAN FEB MÄR APR MAI JUN JUL AUG SEP OKT NOV DEZ".split(" "),daysOfTheWeek:"SMDMDFS".split(""),closeLink:"Schließen"}},70420:{fr_FR:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:1,calendarMonths:"JAN FÉV MAR AVR MAI JUN JUL AOU SEP OCT NOV DEC".split(" "),daysOfTheWeek:"DLMMJVS".split(""),closeLink:"Fermer"}},70463:{en_IE:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:1,calendarMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"}},70465:{sv_SE:{calendarDateFormat:"yymmdd",calendarDateSeparator:"-",startDayOfTheWeek:1,calendarMonths:"JAN FEB MAR APR MAJ JUN JUL AUG SEP OKT NOV DEC".split(" "),daysOfTheWeek:"SMTOTFL".split(""),closeLink:"Stäng"}},70472:{en_GB:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:1,calendarMonths:"JAN FEB MAR APR MAY JUN JUL AUG SEP OCT NOV DEC".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"},de_CH:{calendarDateFormat:"ddmmyy",calendarDateSeparator:".",startDayOfTheWeek:1,calendarMonths:"JAN FEB MÄR APR MAI JUN JUL AUG SEP OKT NOV DEZ".split(" "),daysOfTheWeek:"SMDMDFS".split(""),closeLink:"Schließen"},fr_CH:{calendarDateFormat:"ddmmyy",calendarDateSeparator:".",startDayOfTheWeek:1,calendarMonths:"JAN FÉV MAR AVR MAI JUN JUL AOU SEP OCT NOV DEC".split(" "),daysOfTheWeek:"DLMMJVS".split(""),closeLink:"Fermer"}},70473:{en_GB:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:1,calendarMonths:"JAN FEB MAR APR MAY JUN JUL AUG SEP OCT NOV DEC".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"},fi_FI:{calendarDateFormat:"ddmmyy",calendarDateSeparator:".",startDayOfTheWeek:1,calendarMonths:"tammikuu helmikuu maaliskuu huhtikuu toukokuu kesäkuu heinäkuu elokuu syyskuu lokakuu marraskuu joulukuu".split(" "),daysOfTheWeek:"Su Ma Ti Ke To Pe La".split(" "),closeLink:"Sulje"}},80001:{en_US:{calendarDateFormat:"mmddyy",calendarDateSeparator:"/",startDayOfTheWeek:0,calendarMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"},es_MX:{calendarDateFormat:"mmddyy",calendarDateSeparator:"/",startDayOfTheWeek:1,calendarMonths:"Ene Feb Mar Abr May Jun Jul Ago Sep Oct Nov Dic".split(" "),daysOfTheWeek:"DLMMJVS".split(""),closeLink:"Cerrar"}},80004:{en_CA:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:0,calendarMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"},fr_CA:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:0,calendarMonths:"jan fév mar avr mai jun jul aoû sep oct nov déc".split(" "),daysOfTheWeek:"DLMMJVS".split(""),closeLink:"Fermer"}},4401:{en_US:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:0,calendarMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"}},4402:{en_US:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:0,calendarMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"}},4403:{es_MX:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:1,calendarMonths:"Ene Feb Mar Abr May Jun Jul Ago Sep Oct Nov Dic".split(" "),daysOfTheWeek:"DLMMJVS".split(""),closeLink:"Cerrar"},en_US:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:0,calendarMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"}},4404:{es_MX:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"-",startDayOfTheWeek:1,calendarMonths:"Ene Feb Mar Abr May Jun Jul Ago Sep Oct Nov Dic".split(" "),daysOfTheWeek:"DLMMJVS".split(""),closeLink:"Cerrar"},en_US:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:0,calendarMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"}},4405:{es_MX:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:1,calendarMonths:"Ene Feb Mar Abr May Jun Jul Ago Sep Oct Nov Dic".split(" "),daysOfTheWeek:"DLMMJVS".split(""),closeLink:"Cerrar"},en_US:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:0,calendarMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"}},4406:{en_US:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:0,
calendarMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"}},4407:{es_MX:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:1,calendarMonths:"Ene Feb Mar Abr May Jun Jul Ago Sep Oct Nov Dic".split(" "),daysOfTheWeek:"DLMMJVS".split(""),closeLink:"Cerrar"},en_US:{calendarDateFormat:"ddmmyy",calendarDateSeparator:"/",startDayOfTheWeek:0,calendarMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),daysOfTheWeek:"SMTWTFS".split(""),closeLink:"Close"}}}[e];if(a&&(a=a[b],"undefined"!==typeof g.datePickerCalendarObj&&a)){var d=g.datePickerCalendarObj.config;d.setFormatConfig(a.calendarDateFormat,a.calendarDateSeparator);d.setUnitConfig(a.startDayOfTheWeek,a.calendarMonths,a.daysOfTheWeek);d.setTextConfig(a.closeLink)}}}});require("uitk",function(g){function f(){for(var d=a,c=d.length,b,e;0!==c;)e=Math.floor(Math.random()*c),--c,b=d[c],d[c]=d[e],d[e]=b;return d.slice(0,5)}function e(){a=f();var d="";a.forEach(function(a,c){d=d+"\x3cli\x3e \x3cspan class\x3d'icon icon-search' aria-hidden\x3dtrue' style\x3d' padding-right: 10px'\x3e\x3c/span\x3e"+a});var c=$(".opensearch-education-examples");c.empty();c.append(d);b()}function b(){var a=$(".opensearch-education-examples \x3e li");$(a).each(function(a){var c=$(this);setTimeout(function(){c.addClass("opensearch-education-slideIn")},200*a)})}var a="check my itinerary;all inclusive vacations to mexico;airport shuttles at lax;things to do in chicago;pet friendly hotels in san francisco;summer break deals in the bahamas;shows in vegas this weekend;walking tours in paris;top beach destinations;travel insurance;car service in new york;disney vacations;cancel reservation;member deals in orlando;confirm flight;last minute deals to vancouver;hawaiian vacation packages;customer service phone number;attractions in london;price alerts on flights;family cruises;adventures in seattle;multiple destination flights;hotels with pools in phoenix".split(";");g.subscribe("tab.selected",function(a,c){"openSearch"===c.find("button").data("lob")&&e()});e()});define("gcwFieldValidations",["gcwDateFieldValidations","gcwDateFieldParser"],function(g,f){function e(a,c,b,e,q){return{fieldId:a,msgId:c,valid:b,strParams:e,hideMessage:q}}function b(a,c,b){var d=[],h=a.closest('[data-control \x3d "datepicker"]').find("input").val();if(!0!==b||""!==h){b=f.parseDateField(a);for(var e in g)h=g[e](b,c,a),!1===h.valid&&d.push(h)}return d}function a(a){return/^(-|\+)?([0-9]+|Infinity)$/.test(a)?Number(a):NaN}return{utils:{returnValue:e,isValidDate:b,filterInt:a},gcw_required:function(a,c){var d="flight"===c.gcwForm.$lobTab.data("lob"),b=c.$form.find(".gcw-multidest-flights-container").is(":visible"),f=a.data("gcw-field-type"),l=a.attr("id"),g=a.data("gcw-required-field-custom-error-message")?a.data("gcw-required-field-custom-error-message"):"gcw_requiredFieldErrorMessage";if(d){if(b)if(a.hasClass("gcw-origin")){g="gcw_multiDestOriginErrorMessage";var p="1"}else a.hasClass("gcw-destination")?(g="gcw_multiDestErrorDestinationMessage",p="1"):a.hasClass("gcw-start-date")&&(g="gcw_multiDestDateErrorMessage",p=["1",a.attr("placeholder")]);else a.hasClass("gcw-origin")?(g="gcw_originErrorMessage",p=""):a.hasClass("gcw-destination")?(g="gcw_destinationErrorMessage",p=""):a.hasClass("gcw-start-date")?(g="gcw_departureDateErrorMessage",p=a.attr("placeholder")):a.hasClass("gcw-end-date")&&(g="gcw_returnDateErrorMessage",p=a.attr("placeholder"));if(0===a.val().length)return e(l,g,!1,p)}else if(0===a.val().length)return f?e(l,g,!1,f):e(l,g,!1);return e(l,g,!0)},gcw_driverAgeRequired:function(a){var c=a.attr("id");return 0===a.val().length?e(c,"gcw_driver_age_blank",!1):e(c,"gcw_driver_age_blank",!0)},gcw_isValidDriverAge:function(d){var c=d.attr("id");d=d.val();return(d=a(d))&&17<d&&100>d?e(c,"gcw_driver_age_invalid",!0):e(c,"gcw_driver_age_invalid",!1)},gcw_distinct_locations:function(a,c){var d=a.data("gcw-distinct-locations-custom-error-message")?a.data("gcw-distinct-locations-custom-error-message"):"gcw_distinct_locations",b=c.$form.find(".gcw-origin:visible, .gcw-destination:visible"),f=0,l=b.length,g=a.attr("id"),p=!0,r=!1;for(f;f<l;f++){var t=$(b[f]);if(t.attr("id")===g){var u=f;break}}0<(u+1)%2?(b=$(b[u+1]),g=b.attr("id")):(b=$(b[u-1]),r=!0);""===a.val()?p=!0:a.val()===b.val()&&(p=!1);return e(g,d,p,void 0,r)},gcw_valid_date:function(a,c,h){return b(a,c,h)},gcw_valid_date_or_empty:function(a,c){return b(a,c,!0)},gcw_multidest_date:function(a,c){var d,b;var f=c.$form.find(".datepicker-trigger-input:visible");var l=a.attr("id"),g=a.closest('[data-control \x3d "datepicker"]');g=c.gcwForm.getDateFromString(g.find("input").val());for(b=0;b<f.length;b++){var p=$(f[b]);l===p.attr("id")&&(d=b)}d=$(f[d-1]);if(""===g||null===g)return e(l,"gcw_multidest_date",!0);f=d.val();b=c.gcwForm.getDateFromString(f);return 0<d.length&&null!==b&&!d.closest("label").hasClass("invalid")&&g<b?e(l,"gcw_min_date",!1,[f]):e(l,"gcw_multidest_date",!0,[f])},gcw_flight_hotel_date:function(a,c){var d=a.attr("id"),b=c.gcwForm.getKeyParameter(),f=c.$form.find("#flight-departing"+b);b=c.$form.find("#flight-returning"+b);f=c.gcwForm.getDateFromString(f.val());b=c.gcwForm.getDateFromString(b.val());f={date:c.gcwForm.getDateFromString(a.val()),options:{firstValidDate:f,lastValidDate:b}};b=g.gcw_date_range;return""===a.val()?e(d,"gcw_date_range",!0):b(f,c,a)},gcw_option_selected_from_TA:function(a,c){var b=a.attr("id"),d=a.closest("div").parent().find("input[type\x3dhidden]"),f=a.data("gcw-observed-uta-feature");d=0<d.length?d.filter('input[id*\x3d"'+f+'"]'):"";f=a.data("gcw-option-selected-from-ta-custom-error-message")?a.data("gcw-option-selected-from-ta-custom-error-message"):a.hasClass("gcw-destination")?"gcw_rails_destination_from_TA":"gcw_rails_origin_from_TA";var l=!0;0<d.length&&""===d.val()&&(l=!1);return e(b,f,l)},gcw_flight_hotel_one_way_date:function(a,c){var b=a.attr("id"),d=c.gcwForm.getKeyParameter();d=0<c.$form.find("[name\x3dfh-subNav]").length&&"-hp-package"===d?c.$form.find("#package-departing"+d):c.$form.find("#flight-departing-single"+d);d=c.gcwForm.getDateFromString(d.val());d={date:c.gcwForm.getDateFromString(a.val()),options:{oneWayCheck:!0,departingDate:d}};var f=g.gcw_date_range_one_way;return""===a.val()?e(b,"gcw_is_valid_date",!1):f(d,c,a)}}});
define("gcwField",["uitk","jquery","gcwFieldValidations"],function(g,f,e){return function(b,a){var d=this;d.gcwForm=b;d.$form=d.gcwForm.form;d.$field=a;d.$label=a.closest("label");d.$input=a.find("input");d.validations=e;d.errors=[];"INPUT"===d.$field.prop("nodeName")&&(d.$input=a);d.isActive=function(){return 0<d.$field.parents(".toggle-pane").length?0===d.$field.parents(".gcw-disabled").length&&!d.$field.hasClass("gcw-disabled")&&0<d.$field.parents(".open").length:"hidden"===d.$field.attr("type")?0<d.$field.val().length&&0===d.$field.parents(".gcw-disabled").length:0===d.$field.parents(".gcw-disabled").length&&!d.$field.hasClass("gcw-disabled")};d.validate=function(){var c=!1;d.clearErrors();for(var b in d.validations){var e=d.validations[b],g=b.replace(/_/g,"-");if(d.$field.hasClass(g)&&(e=e(a,d),f.isArray(e)||(e=[e]),f.each(e,function(){if(!this.valid)return d.errors.push(this),c=!0,!1}),c))break}d.mark();return d.errors};d.clearErrors=function(){d.errors=[]};d.mark=function(){0<d.errors.length?(d.$label.addClass("invalid"),0<d.$form.find("[name\x3dfh-subNav]").length&&("package-checkin-hp-package"===d.$field.attr("id")||"package-checkout-hp-package"===d.$field.attr("id")||"package-returning-hp-package"===d.$field.attr("id"))&&f("."+d.$field.attr("id")+"-label").addClass("invalid"),d.$input.attr("aria-invalid","true")):(d.$label.removeClass("invalid"),d.$input.attr("aria-invalid","false"),0<d.$form.find("[name\x3dfh-subNav]").length&&("package-checkin-hp-package"===d.$field.attr("id")||"package-checkout-hp-package"===d.$field.attr("id")||"package-returning-hp-package"===d.$field.attr("id"))&&f("."+d.$field.attr("id")+"-label").removeClass("invalid"))};return d}});define("gcwFieldsCollection",["jquery","gcwField"],function(g,f){return function(e){var b=this;b.$form=e;b.fields=[];b.add=function(a){b.fields.push(new f(b.$form,a))};b.remove=function(a){for(var d=0;d<b.fields.length;d++)b.fields[d].$field[0].isEqualNode(a[0])&&b.fields.splice(d,1)};b.getActiveFields=function(){for(var a=[],d=0;d<b.fields.length;d++){var c=b.fields[d];c.isActive()&&!c.$field.hasClass("gcw-show-disabled")?(a.push(c),c.$field.attr("disabled",!1)):c.$field.attr("disabled",!0)}return a};b.enableInactiveFields=function(){for(var a in b.fields){var d=b.fields[a];d.isActive()||d.$field.hasClass("gcw-show-disabled")||d.$field.attr("disabled",!1)}};b.getErrorState=function(){for(var a=0,d=[],c=b.getActiveFields(),h=0;h<c.length;h++){var e=c[h].validate();0<e.length&&(a++,d.push(e))}return{numFieldErrors:a,badFields:d}}}});define("gcwFormLogic",["jquery","gcwDatePickerOverrides","gcwTabsLogic","gcwForm","gcw-store-form-data-controller"],function(g,f,e,b,a){return function(){var d=this;d.gcwForms={};var c=a.canTrack;d.init=function(){var a=!c,n=g("[data-initial-tab]:first").data("lob");d.attachLobDataToBody(n);var q=0<g("meta[name\x3dgcw_stored_data_per_locale][value\x3dtrue]").length;n=0>=g("meta[name\x3dgcw_use_datepicker_overrides]").length||0<g("meta[name\x3dgcw_use_datepicker_overrides][value\x3dtrue]").length;var l=0<g("meta[name\x3dignoreLastSearchLobTab][value\x3dtrue]").length;n&&f.setConfig(window.tpid,window.locale);window.GcwForm=b;g(".gcw-form").each(function(){var c=new b(g(this),g(this).data("gcw-datapreloading-function"),g(this).data("gcw-processing-function"),g(this).data("gcw-controller"),a,q),h=g(this).data("lob-form");h||(h="unidentified");h in d.gcwForms||(d.gcwForms[h]=[]);d.gcwForms[h].push(c)});g.isEmptyObject(d.gcwForms)||(window.forms=d.gcwForms,define("gcwFormsInstances",function(){return d.gcwForms}));l||e.selectLastSearchLobTab(a,q,window.locale)};d.handleLobChange=function(a){var c=b.getCurrentActiveForm(d.gcwForms);g.each(c,function(a,c){c.setCurrentState()});if(a&&0<a.length){c={};var h={};a in d.gcwForms&&(c[a]=d.gcwForms[a],b.setFormsStatus(c),h=b.getCurrentActiveForm(c));0<h.length&&h[0].initForm()}};d.attachLobDataToBody=function(a){g("body").attr("data-lob-tab",a)};return d}});require("uitk_domReady jquery uitk gcwFormLogic uitk_init uitk_toggle".split(" "),function(g,f,e,b){window.format.extend(String.prototype);(function(){e.subscribe("launch-config-executed",function(b,c){setTimeout(function(){var c=f(".tabs li button.on:visible").data("lob");if("undefined"===typeof c||0===c.length)c=f("div.wizard-tabs:visible").data("lob");a.handleLobChange(c)},0)});e.subscribe("tab.selected",function(b,c){var d=c.find("button").data("lob");a.handleLobChange(d);a.attachLobDataToBody(d);e.prepFields()});f(".slim-sub-nav-checkbox \x3e .slim-checkbox-container \x3e input").change(function(){var b=f("form:visible").attr("data-lob-form");a.handleLobChange(b)})})();var a=new b;a.init();window.mercuryFormsInitialized=!0;e.publish("mercuryForms.initialized",{});g=f("html");(g.hasClass("safari")||g.hasClass("firefox"))&&f(window).bind("pageshow",function(a){a.originalEvent&&a.originalEvent.persisted&&window.location.reload()})});define("GcwFormSubmission",["gcw-traveler-selector-state"],function(g){var f={submit:function(e,b,a){e.ignoreSavedFormData||(f.storeFormData(e),f.storeCurrentLobTab(e));f.checkTAAPPackageRate(e);b&&b.redirect&&(a.preventDefault(),f.changeWindowLocation(b.url))},storeFormData:function(e){if(e.localStorageEnabled){var b={},a={newHistoryV2:!0},d=e.gcwFormHistory||{},c;e.form.find(".gcw-storeable").each(function(){var b=$(this),h=b.data("gcw-storeable-name");if(!(h in a)&&""!==b.val()){a[h]=b.val();"checkbox"===b.attr("type")&&(a[h]=b.prop("checked")?"1":"0");"radio"===b.attr("type")&&(a[h]=b.is(":checked"));if(b.hasClass("gcw-start-date")||b.hasClass("gcw-end-date")){var n=uitk.datePickerCalendarObj.getDateFromString(b.val(),!0);a[h]=(new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate()))).toISOString()}if(b.hasClass("gcw-travel-selector-wrapper")||b.parents(".gcw-travel-selector-wrapper").length)n=g(void 0).getState(),a["traveler-selector-data"]=n.rooms,c=n.visibleRooms}e.storedDataPerLocale?(d[e.locale]&&d[e.locale].hasOwnProperty(h)&&""!==d[e.locale][h]&&""===b.val()&&delete d[e.locale][h],d[e.locale]&&d[e.locale].hasOwnProperty("traveler-selector-data")&&delete d[e.locale]["traveler-selector-data"]):(d.hasOwnProperty(h)&&""!==d[h]&&""===b.val()&&delete d[h],d.hasOwnProperty("traveler-selector-data")&&delete d["traveler-selector-data"])});c&&(a["gcw-num-rooms"]=c);var h=e.getKeyParameter();if(0<$("#threePP-advanced-options-fields"+h).length){var n=$("#threePP-advanced-options-fields"+h).hasClass("open");window.localStorage.setItem("threePP-advanced-options"+h,n)}e.storedDataPerLocale?(b[e.locale]=a,d=$.isEmptyObject(d)?b:$.extend(!0,d,b)):d=$.isEmptyObject(d)?a:$.extend({},d,a);window.localStorage.setItem("gcw_form_history",JSON.stringify(d))}},storeCurrentLobTab:function(e){var b=$("li.tab button.on");if(0<b.length&&(b=b.data("lob"))){var a=e.form;"package"===b&&(a=a.data("gcw-current-package-type"))&&(b=a);e.localStorageEnabled&&(e.storedDataPerLocale?(a={},a[e.locale]=b):a=b,window.localStorage.setItem("gcw_lob_tab",JSON.stringify(a)))}},checkTAAPPackageRate:function(e){var b=e.form;e=b.find(".gcw-start-date:visible");var a=b.find(".gcw-end-date:visible");b=b.find(".package-rates-checkbox-variant");b.length&&(e.length&&a.length&&b.is(":visible")&&""!==e.val()&&""!==a.val()&&b.prop("checked")?$.ajax({url:"/set3ptcookie",data:{startDate:e.val(),endDate:a.val()},async:!1}):$.ajax({url:"/clear3ptcookie",async:!1}))},changeWindowLocation:function(e){window.location=e}};return f});
define("gcwFormValidations",["xdate","GcwUtilsProcessingFunctions"],function(g,f){function e(a,b,d,e,f,g){return{fieldId:a,msgId:b,strParams:e,valid:d,hideMessage:f,multiErrors:g}}function b(a){if(4<a.length){var c=-1<a.indexOf("PM");var b=parseInt(a.slice(-4,-2));a=parseInt(a.slice(0,-4));c||12!==a?c&&12!==a&&(a+=12):a=0}else b=parseInt(a.slice(2,4)),a=parseInt(a.slice(0,2));return 60*a+b}function a(a,b,d){return""===a&&""===b&&""===d||""!==a&&""!==b&&""!==d?!1:!0}function d(a,b,d){var c=a.closest("label"),h=a.data("gcw-invalid-validation-names");if(!b)c.addClass("invalid"),0<$("[name\x3dfh-subNav]").length&&("package-checkin-hp-package"===a.attr("id")||"package-checkout-hp-package"===a.attr("id"))&&$("."+a.attr("id")+"-label").addClass("invalid"),a.attr("aria-invalid","true"),a.data("gcw-invalid-validation-names",h&&d?h+","+d:d);else if(h&&d)for(h=h.split(","),b=0;b<h.length;b++)if(h[b]===d){d=h;d.splice(b,1);h=d.join();a.data("gcw-invalid-validation-names",h);""===h&&(c.removeClass("invalid"),a.attr("aria-invalid","false"),0<$("[name\x3dfh-subNav]").length&&("package-checkin-hp-package"===a.attr("id")||"package-checkout-hp-package"===a.attr("id"))&&$("."+a.attr("id")+"-label").removeClass("invalid"));break}}return{utils:{returnValue:e,convertStrTimeToMins:b,areSomeFieldsEmpty:a,markField:d},gcw_lessThanNTravelers:function(a){var c=a.form.data("gcw-less-than-n-travelers-custom-error-message")?a.form.data("gcw-less-than-n-travelers-custom-error-message"):"gcw_less_than_n_travelers",b=!0,f=a.form;a=f.data("gcw-max-travelers");f=f.find(".num-adults:visible, .num-children:visible, .num-youth:visible, .num-seniors:visible, .gcw-guests-field-total-travelers:visible");var l=0,g;f.each(function(){l+=parseInt($(this).val())});if(1>l||l>a)b=!1;f.each(function(a,c){g||(g=$(c).attr("id"));d($(c),b,"gcw_lessThanNTravelers")});return e(g,c,b,a)},gcw_lessThanNTravelers_travelerSelector:function(a){var c=a.form.data("gcw-less-than-n-travelers-custom-error-message")?a.form.data("gcw-less-than-n-travelers-custom-error-message"):"gcw_less_than_n_travelers",b=!0,f=a.form,g=f.find(".travel-selector-wrapper:visible");a=g.find("[data-control\x3dmenu]");f=f.data("gcw-max-travelers");var m=g.find(".gcw-traveler-selector-num-children, .gcw-traveler-selector-num-adults");g=g.find(".gcw-child-field").not(".gcw-disabled");var p=0;m.each(function(){p+=parseInt($(this).val()||0)});if(1>p||p>f)b=!1;b?a.removeClass("invalid"):(a.addClass("invalid"),a.uitk_dropDown("open"));g.each(function(a,c){var h=$(c).find("select");d($(h),b,"gcw_lessThanNTravelers_travelerSelector")});return e(void 0,c,b,f)},gcw_railcardsAmount:function(a){var c=a.form.find(".num-adults:visible, .num-children:visible, .num-youth:visible, .num-seniors:visible");a=a.form.find(".gcw-railcard-count-select:visible");var b=0,f=0,g=$(a[0]).attr("id");c.each(function(a,c){b+=parseInt($(c).val())});a.each(function(a,c){f+=parseInt($(c).val())});c=f<=b;d(a,c,"gcw_railcardsAmount");return e(g,"gcw_railscardNumber",c)},gcw_isChildAloneAboveNAge:function(a){var c=a.form;a=parseInt(c.data("rail-age-boundary"));var b=parseInt(c.data("rail-accompanying-age")),f=parseInt(c.find(".num-adults").val()),g=parseInt(c.find(".num-youth").val()),m=parseInt(c.find(".num-seniors").val()),p=c.find(".children-data select:visible");c=c.find(".gcw-child-rails-field.select:visible");var r=!0,t=[],u=[],v;if(0===f&&0===g&&0===m)for(m=0;m<p.length;m++)f=$(p[m]).val(),g=$(c[m]),u.push(parseInt(f)),v||(v=g.find("select").attr("id")),f<=a&&(r=!1,t.push(g)),-1<u.indexOf(b)&&(r=!0);!1===r&&$.each(t,function(a,c){d(c,r,"gcw_isChildAloneAboveNAge")});return e(v,"gcw_isChildAloneAboveNAge",r,[a,b])},gcw_isChildAloneAbove13:function(a){var c=parseInt(a.form.find(".num-adults").val()),b=parseInt(a.form.find(".num-youth").val()),f=parseInt(a.form.find(".num-seniors").val()),g=a.form.find(".children-data select:visible");a=a.form.find(".gcw-child-rails-field.select:visible");for(var m=!0,p,r,t,u=0;u<g.length;u++)p=$(g[u]).val(),r=$(a[u]),t||(t=r.find("select").attr("id")),0===c&&0===b&&0===f&&13>p&&(m=!1,d(r,m,"gcw_isChildAloneAbove13"));return e(t,"gcw_isChildAloneAbove13",m)},gcw_isChildAlone:function(a){var c=parseInt(a.form.find(".num-adults").val()),b=parseInt(a.form.find(".num-children").val());a=parseInt(a.form.find(".num-seniors").val());var d=!0;0<b&&0===c&&0===a&&(d=!1);return e(void 0,"gcw_isChildAlone",d)},gcw_isChildAccompaniedByAdult:function(a){a=this.gcw_isChildAlone(a);return e(void 0,"gcw_isChildAlone",!a.valid)},gcw_timeValidLongEnough:function(a){var c=!0,n=a.form,f=n.find(".gcw-start-date:visible"),l=new g(a.getDateFromString(f.val())),m=n.find(".gcw-end-date:visible"),p=new g(a.getDateFromString(m.val())),r=n.find(".gcw-start-time:visible");a=r.val();var t=n.find(".gcw-end-time:visible"),u=t.val(),v=n.data("gcw-min-hours");n=n.data("gcw-error-msg-id");var w=[],x;w.push(m);w.push(t);w.push(f);w.push(r);void 0!==l&&void 0!==p&&l[0]&&p[0]&&void 0!==a&&void 0!==u&&(f=l.diffDays(p),0===f||1===f)&&(a=b(a),u=b(u),1===f&&(u+=1440),u-a<60*v&&(c=!1,$.each(w,function(a,b){x||(x=b.attr("id"));d(b,c,"gcw_timeValidLongEnough")})));return e(x,n,c)},gcw_isPartialCarDateWithinRange:function(a){var c=!0,b=a.form;var f=new g(a.getDateFromString(b.find(".gcw-start-date:visible").val()));var l=new g(a.getDateFromString(b.find(".gcw-end-date:visible").val()));var m=b.find(".gcw-partial-car-pickup-date").attr("id"),p=b.find(".gcw-partial-car-pickup-date:visible");b=b.find(".gcw-partial-car-dropoff-date:visible");0<p.length&&0<b.length&&""!==p.val()&&""!==b.val()&&(c=new g(a.getDateFromString(p.val())),a=new g(a.getDateFromString(b.val())),f=0<=f.diffDays(c),l=0>l.diffDays(c)&&0>=l.diffDays(a),c=f&&l,f||d(p,c,"gcw_isPartialCarDateWithinRange"),l||d(b,c,"gcw_isPartialCarDateWithinRange"));return e(m,"gcw_packagesPartialCarDateValidationMessage",c)},gcw_isPartialDateWithinRange:function(a){var c=!0,b=a.form,f=new g(a.getDateFromString(b.find(".gcw-start-date:visible").val())),l=new g(a.getDateFromString(b.find(".gcw-end-date:visible").val())),m=b.find(".gcw-partial-start-date").attr("id"),p=b.find(".gcw-partial-start-date:visible");b=b.find(".gcw-partial-end-date:visible");0<p.length&&0<b.length&&""!==p.val()&&""!==b.val()&&(c=new g(a.getDateFromString(p.val())),a=new g(a.getDateFromString(b.val())),c=0<=f.diffDays(c)&&0>l.diffDays(c)&&0>=l.diffDays(a),c||(d(p,c,"gcw_isPartialDateWithinRange"),d(b,c,"gcw_isPartialDateWithinRange")));return e(m,"gcw_packagesPartialDateMessage",c)},gcw_childAgesAllProvided:function(a){var c=a.form.data("gcw-child-ages-all-provided-custom-error-message")?a.form.data("gcw-child-ages-all-provided-custom-error-message"):"gcw_child_ages_all_provided",b=!0;a=a.form;var f=0,g=a.find(".gcw-child-field:visible, .gcw-flights-child-field:visible"),m;a.find(".num-children:visible").each(function(a,c){f+=parseInt($(c).val())});0<f&&0<g.length&&g.each(function(a,c){""===$(c).find("select").val()&&(m||(m=$(c).find("select").attr("id")),b=!1,d($(c),b,"gcw_childAgesAllProvided"))});return e(m,c,b)},gcw_childAgesAllProvided_travelerSelector:function(a){var c=a.form.data("gcw-child-ages-all-provided-custom-error-message")?a.form.data("gcw-child-ages-all-provided-custom-error-message"):"gcw_child_ages_all_provided",b=!0,g=f.retrieveTravelerSelectorPassengersData(a.form);a=g.totalChildrenFields;g=g.$activeTravelerSelector.find("[data-control\x3dmenu]");var l;0<a.length&&$.each(a,function(a,c){""===c.find("select").val()&&(l||(l=c.find("select").attr("id")),b=!1,d(c,b,"gcw_childAgesAllProvided_travelerSelector"))});b?g.removeClass("invalid"):(g.addClass("invalid"),g.uitk_dropDown("open"));return e(l,c,b)},gcw_allFlightsComplete:function(c){var b=c.form,n=$(".gcw-start-date").attr("placeholder"),f=!0,g=[],m=[];c=c.getKeyParameter();for(var p=b.find("[data-gcw-additional-fields]").length,r=0;r<p;r++){var t=b.find("#flight-"+(r+2)+"-origin"+c+":visible");var u=b.find("#flight-"+(r+2)+"-destination"+c+":visible");var v=b.find("#flight-"+(r+2)+"-departing"+
c+":visible");if(0===t.length&&0===u.length&&0===v.length)return f=!0,m=[],e(void 0,void 0,f,void 0,void 0,m);if(a(t.val(),u.val(),v.val())){f=!1;if(!t.val()){var w=t.attr("id");g.push(t);m.push({msgId:"gcw_multiDestOriginErrorMessage",fieldId:w,legNumber:r+2})}u.val()||(w=u.attr("id"),g.push(u),m.push({msgId:"gcw_multiDestErrorDestinationMessage",fieldId:w,legNumber:r+2}));v.val()||(u=v.attr("id"),g.push(v),m.push({msgId:"gcw_multiDestDateErrorMessage",fieldId:u,legNumber:r+2,dateFormat:n}))}}$.each(g,function(a,c){d(c,f,"gcw_allFlightsComplete")});return e(void 0,void 0,f,void 0,void 0,m)},gcw_railscardTypeSelected:function(a){var c=!0;a=a.form.find(".gcw-railcard-select:visible");for(var b=0,f,g=[],m,p=0;p<a.length;p++)f=$(a[p]),""===f.val()&&(b+=1,g.push(f),m||(m=f.attr("id")));1<=b&&(c=!1,$.each(g,function(a,b){d(b,c,"gcw_railscardTypeSelected")}));return e(m,"gcw_railscardTypeSelected",c)},gcw_timeValidPickUp:function(a){var c=!0,n=a.form,f=n.find(".gcw-start-date:visible");a=new g(a.getDateFromString(f.val()));f=n.find(".gcw-start-time:visible");var l=f.val(),m=f.attr("id");n=n.data("gcw-min-hours");void 0!==a&&a[0]&&(a.addMinutes(b(l)),g(new Date).diffHours(a)<n&&(c=!1));d(f,c,"gcw_timeValidPickUp");return e(m,"gcw_carsPickUpTooSoonMessage",c,n)},gcw_allOriginsAreDifferentFromDestinations:function(a){var c=!0,b=[],f=a.form,g;a=a.getKeyParameter();for(var m=0;4>m;m++){var p=f.find("#flight-"+(m+2)+"-origin"+a+":visible"),r=f.find("#flight-"+(m+2)+"-destination"+a+":visible");0<p.length&&0<r.length&&p.val()===r.val()&&""!==p.val()&&(c=!1,g||(g=r.attr("id")),b.push(r),b.push(p))}$.each(b,function(a,b){d(b,c,"gcw_allOriginsAreDifferentFromDestinations")});return e(g,"gcw_distinct_locations",c)},gcw_youthAgesAllProvided:function(a){var c=a.form.data("gcw-youth-ages-all-provided-custom-error-message")?a.form.data("gcw-youth-ages-all-provided-custom-error-message"):"gcw_youth_ages_all_provided",b=!0;a=a.form;var f=0,g=a.find(".gcw-youth-field:visible"),m;a.find(".num-youth:visible").each(function(a,c){f+=parseInt($(c).val())});0<f&&0<g.length&&g.each(function(a,c){""===$(c).find("select").val()&&(m||(m=$(c).find("select").attr("id")),b=!1,d($(c),b,"gcw_youthAgesAllProvided"))});return e(m,c,b)},gcw_seniorAgesAllProvided:function(a){var c=a.form.data("gcw-senior-ages-all-provided-custom-error-message")?a.form.data("gcw-senior-ages-all-provided-custom-error-message"):"gcw_senior_ages_all_provided",b=!0;a=a.form;var f=0,g=a.find(".gcw-seniors-field:visible"),m;a.find(".num-seniors:visible").each(function(a,c){f+=parseInt($(c).val())});0<f&&0<g.length&&g.each(function(a,c){""===$(c).find("select").val()&&(m||(m=$(c).find("select").attr("id")),b=!1,d($(c),b,"gcw_youthAgesAllProvided"))});return e(m,c,b)},gcw_railcardsCombinationValidation:function(a){var c=!0;a=a.form.find(".gcw-railcard-select:visible");for(var b=a.first().find("option:selected").attr("class"),f=[],g=[],m,p=0;p<a.length;p++)m=$(a[p]),g.push(m),m.find("option:selected").attr("class")!==b&&f.push(m);0<f.length?(c=!1,$.each(f,function(a,b){d(b,c,"gcw_railcardsCombinationValidation")})):$.each(g,function(a,b){d(b,c,"gcw_railcardsCombinationValidation")});return e(void 0,"gcw_railcardsCombinationValidation",c)},gcw_railsRouteNotSupported:function(a){var c=a.form,b=c.find(".gcw-origin:visible");a=c.find(".gcw-cross-country").val();b=f.getUTAFeature(b,"point_of_supply");var g=c.find(".gcw-destination:visible");g=f.getUTAFeature(g,"point_of_supply");if(-1<g.indexOf(",")){var l=g.split(","),m=l.indexOf(b);g=-1<m?l[m]:g}-1<b.indexOf(",")&&(l=b.split(","),m=l.indexOf(g),b=-1<m?l[m]:b);l=c.find(".gcw-rails-from input.gcw-origin , .gcw-rails-to input.gcw-destination");m=!0;c=c.find(".gcw-rails-from input.gcw-origin").attr("id");if(b!==g||"true"===a)m=!1;d(l,m,"gcw_railsRouteNotSupported");return e(c,"gcw_railsRouteNotSupported",m)},gcw_unattendedInfantInLap:function(a){var c=a.form;a=c.data("gcw-unattended-infant-in-lap-custom-error-message")?c.data("gcw-unattended-infant-in-lap-custom-error-message"):"gcw_unattended_infant_in_lap";var b=c.find('input[name\x3d"lap-or-seat"]:checked'),f=!0,g=c.find(".gcw-child-field:visible, .gcw-flights-child-field:visible"),m=0,p=0,r=0,t=!1;c.find(".num-adults:visible").each(function(a,c){m+=parseInt($(c).val())});r=m;g.each(function(a,c){var b=$(c).find("select").val();if(""===b)return t=!0,!1;12<=parseInt(b)?r++:0!==parseInt(b)&&1!==parseInt(b)||p++});c=b.length&&"lap"===b.val().toLowerCase();!t&&c&&0<p&&r<p&&(f=!1);c=g.first().attr("id");d(g,f,"gcw_unattendedInfantInLap");return e(c,a,f)},gcw_unattendedInfantInLap_travelerSelector:function(a){var c=a.form;a=c.data("gcw-unattended-infant-in-lap-custom-error-message")?c.data("gcw-unattended-infant-in-lap-custom-error-message"):"gcw_unattended_infant_in_lap";var b=c.find('input[name\x3d"lap-or-seat"]:checked'),g=!0,l=f.retrieveTravelerSelectorPassengersData(c),m=l.$activeTravelerSelector;c=m.find("[data-control\x3dmenu]");var p=l.totalChildrenFields,r=0,t=0;b.length||(b=m.find(".gcw-young-child:checked"));t=l.totalAdults;$.each(p,function(a,c){var b=c.find("select");b=parseInt(b.val(),10);12<=parseInt(b)?t++:0!==parseInt(b)&&1!==parseInt(b)||r++});b.length&&"lap"===b.val().toLowerCase()&&0<r&&t<r&&(g=!1);b=p.length?p[0].attr("id"):void 0;g?c.removeClass("invalid"):(c.addClass("invalid"),c.uitk_dropDown("open"));$.each(p,function(a,c){var b=c.find("select");d($(b),g,"gcw_unattendedInfantInLap_travelerSelector")});return e(b,a,g)},gcw_moreRoomThanAdult:function(a){var c=a.form;a=c.find(".gcw-threepp-Rooms-select");c=parseInt(c.find(".gcw-traveler-selector-num-adults").val());var b=parseInt(a.val()),f=a.attr("id"),g=!0;b>c&&(g=!1);d(a,g,"gcw_moreRoomThanAdult");return e(f,"gcw_numberOfRoomsMoreThanTravelers",g)},gcw_singleRoomIfChildren:function(a){var c=a.form;a=c.find(".gcw-threepp-Rooms-select");c=parseInt(c.find('input[name\x3d"numChildren"]').val());var b=parseInt(a.val()),f=a.attr("id"),g=!0;1<=c&&1<b&&(g=!1);d(a,g,"gcw_singleRoomIfChildren");return e(f,"gcw_singleRoomIfChildrenError",g)}}});
define("gcwForm","jquery uitk uitk_datepicker xdate gcwControllers gcwDataPreloadingFunctions gcwFieldsCollection GcwFormSubmission gcwFormValidations gcwProcessingFunctions gcwStorableLegacyKeys gcwComponentInitializer GcwUtilsProcessingFunctions gcw-traveler-selector-state gcwDateFieldParser".split(" "),function(g,f,e,b,a,d,c,h,n,q,l,m,p,r,t){e=function(e,p,r,x,y,A,B){var k=this;k.form=e;k.valid=!0;k.isActive=!1;k.formInitialized=!1;k.dataLoadedFromLocalStorage=!1;k.gcwFormHistory=void 0;k.storedData=void 0;k.locale=k.form.data("locale");k.ignoreSavedFormData=y||!1;k.storedDataPerLocale=A||!1;k.localStorageEnabled=Modernizr.localstorage;if(k.localStorageEnabled)if(k.gcwFormHistory=JSON.parse(window.localStorage.getItem("gcw_form_history")),k.storedDataPerLocale){if(k.storedData=B||k.gcwFormHistory?k.gcwFormHistory[k.locale]:void 0,y=l.replace(k.storedData))k.storedData=y,k.gcwFormHistory[k.locale]=y,window.localStorage.setItem("gcw_form_history",JSON.stringify(k.gcwFormHistory))}else if(k.storedData=B||k.gcwFormHistory||void 0,y=l.replace(k.storedData))k.storedData=y,k.gcwFormHistory=y,window.localStorage.setItem("gcw_form_history",JSON.stringify(k.gcwFormHistory));k.getDefaultsOriginPrefilled=function(){var a={"gcw-default-value-city_name":"gcw-origin","gcw-default-value-airport_code":"gcw-origin-airport_code","gcw-default-value-country_code":"gcw-origin-country_code","gcw-default-value-lat_long":"gcw-origin-lat_long","gcw-default-value-region_id":"gcw-origin-region_id","gcw-default-value-region_type":"gcw-origin-region_type"},c=k.form.find(".gcw-origin"),b={},d=!1;g.each(c,function(c,h){g.each(a,function(a,c){var e=g(h).data(a);e&&(b[c]=e,d=!0)});b.newHistoryV2=d});return b.newHistoryV2?b:void 0};k.storedData=k.storedData||k.getDefaultsOriginPrefilled();k.fieldsCollection=new c(k);k.form.find("input, select, textarea").each(function(){k.fieldsCollection.add(g(this))});k.$lobTab=g('.tabs li button[data-section-id\x3d"#'+k.form.parent("section").attr("id")+'"]');k.alertList=e.find(".validation-alert-list");k.alertBox=e.find(".validation-alert");k.submitBtn=e.find("button[type\x3dsubmit]");k.formValidations=n;k.specialProcessingLogic=q[r];k.controller=a[x];k.specialDataPreloadingLogic=d[p];k.$roomContainer=k.form.find(".roomlabel").parent().parent();k.$roomFieldSet=k.form.find(".gcw-rooms-container .room-data").clone();k.numberOfRooms=1;k.gcwComponents=[];k.gcwComponentsInstances=[];k.travelerSelectorEnabled=e.hasClass("gcw-traveler-selector");k.setGcwComponentsList=function(){var a=k.form.find(".gcw-component"),c=[];g.each(a,function(a,b){c.push(g(b).data("gcw-component"))});k.gcwComponents=c.filter(function(a,c,b){return c===b.indexOf(a)})};k.initGcwComponents=function(){k.gcwComponents.length&&k.gcwComponents.forEach(function(a,c){require(a,function(c){k.gcwComponentsInstances.push(m.registerComponent(k,a,c))})})};k.loadFormData=function(){var a=k.form.find(".gcw-sub-nav-option");k.specialDataPreloadingLogic&&k.specialDataPreloadingLogic(k.form,k.storedData,k.ignoreSavedFormData,k.getKeyParameter());!k.ignoreSavedFormData&&k.storedData&&(!0===k.storedData.newHistoryV2?(k.updateRoomsHtml(),k.loadStoredData(),k.loadToggleElementsState()):k.deleteFormData());a&&a.length?(k.loadSubNavOptions(),k.setCurrentPackageType(k.form.find(".gcw-package-type:checked").attr("data-gcw-package-type"))):k.setCurrentPackageType(k.form.attr("data-gcw-current-package-type"));k.showDisabled();f.publish("mercury-form-history-loaded",{storedData:k.storedData})};k.loadFormController=function(){k.controller&&k.controller(k.form,k.getKeyParameter(),k.storedData,k.fieldsCollection)};k.getKeyParameter=function(){return k.form.data("gcw-key")?"-"+k.form.data("gcw-key"):""};k.loadStoredData=function(){var a=k.isCarDropOffValueInLocalStorage();k.form.find(".gcw-storeable").each(function(){var c=g(this),b=c.data("gcw-storeable-name"),d=k.storedData[b];if(!1===a&&0<=b.indexOf("gcw-carDropOff")&&void 0!==d)return!1;c.is("select")?(b=c.data("gcw-default-option-value"),k.optionExistInSelect(c,d)?c.val(d):d&&b&&c.val(b)):"checkbox"===c.attr("type")||"radio"===c.attr("type")?(!0!==d&&"1"!==d||c.prop("checked",!0),k.updateCheckboxState(c,d)):(c.hasClass("gcw-start-date")||c.hasClass("gcw-end-date"))&&d?c.val(k.verifyDates(c,d)):d&&c.val(d);d&&(c.hasClass("gcw-toggle-checkbox")&&k.checkboxToggle(c),c.hasClass("gcw-toggle-search-type")&&c.prop("checked")&&k.toggleFormLOBs(c),c.data("gcw-toggled-field-class")&&k.selectToggle(c),c.data("gcw-toggled-element-by-value")&&k.selectToggleByValue(c),-1<g(k.form).attr("id").indexOf("activities")||-1<g(k.form).attr("id").indexOf("cars")||-1<g(k.form).attr("id").indexOf("rail")?k.form.addClass("gcw-timeValidLongEnough"):k.form.removeClass("gcw-timeValidLongEnough"),c.data("gcw-sub-nav-option-name")&&c.prop("checked")&&("multi"===c.data("gcw-sub-nav-option-name")?k.changeMultidestValidation("addClass"):k.changeMultidestValidation("removeClass"),-1<c.attr("id").indexOf("rail")&&-1<c.attr("id").indexOf("roundtrip")?k.changeRailsTimeValidEnoughValidation("addClass"):k.changeRailsTimeValidEnoughValidation("removeClass")),c.data("gcw-change-submit-text")&&k.changeSubmitButtonText(c),c.data("gcw-change-title-text")&&k.changeTitleText(c),c.hasClass("gcw-disable-enable-sub-nav")&&k.disableEnableSubNavs(c),c.hasClass("gcw-hide-advanced-section")&&k.hideAdvancedSection(c),c.hasClass("gcw-rooms-restriction")&&(d=k.form.find(".gcw-rooms-restriction").is(":checked"),b=c.is(":checked")?c.data("gcw-rooms-restriction-n-rooms"):k.form.find(".gcw-rooms-restriction:checked").data("gcw-rooms-restriction-n-rooms"),k.applyRoomsRestriction(d,b)),c.hasClass("gcw-hide-adults-children")&&k.hideSelectsOnCheckboxChange(c),c.hasClass("gcw-toggle-form-validation")&&k.toggleFormValdation(c),c.hasClass("gcw-start-date")&&c.parents("div[data-end-date]")&&(d=g(c.parents("div[data-end-date]").data("end-date")).children("label").children("input"),k.reflectEndDateValue(c,d)),c.hasClass("gcw-end-date")&&c.parents("div[data-start-date]")&&(d=g(c.parents("div[data-start-date]").data("start-date")).children("label").children("input"),k.reflectEndDateValue(d,c)),c.hasClass("gcw-partial-hotel")&&(k.adjustRoomDataPosition(c),k.storedData["gcw-hotel-car-package-type"]&&k.adjustRoomDataPosition(c,"hotel-car")),c.hasClass("gcw-update-datepicker-range")&&(k.updateDatepickerRanges(c),k.updateDateMaxRangeError(c)),c.hasClass("gcw-add-hotel-one-way-package")&&k.addHotelOnewayPackage(c))});k.dataLoadedFromLocalStorage=!0};k.isCarDropOffValueInLocalStorage=function(){return k.storedData["gcw-carDropOff"]?!0:!1};k.updateRoomsHtml=function(){var a=k.storedData["gcw-num-rooms"],c=k.form.find(".gcw-clone-rooms-fields"),b=c.data("gcw-default-option-value");k.optionExistInSelect(c,a)?(c.val(a),k.addRoomsFields(a),k.numberOfRooms=a):a&&b&&(c.val(b),k.addRoomsFields(b),k.numberOfRooms=b)};k.loadSubNavOptions=function(){k.form.find(".gcw-sub-nav-option").each(function(){g(this).data("gcw-sub-nav-option-name")&&g(this).prop("checked")&&(k.toggleOptionFields(g(this)),k.checkSubTabForOneWayPackage(g(this).data("gcw-sub-nav-option-name")),k.checkSubTabForReverseOriginAndDestination(g(this).data("gcw-sub-nav-option-name")))})};k.loadToggleElementsState=function(){k.form.find("[data-control\x3dtoggle]").each(function(){var a=!1,c=k.getKeyParameter();k.form.find("#"+g(this).attr("aria-controls")).find("input.gcw-show-with-value, select.gcw-show-with-value").each(function(){g(this).is('input[type\x3d"checkbox"]')?g(this).prop("checked")&&(a=!0):g(this).attr("id")==="car-options-type"+c?"1"!==g(this).val()&&(a=!0):g(this).attr("id")==="car-options-discount"+c?"0"!==g(this).val()&&(a=!0):""!==g(this).val()&&(a=!0)});a&&!g(this).hasClass("open")||g(this).hasClass("gcw-toggle-default-open")?g(this).uitk_toggle("open"):g(this).hasClass("open")&&g(this).uitk_toggle("close");var b=k.form.find(".gcw-flights-add-car input");0<b.length&&k.hideAdvancedSection(b)})};k.optionExistInSelect=function(a,c){var b=!1;a.find("option").each(function(a,
d){g(d).val()===c&&(b=!0)});return b};k.reflectFieldValue=function(a){if(a.data("template"))a.one("focus",function(){k.reflectFieldValue(a)});var c=a.data("gcw-storeable-name");k.storedData&&c in k.storedData&&f.publish("gcw.storedDataUpdate",{targetStoreableName:c});c=g(".gcw-form [data-gcw-storeable-name\x3d"+c+"]");var b=a.val();c.each(function(c,d){if(!g(d)[0].isEqualNode(a[0])){if(g(d).is("select")){var h=g(d).data("gcw-default-option-value");k.optionExistInSelect(g(d),b)?g(d).val(b):h&&g(d).val(h)}else g(d).val(b);g(d).is("input")&&"utypeahead"!==g(d).data("provide")&&g(d).trigger("input");void 0!==g(d).data("gcw-toggled-field-class")&&k.selectToggle(g(d));g(d).hasClass("gcw-guests-field")&&g(d).trigger("guestsChange");g(d).hasClass("gcw-young-child")&&g(d).prop("checked",!0);g(d).data("gcw-toggled-element-by-value")&&k.selectToggleByValue(g(d));g(d).parent("label").hasClass("gcw-rooms-field")&&g(d).trigger("setNRoomsClass");g(d).hasClass("gcw-change-submit-text")&&g(d).trigger("changeSubmitButtonText")}g(d).hasClass("gcw-start-date")&&g(d).parents("div[data-end-date]")&&(h=g(g(d).parents("div[data-end-date]").data("end-date")).children("label").children("input"),k.reflectEndDateValue(g(d),h));g(d).hasClass("gcw-end-date")&&g(d).parents("div[data-start-date]")&&(h=g(g(d).parents("div[data-start-date]").data("start-date")).children("label").children("input"),k.reflectEndDateValue(h,g(d)))})};k.processForm=function(a){var c;k.clearHiddenInputs();k.specialProcessingLogic&&(c=k.specialProcessingLogic(k));k.validateForm()?h.submit(k,c,a):a.preventDefault()};k.getErrorFormState=function(){var a=0,c=[],b;for(b in k.formValidations){var d=k.formValidations[b],h=b.replace(/_/g,"-");k.form.hasClass(h)&&(d=d(k),d.valid||(a++,c.push(d)))}return{numFormErrors:a,badForm:c}};k.validateForm=function(){var a=k.fieldsCollection.getErrorState(),c=k.getErrorFormState();k.errorState=g.extend({},c,a);k.updateAlerts(k.errorState);if(0===k.errorState.numFormErrors&&0===k.errorState.numFieldErrors)return k.toggleSpinner(k.submitBtn),!0;f.publish("gcwForm.failedValidation",k.errorState);k.fieldsCollection.enableInactiveFields();f.utils.focusElement(e.find(".alert-title"));return!1};k.updateAlerts=function(a){var c=a.badFields;a=a.badForm;k.alertList.empty();k.alertBox.addClass("hidden").attr("aria-hidden",!0);g.each(c,function(a,c){k.toggleAlerts(c)});g.each(a,function(a,c){k.toggleAlerts([c])})};k.toggleAlerts=function(a){g.each(a,function(a,c){if(c.multiErrors)g.each(c.multiErrors,function(a,c){var b=g("#"+c.msgId).html();b=[b];this.legNumber&&(b=b.concat(this.legNumber));this.dateFormat&&(b=b.concat(this.dateFormat));var d="#"+c.fieldId;if(c.fieldId&&0<k.form.find("[name\x3dfh-subNav]").length)for(var h=g("#"+c.fieldId).attr("class").split(" "),e=0;e<h.length;e++)if("package-checkin-hp-package-validation"===h[e]||"package-checkout-hp-package-validation"===h[e]||"package-returning-hp-package-validation"===h[e]){d="."+h[e];break}b=window.format.apply(c,b);k.alertList.append('\x3cli\x3e\x3ca class\x3d"error-link" href\x3d"'+d+'"\x3e'+b+"\x3c/a\x3e\x3c/li\x3e");k.alertBox.removeClass("hidden").attr("aria-hidden",!1)});else{var b=g("#"+this.msgId).html();b=[b];var d="#"+this.fieldId;if(this.fieldId&&0<k.form.find("[name\x3dfh-subNav]").length)for(var h=g("#"+this.fieldId).attr("class").split(" "),e=0;e<h.length;e++)if("package-checkin-hp-package-validation"===h[e]||"package-checkout-hp-package-validation"===h[e]||"package-returning-hp-package-validation"===h[e]){d="."+h[e];break}this.strParams&&(b=b.concat(this.strParams));b=window.format.apply(c,b);this.hideMessage||(k.alertList.append('\x3cli\x3e\x3ca class\x3d"error-link" href\x3d"'+d+'"\x3e'+b+"\x3c/a\x3e\x3c/li\x3e"),k.alertBox.removeClass("hidden").attr("aria-hidden",!1))}})};k.focusInputError=function(a){a=a.attr("href");k.form.find(a).focus()};k.showDisabled=function(){k.form.find(".gcw-show-disabled").prop("disabled","disabled")};k.selectToggle=function(a){var c="group"===a.val()?1:parseInt(a.val(),10),b=a.data("gcw-toggled-field-parent-class");if(b&&(b=a.closest("."+b))&&0<b.length)for(a=a.data("gcw-toggled-field-class"),a=b.find("."+a),a.each(function(){g(this).addClass("gcw-disabled")}),b=0;b<c;b++)g(a[b]).toggleClass("gcw-disabled");k.checkChildrenAges()};k.selectToggleByValue=function(a){var c=[],b=parseInt(a.data("gcw-toggled-element-by-value").split(",")[1]),d=a.data("gcw-toggled-element-by-value").split(",")[0],h=a.val(),e=0,f=g(".gcw-rooms-container");k.fieldsCollection.fields.forEach(function(a,b){a.$field.hasClass("num-children")&&a.isActive()&&(a.$field.is(":visible")||a.$field.hasClass("gcw-traveler-selector-num-children"))&&c.push(a.$field)});c.forEach(function(a,c){e+=parseInt(g(a).val())});0<e?f.addClass("guests-wrapping"):f.removeClass("guests-wrapping");"gcw-young-child-note"!==d?e===b?g("#"+d).parent().addClass("gcw-disabled"):g("#"+d).parent().removeClass("gcw-disabled"):(d=k.form.find("."+d),h&&(h<=b||0===h)?d.hasClass("gcw-disabled")&&"0"!==a.closest("fieldset").find(".seat-children").val()&&!k.travelerSelectorEnabled&&k.showYoungChildNote(!0):k.checkChildrenAges(e,b,d))};k.checkChildrenAges=function(a,c,b){if(!k.travelerSelectorEnabled){var d=k.form.find(".gcw-child-age-select:visible"),h=!1,e=[];a=a||!1;c=c||1;b=b||k.form.find(".gcw-young-child-note");a||(k.fieldsCollection.fields.forEach(function(a,c){a.$field.hasClass("num-children")&&a.isActive()&&e.push(a.$field)}),e.forEach(function(c,b){a+=parseInt(g(c).val())}));for(var f=0;f<a;f++)if((b=g(d[f]).val())&&b<=c){h=!0;break}k.showYoungChildNote(h)}};k.showYoungChildNote=function(a){var c=g(".gcw-young-child-note");a?c.removeClass("gcw-disabled"):c.addClass("gcw-disabled")};k.clickToggle=function(a){if(a.data("gcw-toggled-element")){var c=a.data("gcw-toggled-element").split(";");g.each(c,function(c,b){var d=g(b);a.addClass("gcw-disabled");d.removeClass("gcw-disabled")})}};k.checkboxToggle=function(a){if(a.data("gcw-toggled-element")){var c=a;a=a.data("gcw-toggled-element").split(";");var b=k.form.find(".gcw-default-visible-msg");g.each(a,function(a,d){var h=g(d);c.hasClass("gcw-gt-roundtrip")&&h.removeClass("gcw-disabled");c.hasClass("gcw-driver-age")||c.hasClass("gcw-same-pickup-dropoff")?c.prop("checked")?h.addClass("gcw-disabled"):h.removeClass("gcw-disabled"):c.prop("checked")?(b.addClass("gcw-disabled"),h.removeClass("gcw-disabled")):(b.removeClass("gcw-disabled"),h.addClass("gcw-disabled"))});1<k.form.find(".gcw-trigger-tooltip:checked").length?(b.addClass("gcw-disabled"),a=k.form.find(".gcw-msg-tooltip.gcw-tooltip-persit"),k.form.find(".gcw-msg-tooltip").addClass("gcw-disabled"),a.removeClass("gcw-disabled")):1===k.form.find(".gcw-trigger-tooltip:checked").length&&(b.addClass("gcw-disabled"),c=k.form.find(".gcw-trigger-tooltip:checked"),a=k.form.find(".gcw-trigger-tooltip:checked").data("gcw-toggled-element").split(";"),g.each(a,function(a,c){g(c).removeClass("gcw-disabled")}))}};k.isFieldNeeded=function(a,c){var b=c.data("gcw-field-available-for-sub-nav-option").split(",");return c.hasClass("gcw-disabled-by-loadStoredData")?!1:-1<g.inArray(a,b)};k.toggleOptionFields=function(a){if(a.is(":visible")){var c=a.data("gcw-sub-nav-option-name");k.form.find("[data-gcw-field-available-for-sub-nav-option]").each(function(a,b){var d=g(b);k.isFieldNeeded(c,d)?g(b).removeClass("gcw-disabled"):g(b).addClass("gcw-disabled")})}};k.changeMultidestValidation=function(a){var c=k.form.find("input.gcw-valid-date:visible");g(c[0])[a]("gcw-multidest-date")};k.changeRailsTimeValidEnoughValidation=function(a){k.form[a]("gcw-timeValidLongEnough")};k.changeTitleText=function(a){var c=k.form.find(".mobile-hero-banner-title"),b=a.data("gcw-change-title-text"),d=a.parent().siblings("label").children("input"),h="";d&&d.data("gcw-change-title-text")&&(h=d.data("gcw-change-title-text"));if(b){var e=b.split(";")[0];var f=b.split(";")[1];b=b.split(";")[2];h=h.split(";")[1];a.prop("checked")&&d&&d.prop("checked")?b&&c.text(b):a.prop("checked")?f&&c.text(f):d&&d.prop("checked")?
h&&c.text(h):c.text(e)}};k.changeSubmitButtonText=function(a){var c=a.data("gcw-change-submit-text"),b=c.split(";")[2],d=c.split(";")[0];c=c.split(";")[1];var h=k.form.find('button[type\x3d"submit"]'),e="group"===k.form.find(".gcw-rooms-field select").val(),f=h.data("gcw-change-submit-text"),n=k.form.find('.gcw-change-submit-text[type\x3d"checkbox"]:checked'),g="",l;""===c?a.val()===b?h.children(".btn-label").text(d):(n&&0<n.length&&(g=1===n.length?n.data("gcw-change-submit-text").split(";")[0]:n.data("gcw-change-submit-text").split(";")[1]),h.children(".btn-label").text(0<g.length?g:f)):(b=a.prop("checked"),a=a.parent().siblings().children("input"),0<a.length&&(l=a.data("gcw-change-submit-text").split(";")[0]),b?0<a.length&&a.prop("checked")?h.children(".btn-label").text(c):h.children(".btn-label").text(d):e||(0<a.length&&a.prop("checked")?h.children(".btn-label").text(l):h.children(".btn-label").text(f)))};k.disableEnableSubNavs=function(a){var c=a.prop("checked"),b=e.find(".sub-nav-select"),d=b.find(".flight-helper"),h="car",f=k.getKeyParameter(),n=b.find(".gcw-sub-nav-option-wrapper");-1!==a.attr("id").indexOf("car")&&(h="hotel");a=e.find("#flight-add-"+h+"-checkbox"+f);c?(e.hasClass("gcw-oneway-packages")&&"car"===h?b.find("label#flight-type-multi-dest-label"+f).addClass("disable"):(b.addClass("disable"),b.find("label").addClass("disable"),n.addClass("disable")),d.removeClass("gcw-disabled")):a.prop("checked")?e.hasClass("gcw-oneway-packages")&&"hotel"===h&&a.prop("checked")&&(b.removeClass("disable"),b.find("label#flight-type-one-way-label"+f).removeClass("disable"),b.find("label#flight-type-roundtrip-label"+f).removeClass("disable"),n.removeClass("disable")):(b.removeClass("disable"),b.find("label").removeClass("disable"),n.removeClass("disable"),d.addClass("gcw-disabled"))};k.hideSelectsOnCheckboxChange=function(a){a=a.prop("checked");var c=k.form.find(".available-for-flights");a?c.addClass("gcw-disabled gcw-disabled-by-loadStoredData"):c.removeClass("gcw-disabled gcw-disabled-by-loadStoredData")};k.updateDatepickerRanges=function(a){var c=e.find("[data-soft-package]").not('[data-soft-package\x3d"car"]').attr("data-soft-package"),b=a.prop("checked"),d=e.find(".gcw-start-date.gcw-update-date-range").first(),h=d.closest("div"),f=e.find(".gcw-end-date.gcw-update-date-range").first();if("hotel"===c&&b){var n=e.find(".gcw-start-date.gcw-update-date-range").last();var l=n.closest("div");var q=e.find(".gcw-end-date.gcw-update-date-range").last();c=l.data("default-range-length")}else{var m=g(".package-max-range:hidden");m=m.closest("div");c=h.data("default-range-length")}b?(h.attr("data-default-range-length",1),d.attr("data-min-range-length",1),l&&void 0!==l.data("max-range-length")&&"function"===typeof h.uitk_datepicker?h.uitk_datepicker("updateOptions",{maxRangeLength:l.data("max-range-length")}):h.uitk_datepicker("updateOptions",{maxRangeLength:m.data("max-range-length")}),l?(""===n.val()&&n.val(d.val()),""===q.val()&&q.val(f.val()),k.reflectEndDateValue(n,f),k.reflectEndDateValue(n,q)):k.reflectEndDateValue(d,f)):(h.attr("data-default-range-length",c),d.attr("data-min-range-length",c),void 0!==a.data("max-range-length")&&"function"===typeof h.uitk_datepicker&&h.uitk_datepicker("updateOptions",{maxRangeLength:a.data("max-range-length")}))};k.updateDateMaxRangeError=function(a){a=a.prop("checked");k.form.find(".gcw-end-date").data("gcw-max-range-error",a?"gcw_max_range_nights":"")};k.reflectEndDateValue=function(a,c,d){if(0<a.length&&0<c.length&&c.data("gcw-date-format")){var h=a.parent("label").parent("[data-end-date]"),e=a.val(),f=c.val();c.hasClass("gcw-preloadedDate")&&!d&&(f="",c.removeClass("gcw-preloadedDate"));var n=k.getDateFromString(e),g=k.getDateFromString(f);d=new b(n);var l=new b(g);e=c.data("gcw-date-format").toLowerCase().replace(/m/g,"M");var q=0,m=0;void 0!==h.data("default-range-length")&&(q=h.data("default-range-length"));void 0!==a.data("min-range-length")&&(m=a.data("min-range-length"));n&&(a=g&&d.diffDays(l)<m,""===f||a)&&(d.addDays(q),c.val(d.toString(e)))}};k.applyRoomsRestriction=function(a,c){k.travelerSelectorEnabled?k.applyRoomsRestrictionForTravelerSelector(a,c):k.applyRoomsRestrictionToRegularMarkup(a,c)};k.applyRoomsRestrictionToRegularMarkup=function(a,c){k.form.find(".gcw-rooms-field select").find("option").each(function(b,d){0<g(d).parent("span").length&&g(d).unwrap();a&&b+1>c&&0===g(d).parent("span").length&&g(d).wrap('\x3cspan style\x3d"display: none;" /\x3e')})};k.applyRoomsRestrictionForTravelerSelector=function(a,c){var b=k.form.find(".gcw-rooms-field"),d=b.data("original-max-clones-allowed");a?(b.data("max-clones-allowed",c-1),b.trigger("cloneField.maxClonesAllowed.update")):(b.data("max-clones-allowed",d),b.trigger("cloneField.maxClonesAllowed.restore"))};k.removeRoomsFields=function(a){for(var c=k.numberOfRooms;c>a;c--)k.removeFieldsFromCollection(g(k.$roomContainer.children().eq(c-1))),k.$roomContainer.children().eq(c-1).remove()};k.addRoomsFields=function(a){var c=k.form.data("lob-form");"flight"===c&&(c+="-hotel");var b=parseInt(k.numberOfRooms,10);isNaN(b)&&(b=1);for(var d=b;d<a;d++){b=k.$roomFieldSet.clone();var h=b.find(".roomlabel").html(),e=d+1,f=b.attr("id");f&&b.attr("id",f.replace("room1","room"+e));b.find(".roomlabel").html(h.replace(1,e));g.each(b.find("label"),function(a,b){var d=g(b).attr("for");void 0!==d&&g(b).attr("for",d.replace(c+"-1",c+"-"+e))});g.each(b.find("select"),function(a,b){var d=g(b).attr("id"),h=g(b).data("referrerid");void 0!==d&&(d=d.replace(c+"-1",c+"-"+e),g(b).attr("id",d));var f=g(b).attr("data-gcw-storeable-name");f=f.replace(1,e);d=k.storedData&&k.storedData[f];g(b).attr("data-gcw-storeable-name",f);d&&g(b).val(d);g(b).data("gcw-toggled-field-class")&&k.selectToggle(g(b));h&&g(b).data("referrerid",h.replace("1",e))});k.$roomContainer.append(b);k.addFieldsInCollection(b)}};k.addFieldsInCollection=function(a){a.find("select").each(function(){k.fieldsCollection.add(g(this))})};k.removeFieldsFromCollection=function(a){a.find("select").each(function(){for(var a=0;a<k.fieldsCollection.fields.length;a++)k.fieldsCollection.fields[a].$field[0].id===g(this)[0].id&&k.fieldsCollection.fields.splice(a,1)})};k.hideAdvancedSection=function(a){var c=k.form.find(".gcw-advanced-options");a.prop("checked")?c.hide():c.show()};k.updateCheckboxState=function(a,c){(a.hasClass("gcw-same-pickup-dropoff")||a.hasClass("gcw-driver-age"))&&"0"===c&&a.removeAttr("checked")};k.toggleFormLOBs=function(a){k.form.toggleClass(a.data("gcw-search-type"))};k.verifyDates=function(a,c){if(a&&a.length){var d=a.data("gcw-date-format");var h=t.convertToDateFromString(c);var e=a.data("new-pkg-default-date");var f=a.data("new-pkg-trip-duration");if(d&&h){h=new b(h);var n=new b;0>Math.ceil(n.diffDays(h))?(d=d.toLowerCase().replace(/m/g,"M"),c=0<e&&-1<a.attr("id").indexOf("package")?a.hasClass("gcw-end-date")?n.addDays(e+f).toString(d):n.addDays(e).toString(d):(-1<a.attr("id").indexOf("hotel")||-1<a.attr("id").indexOf("package"))&&a.hasClass("gcw-end-date")?n.addDays(1).toString(d):n.toString(d)):c=t.localizedDateFromStorage(c)}}return c};k.getDateFromString=function(a){if(a=f.datePickerCalendarObj.getDateFromString(a,!0))a.setHours(0),a.setMinutes(0),a.setSeconds(0);return a};k.extendTypeaheadLogic=function(){var a=k.form.find(".autocomplete-arrow").children("input"),c;f.prepFields();a.each(function(a,b){var d=g(b);d.parent().siblings("button").first().click(function(a){d.hasClass("gcw-clear-input-on-typing")&&(c=d.data("clear-on-change"))&&(a=c.split(","),1<a.length?g.each(a,function(a,c){k.clearInput(c)}):k.clearInput(c));d.trigger("change",["clearInput"])})})};k.clearHiddenInputs=function(){k.form.find(".gcw-clear-before-submit").each(function(){g(this).val("")})};k.clearInput=function(a){k.form.find("[name\x3d"+a+"]").val("")};k.toggleFormValdation=function(a){var c=a.data("gcw-toggle-form-validation-class"),b=a.data("gcw-toggle-form-validation-data-attr");c&&a.is(":checked")?(k.form.addClass(c),b&&(a=b.split(",")[0],
2===b.split(",").length&&(b=b.split(",")[1],k.form.data(a,b)))):c&&(k.form.removeClass(c),b&&(a=b.split(",")[0],k.form.removeData(a)))};k.adjustRoomDataPosition=function(a,c){var b=e.find('[id*\x3d"packages-partial-dates"]');b=k.getPartialStayDiv(b,document.readyState);var d=e.find(".advanced-options-checkboxes");if(0<b.length){var h=e.find(".gcw-rooms-container"),f=k.getCheckboxState(a);h.remove();var n=b.parent().parent();if("hotel-car"===c)return 0<d.length&&(n=n.parent()),n.before(h),!1;f?b.append(h):(0<d.length&&(n=n.parent()),n.before(h))}};k.getPartialStayDiv=function(a,c){if(0<e.find("[name\x3dfh-subNav]").length){var b=e.find("[id\x3dpackages-partial-dates-hp-package]");null!==document.getElementById("fh-fh-hp-package")&&document.getElementById("fh-fh-hp-package").checked&&document.getElementById("flight-type-roundtrip-hp-package").checked?"interactive"===c||"loading"===c?b=e.find("[id\x3dpackages-partial-dates-hp-package]"):"complete"===c&&(b=e.find("[id\x3dpackages-partial-dates-fh-hp-package]").is(":visible")?e.find("[id\x3dpackages-partial-dates-fh-hp-package]"):e.find("[id\x3dpackages-partial-dates-hp-package]")):null!==document.getElementById("fhc-fhc-hp-package")&&document.getElementById("fhc-fhc-hp-package").checked?b=e.find("[id\x3dpackages-partial-dates-hp-package]"):null!==document.getElementById("fh-fh-hp-package")&&document.getElementById("fh-fh-hp-package").checked&&document.getElementById("flight-type-one-way-hp-package").checked&&("interactive"===c||"loading"===c?b=e.find("[id\x3dpackages-partial-dates-fh-ow-hp-package]"):"complete"===c&&(b=e.find("[id\x3dpackages-partial-dates-fh-hp-package]").is(":visible")?e.find("[id\x3dpackages-partial-dates-fh-hp-package]"):e.find("[id\x3dpackages-partial-dates-fh-ow-hp-package]")));return b}return a};k.getCheckboxState=function(a){if(0<e.find("[name\x3dfh-subNav]").length){for(var c=0;c<a.length;c++)if(a[c].checked)return!0;return!1}return a.prop("checked")};k.setCurrentState=function(){k.isActive=k.form.is(":visible")};k.setCurrentPackageType=function(a){-1<"flight hotel flight-hotel flight-hotel-car flight-car hotel-car all-inclusive".split(" ").indexOf(a)&&k.form.attr("data-gcw-current-package-type",a)};k.initForm=function(){k.formInitialized||(k.loadFormData(),k.setClassesForValidations(),k.extendTypeaheadLogic(),k.loadFormController(),f.publish("travelerselector.onLoadUpdateRooms"),k.setGcwComponentsList(),k.initGcwComponents(),f.publish("travelerselector.onLoadUpdateTravelers"),k.formInitialized=!0)};k.toggleSpinner=function(a){if(0<a.find(".loader").length){var c=a.find("span.btn-label"),b=a.width(),d=a.height();a.css("min-width",b);a.css("min-height",d);c.hide();a.addClass("loading")}};k.deleteFormData=function(){k.storedData=void 0;k.gcwFormHistory=null;k.dataLoadedFromLocalStorage=!1;window.localStorage.removeItem("gcw_form_history")};k.addHotelOnewayPackage=function(a){var c=e.find(".gcw-sub-nav-option:checked").attr("data-gcw-sub-nav-option-name");a=a.is(":checked");var b=e.find('[data-gcw-storeable-name\x3d"gcw-flights-start-date"]');if("oneway"!==c)return!1;a?(b.addClass("gcw-flight-hotel-one-way-date"),b.removeClass("gcw-flight-hotel-date")):(b.removeClass("gcw-flight-hotel-one-way-date"),b.addClass("gcw-flight-hotel-date"))};k.checkSubTabForOneWayPackage=function(a){var c=e.find('[data-gcw-storeable-name\x3d"gcw-flights-start-date"]'),b=e.find(".gcw-add-hotel-one-way-package");"oneway"===a&&b.is(":visible")&&b.is(":checked")?(c.addClass("gcw-flight-hotel-one-way-date"),c.removeClass("gcw-flight-hotel-date")):(c.removeClass("gcw-flight-hotel-one-way-date"),c.addClass("gcw-flight-hotel-date"))};k.checkSubTabForReverseOriginAndDestination=function(a){if(-1<g(k.form).attr("id").indexOf("flights")){var c=g(".gcw-reverse-origin-and-destination-button");"multi"===a?c.addClass("gcw-disabled"):c.removeClass("gcw-disabled")}};k.resetFields=function(){if(document.getElementById("flight-type-one-way-hp-package").checked)document.getElementById("partialHotelBooking-fh-hp-package").setAttribute("style","display: none;"),k.form.find("[id\x3dpackages-partial-dates-fh-hp-package]").removeClass("gcw-disabled"),k.form.find("[id\x3dpackage-returning-wrapper-fh-hp-package]").addClass("gcw-disabled"),document.getElementById("one-way-bundle-and-save-hotel-message-hotel-message").removeAttribute("style"),k.form.removeClass("gcw-isPartialDateWithinRange"),k.form.find("[id\x3dpackages-partial-dates-fh-ow-hp-package]").find("#package-checkin-hp-package").addClass("gcw-flight-hotel-one-way-date"),k.form.find("[id\x3dpackages-partial-dates-fh-hp-package]").find("#package-checkin-hp-package").addClass("gcw-flight-hotel-one-way-date"),k.form.find("[id\x3dpackages-partial-dates-hp-package]").find("#package-checkin-hp-package").val()&&(k.form.find("[id\x3dpackages-partial-dates-fh-ow-hp-package]").find("#package-checkin-hp-package").val(g("#packages-partial-dates-hp-package").find("#package-checkin-hp-package").val()),k.form.find("[id\x3dpackages-partial-dates-fh-hp-package]").find("#package-checkin-hp-package").val(g("#packages-partial-dates-hp-package").find("#package-checkin-hp-package").val())),k.form.find("[id\x3dpackages-partial-dates-hp-package]").find("#package-checkout-hp-package").val()&&(k.form.find("[id\x3dpackages-partial-dates-fh-ow-hp-package]").find("#package-checkout-hp-package").val(g("#packages-partial-dates-hp-package").find("#package-checkout-hp-package").val()),k.form.find("[id\x3dpackages-partial-dates-fh-hp-package]").find("#package-checkout-hp-package").val(g("#packages-partial-dates-hp-package").find("#package-checkout-hp-package").val()));else{document.getElementById("partialHotelBooking-fh-hp-package").removeAttribute("style");k.form.find("[id\x3dpackage-returning-wrapper-fh-hp-package]").removeClass("gcw-disabled");document.getElementById("one-way-bundle-and-save-hotel-message-hotel-message").setAttribute("style","display: none;");k.form.addClass("gcw-isPartialDateWithinRange");k.form.find("[id\x3dpackages-partial-dates-fh-hp-package]").find("#package-checkin-hp-package").removeClass("gcw-flight-hotel-one-way-date");for(var a=g(".gcw-partial-hotel"),c=0;c<a.length;c++)if(!a[c].checked){k.form.find("[id\x3dpackages-partial-dates-fh-hp-package]").addClass("gcw-disabled");break}}};k.form.on("submit",k.processForm);k.form.on("change",".gcw-child-age-select",function(a){a=g(this).parents(".traveler-selector-room-data");f.publish("travelerselector.updateTravelerInformation",{input:g(a)})});k.form.on("change",".gcw-storeable",function(a){a=g(a.target);a.parents(".gcw-travel-selector-wrapper").length||k.reflectFieldValue(a)});k.form.on("change",".gcw-toggles-fields",function(a){a=g(a.target);k.selectToggle(a)});k.form.on("change",".gcw-toggles-field-by-value",function(a){a=g(a.target);k.selectToggleByValue(a)});k.form.on("change",".gcw-toggle-checkbox",function(a){a=g(a.target);k.checkboxToggle(a)});k.form.on("click",".gcw-toggle-on-click",function(a){a=g(a.target);k.clickToggle(a)});k.form.on("change",".gcw-sub-nav-option",function(a){var c=g(a.target);a=c.data("gcw-sub-nav-option-name");var b=k.form.find(".gcw-partial-hotel");k.toggleOptionFields(c);"multi"===a?k.changeMultidestValidation("addClass"):(k.changeMultidestValidation("removeClass"),"hotel-car"===a?k.adjustRoomDataPosition(b,"hotel-car"):k.adjustRoomDataPosition(b));-1<c.attr("id").indexOf("rail")&&-1<c.attr("id").indexOf("roundtrip")?k.form.addClass("gcw-timeValidLongEnough"):-1<g(k.form).attr("id").indexOf("activities")||g(k.form).attr("id").indexOf("cars")||k.form.removeClass("gcw-timeValidLongEnough");c=g(k.form[0]).data("gcw-key");-1<g(k.form).attr("id").indexOf("activities")&&"gt"===a&&g("#activity-gt-fromairport-"+c).prop("checked","true");-1<g(k.form).attr("id").indexOf("cars")&&"gt"===a&&g("#car-gt-fromairport-"+c).prop("checked","true");k.checkSubTabForOneWayPackage(a);k.checkSubTabForReverseOriginAndDestination(a)});k.form.on("change",".gcw-change-title-text",function(a){a=g(a.target);k.changeTitleText(a)});
k.form.on("change changeSubmitButtonText",".gcw-change-submit-text",function(a){a=g(a.target);k.changeSubmitButtonText(a)});k.form.on("change",".gcw-disable-enable-sub-nav",function(a){a=g(a.target);k.disableEnableSubNavs(a)});k.form.on("change",".gcw-rooms-restriction",function(a){var c=g(a.target);a=k.form.find(".gcw-rooms-restriction").is(":checked");c=c.is(":checked")?c.data("gcw-rooms-restriction-n-rooms"):k.form.find(".gcw-rooms-restriction:checked").data("gcw-rooms-restriction-n-rooms");k.applyRoomsRestriction(a,c)});k.form.on("change",".gcw-hide-adults-children",function(a){a=g(a.target);k.hideSelectsOnCheckboxChange(a)});k.form.on("change",".gcw-toggle-form-validation",function(a){a=g(a.target);k.toggleFormValdation(a)});k.form.on("click",".error-link",function(a){a.preventDefault();var c=g(a.target);k.focusInputError(c);a.stopPropagation()});k.form.on("change",".gcw-toggle-search-type",function(a){k.toggleFormLOBs(g(a.target))});k.form.on("input",".gcw-clear-input-on-typing",function(a){if(a=g(a.target).data("clear-on-change")){var c=a.split(",");1<c.length?g.each(c,function(a,c){k.clearInput(c)}):k.clearInput(a)}});k.form.on("change",".gcw-hide-advanced-section",function(a){a=g(a.target);k.hideAdvancedSection(a)});k.form.on("change",".gcw-partial-hotel",function(a){a=g(a.target);k.adjustRoomDataPosition(a)});k.setClassesForValidations=function(){0<g("[name\x3dfh-subNav]").length&&(g("#flight-type-one-way-hp-package").is(":checked")&&(g("#packages-partial-dates-fh-ow-hp-package").find("#package-checkin-hp-package").addClass("gcw-flight-hotel-one-way-date"),g("#gcw-packages-form-hp-package").removeClass("gcw-isPartialDateWithinRange")),g("#fhc-fhc-hp-package").is(":checked")&&g("#gcw-packages-form-hp-package").addClass("gcw-isPartialDateWithinRange"),g("#flight-type-roundtrip-hp-package").is(":checked")&&g("#gcw-packages-form-hp-package").addClass("gcw-isPartialDateWithinRange"))};k.form.on("click",".gcw-one-way-bundle-save-flightHotelTab , .gcw-one-way-bundle-save-oneWayTab, .gcw-one-way-bundle-save-roundTripTab",function(){k.resetFields()});k.form.on("click",".gcw-one-way-bundle-save-flightHotelCarTab",function(){g("#gcw-packages-form-hp-package").addClass("gcw-isPartialDateWithinRange")});k.form.on("change",".gcw-update-datepicker-range",function(a){a=g(a.target);k.updateDatepickerRanges(a);k.updateDateMaxRangeError(a)});k.form.on("click",".gcw-package-type",function(a){a=g(a.target);if(a.attr("data-soft-package")){var c={flight:!1,hotel:!1,car:!1};a=[];c.hasOwnProperty(k.form.data("lob-form"))&&(c[k.form.data("lob-form")]=!0);g.each(k.form.find(".gcw-package-type:checked"),function(a,b){c.hasOwnProperty(g(b).data("soft-package"))&&(c[g(b).data("soft-package")]=!0)});c.flight&&a.push("flight");c.hotel&&a.push("hotel");c.car&&a.push("car");k.setCurrentPackageType(a.join("-"))}else k.setCurrentPackageType(a.data("gcw-package-type"));f.prepFields()});k.form.on("change",".gcw-clone-rooms-fields",function(){f.publish("gcw.roomsChanged",{})});k.form.on("change",".gcw-add-hotel-one-way-package",function(a){a=g(a.target);k.addHotelOnewayPackage(a)});f.subscribe("datepicker.selectDate",function(a,c){var b=c.element;k.reflectFieldValue(b);if(b.hasClass("gcw-start-date")&&!b.hasClass("multidest-field")&&"gcw-flights-start-date"!==b.data("gcw-storeable-name")){var d=g(b.parents("div[data-end-date]").data("end-date")).children("label").children("input");k.reflectEndDateValue(b,d,!0)}});f.subscribe("gcw.storedDataUpdate",function(a,c){k.storedData&&c.targetStoreableName in k.storedData&&delete k.storedData[c.targetStoreableName]});f.subscribe("gcw.roomsChanged",function(a,c){var b;if(0!==k.$roomContainer.length&&(void 0!==k.form.find(".gcw-clone-rooms-fields")[0]&&(b=parseInt(k.form.find(".gcw-clone-rooms-fields")[0].value,10)),void 0!==b)){isNaN(b)&&(b=1);var d=parseInt(k.numberOfRooms,10);isNaN(d)&&(d=1);d<b?k.addRoomsFields(b):d>b&&k.removeRoomsFields(b);k.numberOfRooms=b}});f.subscribe("typeahead.resultSelected",function(a,c){var b=c.element;b&&g(b.context).parent("label").focus()});k.setCurrentState();k.isActive&&k.initForm();return k};e.getCurrentActiveForm=function(a){var c=[],b;for(b in a)if(c=g.grep(a[b],function(a){return!0===a.isActive}),0<c.length)break;return c};e.setFormsStatus=function(a){for(var c in a)g.each(a[c],function(a,c){c.setCurrentState()})};return e});define("gcwProcessingFunctions","GcwActivitiesProcessingFunctions GcwActivitiesIndiaProcessingFunctions GcwCarsProcessingFunctions GcwCarsAsiaProcessingFunctions GcwCarsIndiaProcessingFunctions GcwCruisesProcessingFunctions GcwFlightsProcessingFunctions GcwFlightsIndiaProcessingFunctions GcwHotelsProcessingFunctions GcwPackagesProcessingFunctions GcwPackagesFlexibleShoppingProcessingFunctions GcwRailsProcessingFunctions GcwThreeppProcessingFunctions GcwPackagesEssPassthroughProcessingFunctions".split(" "),function(g,f,e,b,a,d,c,h,n,q,l,m,p,r){return{hotels:function(a){return(new n(a)).dispatch()},flights:function(a,b,d){return(new c(a,b,d)).dispatch()},flights_india:function(a){return(new h(a)).dispatch()},rails:function(a){return(new m(a)).dispatch()},packages:function(a){var c=a.form;return c.hasClass("ess-passthrough-form")&&c.hasClass("flexible-shopping-form")?(new r(a)).dispatch():c.hasClass("flexible-shopping-form")?"all-inclusive"!==c.data("gcw-current-package-type")||c.hasClass("set-cloud-FH")?"all-inclusive"===c.data("gcw-current-package-type")&&c.hasClass("set-cloud-FH")?(new p(a)).dispatch_ai_cloud():(new l(a)).dispatch():(new p(a)).dispatch_ai():(new q(a)).dispatch()},cruises:function(a){return(new d(a)).dispatch()},threePP:function(a){return(new p(a)).dispatch()},threePP_cloud:function(a){return(new p(a)).dispatch_cloud()},threePP_ach:function(a){return(new p(a)).dispatch_ach()},threePP_eb_de:function(a){return(new p(a)).dispatch_eb_de()},threePP_uk:function(a){return(new p(a)).dispatch_uk()},cars_asia:function(a){return(new b(a)).dispatch()},cars_india:function(c){return(new a(c)).dispatch()},activities_india:function(a){return(new f(a)).dispatch()},activities:function(a){return(new g(a)).dispatch()},cars:function(a){return(new e(a)).dispatch()}}});define("GcwActivitiesProcessingFunctions",["classCheck","GcwUtilsProcessingFunctions"],function(g,f){function e(a){g(this,e);b=this;b.$form=a.form;b.idSuffix=a.getKeyParameter()}var b;e.prototype.dispatch=function(){if($("#activity-ttd"+b.idSuffix).prop("checked")){var a=b.$form.find("[name\x3dlocation]").val();var d=b.$form.find("[name\x3dstartDate]").val(),c=b.$form.find("[name\x3dendDate]").val(),h=b.$form.find(".gcw-destination:visible"),e=f.getUTAFeature(h,"country_code"),g=f.getUTAFeature(h,"lat_long"),l=f.getUTAFeature(h,"region_id");h=f.getUTAFeature(h,"region_type");a="/things-to-do/search?\x26location\x3d"+a+("\x26startDate\x3d"+d)+("\x26endDate\x3d"+c);a+="\x26latLong\x3d"+g;a+="\x26rid\x3d"+l;a+="\x26regionType\x3d"+h;a+="\x26countryCode\x3d"+e}else e=!0===$("#activity-gt-fromairport"+b.idSuffix).prop("checked"),a=f.getGroundTransfersSearchURL(b.$form,b.idSuffix,e);return f.returnValue(!0,a)};return e});define("GcwActivitiesIndiaProcessingFunctions",["classCheck","GcwUtilsProcessingFunctions"],function(g,f){function e(a){g(this,e);b=this;b.$form=a.form;b.idSuffix=a.getKeyParameter()}var b;e.prototype.dispatch=function(){var a=b.$form.find(".gcw-destination:visible");a=f.getUTAFeature(a,"country_code");f.replaceFormAction(b.$form,a,"IN");var d=b.$form.attr("action");if("/things-to-do/search"===d){var c=f.getWindowLocation();c=c.replace("wwwexpediacoin","wwwexpediacomsg").replace("www.expedia.co.in","www.expedia.com.sg");b.$form.attr("action",c+d)}d="";a&&"IN"!==a&&(d="INLX");f.setInput(b.$form,"rfrr",d);f.setUSDateInHiddenInput(b.$form,"gcw-start-date","startDate");f.setUSDateInHiddenInput(b.$form,"gcw-end-date","endDate");return f.returnValue(!1)};return e});
define("GcwCarsProcessingFunctions",["classCheck","GcwUtilsProcessingFunctions"],function(g,f){function e(a){g(this,e);b=this;b.$form=a.form;b.idSuffix=a.getKeyParameter()}var b;e.prototype.dispatch=function(){if($("#car-car"+b.idSuffix).prop("checked"))var a=b.getCarsSearchURL();else a=!0===$("#car-gt-fromairport"+b.idSuffix).prop("checked"),a=f.getGroundTransfersSearchURL(b.$form,b.idSuffix,a);return f.returnValue(!0,a)};e.prototype.getCarsSearchURL=function(){var a="carsearch?",d=b.$form.find("[name\x3dlocn]").val();d&&(a+="\x26locn\x3d"+d,(d=b.$form.find("[name\x3dpickupIATACode]").val())&&(a+="\x26pickupIATACode\x3d"+d),(d=b.$form.find("[name\x3dolat]").val())&&(a+="\x26olat\x3d"+d),(d=b.$form.find("[name\x3dolong]").val())&&(a+="\x26olong\x3d"+d),(d=b.$form.find("[name\x3ddpln]").val())&&(a+="\x26dpln\x3d"+d),(d=b.$form.find("[name\x3dpickupCountryCode]").val())&&(a+="\x26pickupCountryCode\x3d"+d));if(d=b.$form.find("[name\x3dloc2]").val())a+="\x26loc2\x3d"+d,(d=b.$form.find("[name\x3dreturnIATACode]").val())&&(a+="\x26returnIATACode\x3d"+d),(d=b.$form.find("[name\x3ddrid1]").val())&&(a+="\x26drid1\x3d"+d),(d=b.$form.find("[name\x3ddlat]").val())&&(a+="\x26dlat\x3d"+d),(d=b.$form.find("[name\x3ddlong]").val())&&(a+="\x26dlong\x3d"+d),(d=b.$form.find("[name\x3dreturnCountryCode]").val())&&(a+="\x26returnCountryCode\x3d"+d);(d=b.$form.find("[name\x3ddate1]").val())&&(a+="\x26date1\x3d"+d);(d=b.$form.find("[name\x3dtime1]").val())&&(a+="\x26time1\x3d"+d);(d=b.$form.find("[name\x3ddate2]").val())&&(a+="\x26date2\x3d"+d);(d=b.$form.find("[name\x3dtime2]").val())&&(a+="\x26time2\x3d"+d);b.$form.find("[id\x3dcar-driver-age-container"+b.idSuffix+"]").hasClass("gcw-disabled")||(d=b.$form.find("[name\x3dage]").val())&&(a+="\x26age\x3d"+d);"true"===b.$form.find('a[href\x3d"#cars-adv-options'+b.idSuffix+'"]').attr("aria-expanded")&&(d=b.$form.find("[name\x3dkind]").val())&&(a+="\x26kind\x3d"+d);return a+"\x26dagv\x3d1\x26subm\x3d1\x26fdrp\x3d0\x26ttyp\x3d2\x26acop\x3d2\x26rdus\x3d10\x26rdct\x3d1\x26styp\x3d4"};return e});define("GcwCarsAsiaProcessingFunctions",["classCheck","uitk","GcwUtilsProcessingFunctions"],function(g,f,e){function b(d){g(this,b);a=this;a.$form=d.form;a.idSuffix=d.getKeyParameter()}var a;b.prototype.dispatch=function(){var b=a.$form.find(".gcw-carPickUp"),c=a.$form.find(".gcw-carDropOff"),h=a.$form.find(".gcw-start-date"),n=a.$form.find(".gcw-start-time"),g=a.$form.find(".gcw-end-date"),l=a.$form.find(".gcw-end-time"),m=a.$form.find("[name\x3dlocationName]"),p=a.$form.find("[name\x3dpickupDate]"),r=a.$form.find("[name\x3dpickupMonth]"),t=a.$form.find("[name\x3dpickupYear]"),u=a.$form.find("[name\x3dreturnDate]"),v=a.$form.find("[name\x3dreturnMonth]"),w=a.$form.find("[name\x3dreturnYear]"),x=a.$form.find("[name\x3dpickupHour]"),y=a.$form.find("[name\x3dpickupMinute]"),A=a.$form.find("[name\x3dreturnHour]"),B=a.$form.find("[name\x3dreturnMinute]"),k=a.$form.find("[name\x3dpickupIATACode]"),C=a.$form.find("[name\x3dreturnIATACode]"),D=a.$form.find("[name\x3dpickupHotelId]"),F=a.$form.find("[name\x3dpickupCity]");n=n.val();l=l.val();h&&h.length&&h.val()&&(h=f.datePickerCalendarObj.getDateFromString(h.val(),!0),p&&p.length&&p.val(h.getDate()),r&&r.length&&r.val(h.getMonth()),t&&t.length&&t.val(h.getFullYear()));g&&g.length&&g.val()&&(g=f.datePickerCalendarObj.getDateFromString(g.val(),!0),u&&u.length&&u.val(g.getDate()),v&&v.length&&v.val(g.getMonth()),w&&w.length&&w.val(g.getFullYear()));c&&k&&C&&c.length&&k.length&&C.length&&""===c.val()&&""!==k.val()&&C.val(k.val());k&&k.length&&""===k.val()?(C.val(""),b=D&&F&&D.length&&F.length&&""!==D.val()&&""!==F.val()?F.val():b.val()):b="";m&&m.length&&e.setInput(a.$form,"locationName",b);x&&x.length&&e.setInput(a.$form,"pickupHour",a.convertHourCarsAsia(n));y&&y.length&&e.setInput(a.$form,"pickupMinute",parseInt(n.substring(2,4)));A&&A.length&&e.setInput(a.$form,"returnHour",a.convertHourCarsAsia(l));B&&B.length&&e.setInput(a.$form,"returnMinute",parseInt(l.substring(2,4)));return e.returnValue(!1)};b.prototype.convertHourCarsAsia=function(a){var c=-1<a.indexOf("PM"),b=parseInt(a.substring(0,2));c?12>parseInt(a.substring(0,2))&&(b=parseInt(a.substring(0,2))+12):12===parseInt(a.substring(0,2))&&(b=parseInt(a.substring(0,2))-12);return b};return b});define("GcwCarsIndiaProcessingFunctions",["classCheck","GcwUtilsProcessingFunctions"],function(g,f){function e(a){g(this,e);b=this;b.$form=a.form;b.idSuffix=a.getKeyParameter()}var b;e.prototype.dispatch=function(){var a=b.$form.find(".gcw-carPickUp:visible");a=f.getUTAFeature(a,"country_code");f.replaceFormAction(b.$form,a,"IN");a=b.$form.attr("action");if("/carsearch"===a){var d=f.getWindowLocation();d=d.replace("wwwexpediacoin","wwwexpediacom").replace("www.expedia.co.in","www.expedia.com");$("html").hasClass("lt-ie9")?b.$form.attr("action",d+a):b.$form.attr("action",d+a+"/app")}f.setUSDateInHiddenInput(b.$form,"gcw-start-date","date1");f.setUSDateInHiddenInput(b.$form,"gcw-end-date","date2");return f.returnValue(!1)};return e});define("GcwCruisesProcessingFunctions",["classCheck","GcwUtilsProcessingFunctions"],function(g,f){function e(a){g(this,e);b=this;b.$form=a.form;b.idSuffix=a.getKeyParameter();b.gcwFormInstance=a}var b;e.prototype.dispatch=function(){var a=b.$form.find(".gcw-show-adv-options");0<a.length&&(a.hasClass("open")?(b.$form.find(".gcw-cruises-bs").val(""),b.$form.find(".gcw-cruises-as").val("1")):(b.$form.find(".gcw-cruises-bs").val("1"),b.$form.find(".gcw-cruises-as").val("")));a=b.$form.find(".gcw-start-date");0<a.length&&""!==a.val()&&(a=a.val(),f.setInput(b.$form,"earliest-departure-date",b.getFormattedDate(a)));a=b.$form.find(".gcw-end-date");0<a.length&&""!==a.val()&&(a=a.val(),f.setInput(b.$form,"latest-departure-date",b.getFormattedDate(a)));a=b.getAdultCountElement();0<a.length&&""!==a.val()&&(a=a.val(),f.setInput(b.$form,"adultCount",a));a=b.buildChildren();f.setInput(b.$form,"childCount",a);return f.returnValue(!1)};e.prototype.getFormattedDate=function(a){var b="";a=uitk.datePickerCalendarObj.getDateFromString(a);if(a){b=a.getDate();var c=a.getMonth()+1;a=a.getFullYear();b=a+"-"+c+"-"+b}return b};e.prototype.buildChildren=function(){return b.gcwFormInstance.travelerSelectorEnabled?b.buildChildrenForTravelerSelector():b.buildChildrenForRegularMarkup()};e.prototype.buildChildrenForRegularMarkup=function(){var a=b.$form.find(".num-children:visible"),d="";if(a&&0<a.length&&0<a.val()){d+=a.val();d+="\x26childAges\x3d";var c=b.$form.find(".children-data select:visible");c.each(function(a,b){d+=$(b).val();a!==c.length-1&&(d+=",")})}return d};e.prototype.buildChildrenForTravelerSelector=function(){var a=f.retrieveTravelerSelectorPassengersData(b.gcwFormInstance.form),d=a.totalChildrenFields.length,c="";if(0<d){c+=d;c+="\x26childAges\x3d";var h=a.totalChildrenFields;$.each(h,function(a,b){c+=$(b).find("select").val();a!==h.length-1&&(c+=",")})}return c};e.prototype.getAdultCountElement=function(){return b.gcwFormInstance.travelerSelectorEnabled?b.$form.find(".gcw-traveler-selector-num-adults"):b.$form.find(".num-adults:visible")};return e});
define("GcwFlightsProcessingFunctions",["classCheck","GcwUtilsProcessingFunctions","GcwPackagesProcessingFunctions","GcwPackagesFlexibleShoppingProcessingFunctions","GcwPackagesEssPassthroughProcessingFunctions"],function(g,f,e,b,a){function d(a){g(this,d);c=this;c.$form=a.form;c.idSuffix=a.getKeyParameter();c.gcwFormInstance=a}var c;d.prototype.dispatch=function(){var d=c.getFlightType();f.setInput(c.$form,"trip",d);var n=f.getLocationField(c.$form,"origin").val(),g=f.getLocationField(c.$form,"destination").val(),l=c.$form.find(".gcw-flights-start-date:visible input").val();l=c.buildLeg(n,g,l);f.setInput(c.$form,"leg1",l);"oneway"===d&&f.setInput(c.$form,"leg2","");"roundtrip"===d&&(l=c.$form.find(".gcw-flights-end-date:visible input").val(),n=c.buildLeg(g,n,l),f.setInput(c.$form,"leg2",n));if("multi"===d)for(d=$(c.$form.find(".gcw-multi-flight-data")),n=0;4>n&&d.find("input.gcw-destination").eq(n).val();n++){g=d.find("input.gcw-origin").eq(n).val();l=d.find("input.gcw-destination").eq(n).val();var m=d.find("input.gcw-start-date").eq(n).val();g=c.buildLeg(g,l,m);f.setInput(c.$form,"leg"+(n+2),g)}d=c.buildPassengers();f.setInput(c.$form,"passengers",d);d=c.buildOptions();f.setInput(c.$form,"options",d);return c.isPackage()?(d=c.$form.hasClass("ess-passthrough-form")&&c.$form.hasClass("flexible-shopping-form")?a.getFlightsPackageUrl(c.$form):c.$form.hasClass("flexible-shopping-form")?b.getFlightsPackageUrl(c.$form):e.getFlightsPackageUrl(c.$form),f.returnValue(!0,d)):f.returnValue(!1)};d.prototype.buildLeg=function(a,c,b){return"from:"+a+",to:"+c+",departure:"+b+"TANYT"};d.prototype.getFlightType=function(){return c.$form.find(".gcw-sub-nav-option:checked").data("gcw-sub-nav-option-name")||"roundtrip"};d.prototype.retrievePassengersData=function(){return c.gcwFormInstance.travelerSelectorEnabled?c.retrieveTravelerSelectorPassengersData():c.retrieveDropdownsPassengersData()};d.prototype.retrieveTravelerSelectorPassengersData=function(){var a=c.$form.find(".travel-selector-wrapper:visible"),b=a.find(".gcw-traveler-amount-select"),d={},e=c.$form.find('input[name\x3d"lap-or-seat"]:checked');e.length||(e=a.find(".gcw-young-child:checked"));a=a.find(".gcw-child-field").not(".gcw-disabled");d.childrenAges=[];a.each(function(a,c){d.childrenAges.push($(c).find("select").val())});d.adults=parseInt(b.data("adults"),10);d.children=parseInt(b.data("children"),10);d.infantInLap=0<e.length&&"seat"===e.val().toLowerCase()?"N":"Y";return d};d.prototype.retrieveDropdownsPassengersData=function(){var a={},b=c.$form.find(".children-data select:visible"),d=c.$form.find(".num-adults:visible"),e=c.$form.find('input[name\x3d"lap-or-seat"]:checked');a.adults=d.val();a.children=b.length;a.childrenAges=[];b&&0<b.length&&b.each(function(c,b){a.childrenAges.push($(b).val())});a.infantInLap=0<e.length&&"seat"===e.val().toLowerCase()?"N":"Y";return a};d.prototype.buildPassengers=function(){var a=c.retrievePassengersData(),b="",d=c.buildChildren(a),e=a.infantInLap;b=b+("children:"+d)+(",adults:"+a.adults);return b+",seniors:0"+(",infantinlap:"+e)};d.prototype.buildChildren=function(a){return 0<a.children?a.children+"["+a.childrenAges.toString().replace(/,/g,";")+"]":"0"};d.prototype.buildOptions=function(){var a=c.$form.find(".gcw-cabin-class-select").val(),b=0<c.$form.find(".gcw-nonstop-checkbox:checked").length?"0":"",d=0<c.$form.find(".gcw-refundable-checkbox:checked").length?"Y":"",e=c.$form.find(".gcw-airline-select").val(),f="";a&&(f+="cabinclass:"+a+",");b&&(f+="maxhops:"+b+",");d&&(f+="nopenalty:"+d+",");e&&(f+="carrier:"+e);return f};d.prototype.isPackage=function(){var a=c.$form.find(".gcw-flights-add-hotel input"),b=c.$form.find(".gcw-flights-add-car input");a=a.prop("checked");b=b.prop("checked");return a||b};return d});define("GcwFlightsIndiaProcessingFunctions",["classCheck","GcwUtilsProcessingFunctions"],function(g,f){function e(a){g(this,e);b=this;b.$form=a.form;b.idSuffix=a.getKeyParameter()}var b;e.prototype.dispatch=function(){var a=b.$form.find(".gcw-sub-nav-option:checked").data("gcw-sub-nav-option-name")||"roundtrip",d=b.$form.find(".children-data select:visible"),c=b.splitChildren(d);d=c[0];c=c[1];var e=b.$form.find(".num-adults:visible").val();f.setInput(b.$form,"rnd_one","O");f.setInput(b.$form,"dep_time","");"roundtrip"===a&&f.setInput(b.$form,"ret_time","");f.setInput(b.$form,"adults",e);f.setInput(b.$form,"childs",0===d?"":d);f.setInput(b.$form,"infants",0===c?"":c);f.setInput(b.$form,"affiliatePartnerId","0");return f.returnValue(!1)};e.prototype.splitChildren=function(a){var b=0,c=0;a&&0<a.length&&a.each(function(a,d){$(d).val()&&1>$(d).val()?c++:$(d).val()&&b++});return[b,c]};return e});
define("GcwHotelsProcessingFunctions",["classCheck","GcwUtilsProcessingFunctions","GcwPackagesProcessingFunctions","GcwPackagesFlexibleShoppingProcessingFunctions","GcwPackagesEssPassthroughProcessingFunctions"],function(g,f,e,b,a){function d(a){g(this,d);c=this;c.$form=a.form;c.idSuffix=a.getKeyParameter();c.gcwFormInstance=a}var c;d.prototype.dispatch=function(){if(c.isNinePlusRooms()){var d=c.getNinePlusRoomsUrl();return f.returnValue(!0,d)}if(0<c.$form.find(".gcw-guests-select select:visible").length)d=c.$form.find(".gcw-guests-select select option:selected").data("gcw-guests-values").split(","),$.each(d,function(a,b){if("adults"===b.split("-")[0]){var d=b.split("-")[1];c.$form.find("[name\x3dadults]").first().val(d)}"children"===b.split("-")[0]&&(d=b.split("-")[1],c.$form.find("[name\x3dchildren]").first().val(d))});else{d=c.calculateAdultOccupancyString();var g=c.calculateChildOccupancyString();c.$form.find("[name\x3dadults]").first().val(d);c.$form.find("[name\x3dchildren]").first().val(g)}c.isTAAPPackageRate()&&c.$form.find("[name\x3dpackageRates]").first().val(!0);return c.isPackage()?(d=c.$form.hasClass("ess-passthrough-form")&&c.$form.hasClass("flexible-shopping-form")?a.getHotelsPackageUrl(c.$form,c.idSuffix):c.$form.hasClass("flexible-shopping-form")?b.getHotelsPackageUrl(c.$form,c.idSuffix):e.getHotelsPackageUrl(c.$form,c.idSuffix),f.returnValue(!0,d)):f.returnValue(!1)};d.prototype.calculateChildOccupancyString=function(){return c.gcwFormInstance.travelerSelectorEnabled?f.calculateChildOccupancyStringWithTravelerSelector(c.gcwFormInstance):f.calculateChildOccupancyStringWithDropdowns(c.gcwFormInstance)};d.prototype.calculateAdultOccupancyString=function(){return c.gcwFormInstance.travelerSelectorEnabled?c.buildAdultOccupancyWithTravelerSelector():c.buildAdultOccupancyWithDropdowns()};d.prototype.buildAdultOccupancyWithDropdowns=function(){var a=[];c.$form.find(".gcw-rooms-container .room-data:visible").each(function(){a.push($(this).find(".num-adults").val())});return a.toString()};d.prototype.buildAdultOccupancyWithTravelerSelector=function(){for(var a=f.retrieveTravelerSelectorPassengersData(c.gcwFormInstance.form),b=a.rooms,d=[],e=0;e<b;e++)d.push(a["room_"+(e+1)].adults);return d.toString()};d.prototype.isNinePlusRooms=function(){return c.gcwFormInstance.travelerSelectorEnabled?"group"===c.$form.find(".gcw-rooms-field").val():"group"===c.$form.find(".gcw-rooms-field").children("select").val()};d.prototype.getNinePlusRoomsUrl=function(){var a=c.$form.data("gcw-group-booking-url"),b=c.$form.data("locale"),d=c.$form.data("siteid"),e=c.$form.find("#hotel-destination"+c.idSuffix).val(),f=c.$form.find("#hotel-checkin"+c.idSuffix).val();f=c.convertFormat(f);var g=c.$form.find("#hotel-checkout"+c.idSuffix).val(),r=c.convertFormat(g),t=c.isExtendedStay(f,r)?"\x26ES\x3d1":"";g=c.$form.data("nineplus-brand-param");a=a+"?ESite\x3d"+d+"\x26Loc\x3d"+b+"\x26City\x3d"+encodeURIComponent(e)+"\x26InDate\x3d"+f+"\x26OutDate\x3d"+r+t;g&&"AARP"===g&&(a=a+("\x26Brand\x3d"+g)+"\x26kw\x3dATC");return a};d.prototype.convertFormat=function(a){if(!a||!a.length)return"";a=uitk.datePickerCalendarObj.getDateFromString(a,!0);if(!a)return"";var b=c.numberToTwoDigitString(a.getMonth()+1),d=c.numberToTwoDigitString(a.getDate());a=a.getFullYear();return b+"/"+d+"/"+a};d.prototype.numberToTwoDigitString=function(a){a=a.toString();return 1===a.length?"0"+a:a};d.prototype.isExtendedStay=function(a,c){if(!(a&&a.length&&c&&c.length))return!1;a=uitk.datePickerCalendarObj.getDateFromString(a,!0);c=uitk.datePickerCalendarObj.getDateFromString(c,!0);return 30<=(c-a)/1E3/60/60/24};d.prototype.isPackage=function(){var a=0<c.$form.find("#hotel-add-flight-checkbox"+c.idSuffix+":checked").length,b=0<c.$form.find("#hotel-add-car-checkbox"+c.idSuffix+":checked").length;return a||b?!0:!1};d.prototype.isTAAPPackageRate=function(){return 0<c.$form.find("#package-rates-checkbox-variant"+c.idSuffix+":checked").length};return d});
define("GcwPackagesProcessingFunctions",["classCheck","GcwUtilsProcessingFunctions"],function(g,f){function e(a){g(this,e);b=this;b.$form=a.form;b.idSuffix=a.getKeyParameter()}var b;e.prototype.dispatch=function(){var a=f.getLocationField(b.$form,"origin"),d=f.getLocationField(b.$form,"destination"),c=b.$form.find("#packages-type"+b.idSuffix),h=b.$form.find("#packages-fr-airport"+b.idSuffix),g=b.$form.find("#packages-dest-name"+b.idSuffix),q=b.$form.find("#packages-from-date"+b.idSuffix),l=b.$form.find("#packages-to-date"+b.idSuffix),m="\x26"+e.calculateAdultsForPackages(b.$form),p="\x26"+e.calculateChildrenForPackages(b.$form);m+=p;var r=b.$form.find("#packages-flex-from"+b.idSuffix),t=b.$form.find("#packages-flex-to"+b.idSuffix),u=b.$form.find("#package-checkin"+b.idSuffix+":visible"),v=b.$form.find("#package-checkout"+b.idSuffix+":visible"),w=b.$form.find("#packages-cabin-class"+b.idSuffix),x=b.$form.find("#package-advanced-preferred-class"+b.idSuffix);p=b.$form.find(".gcw-destination:visible");var y=f.getUTAFeature(p,"region_id"),A=f.getUTAFeature(p,"airport_code");p=0;y&&A&&f.setInput(b.$form,"DestID",y+":"+A);m=m.split("\x26");y=""===c.val()?b.packageSelectedForUrl():c.val();""!==y&&c.val(y);h.val(a.val());g.val(d.val());q.val(b.$form.find(".gcw-start-date:visible").val());l.val(b.$form.find(".gcw-end-date:visible").val());0<u.length&&r.val(u.val());0<v.length&&t.val(v.val());""!==x.val()&&x.is(":visible")?w.val(x.val()):w.val("");for(p;p<m.length;p++)a=m[p].split("\x3d")[0],d=m[p].split("\x3d")[1],1<m[p].length&&f.setInput(b.$form,a,d);return f.returnValue(!1)};e.prototype.packageSelectedForUrl=function(){var a="";switch(b.$form.find(".sub-nav-select").find('input[type\x3d"radio"]:checked').data("gcw-sub-nav-option-name")){case "flight-hotel":a="2";break;case "flight-hotel-car":a="1";break;case "flight-car":a="5";break;case "hotel-car":a="3"}return a};e.getFlightsPackageUrl=function(a){var b=a.data("gcw-key"),c=f.getLocationField(a,"origin"),h=f.getLocationField(a,"destination");var g="\x26"+e.getFlightsPackageType(a);var q="\x26"+e.getFlightsTripType(a);h="\x26destName\x3d"+h.val();var l="\x26FromDate\x3d"+a.find(".gcw-start-date:visible").val();var m="\x26ToDate\x3d"+a.find(".gcw-end-date:visible").val();var p="";if("\x26PackageType\x3d1"===g||"\x26PackageType\x3d5"===g){var r=a.find("#driver-age-checkbox-"+b).is(":checked");!r&&void 0!==r&&void 0!==a.find("#car-driver-age-"+b).val()&&a.find("#car-driver-age-"+b).val()&&(p="\x26driverAge\x3d"+a.find("#car-driver-age-"+b).val())}c="\x26frAirport\x3d"+c.val();b=(b=e.getFlightsAirlineOptionsUrl(a,b))?"\x26"+b:"";r="\x26FlexFromDate\x3d"+a.find(".gcw-start-date:visible").last().val();var t="\x26FlexToDate\x3d"+a.find(".gcw-end-date:visible").last().val();var u="\x26"+e.calculateAdultsForPackages(a);a=e.calculateChildrenForPackages(a);return"/pubspec/scripts/eap.asp?GOTO\x3dPACKAGEWIZ"+g+q+h+l+m+p+c+b+r+t+u+(a?"\x26"+a:"")};e.getHotelsPackageUrl=function(a,b){var c="\x26"+e.getHotelsPackageType(a,b);var d="\x26destName\x3d"+a.find(".gcw-destination").val();var f="\x26FromDate\x3d"+a.find(".gcw-start-date").val();var g="\x26ToDate\x3d"+a.find(".gcw-end-date").val();var l="";if("\x26PackageType\x3d1"===c||"\x26PackageType\x3d3"===c){var m=a.find("#driver-age-checkbox"+b).is(":checked");!m&&void 0!==m&&void 0!==a.find("#car-driver-age"+b)&&a.find("#car-driver-age"+b).val()&&(l="\x26driverAge\x3d"+a.find("#car-driver-age"+b).val())}m="\x26frAirport\x3d"+a.find(".gcw-flight-origin").val();var p="\x26"+e.calculateAdultsForPackages(a);var r=(r=e.calculateChildrenForPackages(a))?"\x26"+r:"";var t=e.sortByPropertyType(a);var u=a.find("#packageDirectFlight"+b).is(":checked");return"/pubspec/scripts/eap.asp?GOTO\x3dPACKAGEWIZ"+c+d+f+g+l+m+p+r+t+(u?"\x26Direct\x3d1":"")};e.getFlightsPackageType=function(a){var b=a.find(".gcw-flights-add-hotel input").prop("checked");a=a.find(".gcw-flights-add-car input").prop("checked");var c="PackageType\x3d";b&&a?c+=1:b&&!a?c+=2:!b&&a&&(c+=5);return c};e.getFlightsTripType=function(a){return"tripType\x3d"+("roundtrip"===a.find("[name\x3d'flight-type']:checked").data("gcw-sub-nav-option-name")?"ROUND_TRIP":"ONE_WAY")};e.getHotelsPackageType=function(a,b){var c=0<a.find("#hotel-add-flight-checkbox"+b+":checked").length,d=0<a.find("#hotel-add-car-checkbox"+b+":checked").length,e="PackageType\x3d";c&&d?e+=1:c?e+=2:d&&(e+=3);return e};e.getFlightsAirlineOptionsUrl=function(a,b){var c;var d=[];if(a.find("#flight-advanced-options-fields-"+b).is(":visible")){(c=a.find("#flight-advanced-preferred-airline-"+b).val())&&d.push("Carrier\x3d"+c);c=a.find("#flight-advanced-preferred-class-"+b).val();switch(c){case "first":c="1";break;case "business":c="2";break;default:c=""}c&&d.push("Class\x3d"+c);c=a.find("#advanced-flight-nonstop-"+b).is(":checked")}else c=a.find("#packageDirectFlight-"+b).is(":checked");c&&d.push("Direct\x3d1");return d.join("\x26")};e.calculateAdultsForPackages=function(a){return a.hasClass("gcw-traveler-selector")?e.calculateAdultsForPackagesWithTravelerSelector(a):e.calculateAdultsForPackagesWithDropdowns(a)};e.calculateAdultsForPackagesWithTravelerSelector=function(a){a=f.retrieveTravelerSelectorPassengersData(a);var b=a.rooms,c=[];c.push("NumRoom\x3d"+b);for(var e=0;e<b;e++){var g=e+1;c.push("NumAdult"+g+"\x3d"+a["room_"+g].adults)}return c.join("\x26")};e.calculateAdultsForPackagesWithDropdowns=function(a){var b=a.find(".gcw-rooms-container .room-data:visible"),c=[];0<b.length?(c.push("NumRoom\x3d"+b.length),b.each(function(a,b){c.push("NumAdult"+(a+1)+"\x3d"+$(b).find(".num-adults").val())})):(c.push("NumRoom\x3d1"),c.push("NumAdult1\x3d"+a.find(".num-adults").val()));return c.join("\x26")};e.calculateChildrenForPackages=function(a){return a.hasClass("gcw-traveler-selector")?e.calculateChildrenForPackagesWithTravelerSelector(a):e.calculateChildrenForPackagesWithDropdowns(a)};e.calculateChildrenForPackagesWithTravelerSelector=function(a){a=f.retrieveTravelerSelectorPassengersData(a);for(var b=[],c=[],e=[],g=a.rooms,q=0;q<g;q++){var l=q+1,m=a["room_"+l].children;b.push("NumChild"+l+"\x3d"+m);for(var p=0;p<m;p++){var r=p,t=r+1;r=a["room_"+l].$childrenFields.eq(r).find("select");r=parseInt(r.val(),10)||0;c.push("Rm"+l+"Child"+t+"Age\x3d"+r)}}e=e.concat(b,c);if(b.length&&c.length)return e.push("InfantInSeat\x3d"+("N"===a.infantInLap?"1":"0")),e.join("\x26")};e.calculateChildrenForPackagesWithDropdowns=function(a){var b=[],c=[],e=[],f=a.find(".gcw-rooms-container .room-data:visible");0<f.length?f.each(function(a,d){b.push("NumChild"+(a+1)+"\x3d"+$(d).find(".num-children").val());(0!==$(d).find(".gcw-child-field select:visible").length?$(d).find(".gcw-child-field select:visible"):$(d).find(".gcw-flights-child-field select:visible")).each(function(b,d){var e=$(d).val()?$(d).val():"0";c.push("Rm"+(a+1)+"Child"+(b+1)+"Age\x3d"+e)})}):(b.push("NumChild1\x3d"+a.find(".num-children").val()),a.find(".gcw-child-field select:visible").each(function(a,b){var d=$(b).val()?$(b).val():"0";c.push("Rm1Child"+(a+1)+"Age\x3d"+d)}));e=e.concat(b,c);if(b.length&&c.length)return a=a.find(".gcw-young-child:checked"),a=0<a.length&&"seat"===a.val().toLowerCase()?"1":"0",e.push("InfantInSeat\x3d"+a),e.join("\x26")};e.sortByPropertyType=function(a){a=a.find("input[name\x3dsort]:checked");if(1!==a.length)return"";a=a.val();return"\x26sortBy\x3d"+("hotel"===a?37:"vacationRental"===a?34:0)};return e});
define("GcwPackagesFlexibleShoppingProcessingFunctions",["classCheck","GcwUtilsProcessingFunctions"],function(g,f){function e(a){g(this,e);b=this;b.$form=a.form;b.idSuffix=a.getKeyParameter()}var b;e.selectors={driverAgeCheckboxSelector:"#driver-age-checkbox",driverAgeFieldSelector:"#car-driver-age",directFlightSelector:"#packageDirectFlight",partialCarSelector:"#partialCarBooking",packagesToDateSelector:"#packages-to-date",packageTypeSelector:"#packages-type",packageFromAirportSelector:"#packages-fr-airport",packageDestinationNameSelector:"#packages-dest-name",carPickupDate:"#package-car-pickup-date",carPickupTime:"#package-car-pickup-time",carDropOffDate:"#package-car-dropoff-date",carDropOffTime:"#package-car-dropoff-time"};e.flex={flexibleShoppingUrl:"/flexibleshopping?",directFlight:"isDirectFlight\x3d",driverAge:"driverAge\x3d",ttla:"ttla\x3d",fromDate:"fromDate\x3d",toDate:"toDate\x3d",destination:"destination\x3d",ftla:"ftla\x3d",originId:"originId\x3d",origin:"origin\x3d",destinationId:"destinationId\x3d",carPickupDate:"pickUpDate\x3d",carPickupTime:"time1\x3d",carDropOffDate:"dropOffDate\x3d",carDropOffTime:"time2\x3d"};e.prototype.dispatch=function(){if(e.checkHISRedirectEnabled(b.$form))return f.returnValue(!0,e.createUrlAndRedirectToHIS(b.$form,b.idSuffix));var a=e.selectors,d=b.$form.find(a.packageTypeSelector+b.idSuffix),c=b.$form.find(a.packageFromAirportSelector+b.idSuffix),h=b.$form.find(a.packageDestinationNameSelector+b.idSuffix),g=b.$form.find("#packages-from-date"+b.idSuffix);a=b.$form.find(a.packagesToDateSelector+b.idSuffix);var q="\x26"+e.calculateAdultsForPackages(b.$form),l="\x26"+e.calculateChildrenForPackages(b.$form);q+=l;var m=b.$form.find("#packages-flex-from"+b.idSuffix),p=b.$form.find("#packages-flex-to"+b.idSuffix),r=b.$form.find("#package-checkin"+b.idSuffix+":visible"),t=b.$form.find("#package-checkout"+b.idSuffix+":visible"),u=b.$form.find("#packages-cabin-class"+b.idSuffix),v=b.$form.find("#package-advanced-preferred-class"+b.idSuffix);l=0;q=q.split("\x26");var w=""===d.val()?b.packageSelectedForUrl():d.val();""!==w&&d.val(w);c.val(b.$form.find(".gcw-origin:visible").val());h.val(b.$form.find(".gcw-destination:visible").val());g.val(b.$form.find(".gcw-start-date:visible").val());a.val(b.$form.find(".gcw-end-date:visible").val());0<r.length&&m.val(r.val());0<t.length&&p.val(t.val());""!==v.val()&&v.is(":visible")?u.val(v.val()):u.val("");for(l;l<q.length;l++)d=q[l].split("\x3d")[0],c=q[l].split("\x3d")[1],1<q[l].length&&f.setInput(b.$form,d,c);return f.returnValue(!0,this.getPackageUrl(b.$form,b.idSuffix))};e.checkHISRedirectEnabled=function(a){var b=a.hasClass("redirectToHIS"),c=a.find(".gcw-destination:visible").attr("data-gcw-hotel-id");a=f.calculatePackageTypeForHIS(a);return b&&""!==c&&"/FlightHotel"===a?!0:!1};e.createUrlAndRedirectToHIS=function(a,b){var c="?HotelID\x3d"+a.find(".gcw-destination:visible").attr("data-gcw-hotel-id"),d="\x26locale\x3d"+a.data("locale"),e=f.calculatePackageTypeForHIS(a),g="/"+a.find(".gcw-start-date:visible").val().replace(/(\d\d)\/(\d\d)\/(\d{4})/,"$3-$1-$2"),l="/"+a.find(".gcw-end-date:visible").val().replace(/(\d\d)\/(\d\d)\/(\d{4})/,"$3-$1-$2"),m="\x26FromAirport\x3d"+encodeURIComponent(a.find(".gcw-origin:visible").val()),p="\x26Destination\x3d"+encodeURIComponent(a.find(".gcw-destination:visible").val()),r="\x26"+f.calculateAdultsForPackagesWithDropdownsForHIS(a),t="\x26"+f.calculateChildrenForPackagesWithDropdownsForHIS(a),u=a.find("#package-advanced-preferred-class"+b).val();return"go/package/hotel/details"+e+g+l+c+m+p+r+t+(u?"\x26cabinClass\x3d"+u:"")+d};e.prototype.packageSelectedForUrl=function(){var a="";switch(b.$form.find(".sub-nav-select").find('input[type\x3d"radio"]:checked').data("gcw-sub-nav-option-name")){case "flight-hotel":a="2";break;case "flight-hotel-car":a="1";break;case "flight-car":a="5";break;case "hotel-car":a="3"}return a};e.packageContainsFlight=function(a){return"packageType\x3dfh"===a||"packageType\x3dfc"===a||"packageType\x3dfhc"===a};e.packageContainsCar=function(a){return"packageType\x3dhc"===a||"packageType\x3dfc"===a||"packageType\x3dfhc"===a};e.getDirectFlightParameter=function(a,b){var c="",d=a.find(e.selectors.directFlightSelector+b).is(":checked");void 0!==d&&d&&(c="\x26"+e.flex.directFlight+"1");return c};e.getValueInForm=function(a,b){return a.find(b).val()};e.getCarRentalParameters=function(a,b){var c=e.selectors,d="";var f=a.find(c.partialCarSelector+b).is(":checked");if(void 0!==f&&f){f=e.getValueInForm(a,c.carPickupDate+b);var g=e.getValueInForm(a,c.carPickupTime+b);var l=e.getValueInForm(a,c.carDropOffDate+b);c=e.getValueInForm(a,c.carDropOffTime+b);f&&(d+="\x26"+e.flex.carPickupDate+f,d+="\x26"+e.flex.carPickupTime+g);l&&(d+="\x26"+e.flex.carDropOffDate+l,d+="\x26"+e.flex.carDropOffTime+c)}return d};e.getDriverAgeParameter=function(a,b){var c=e.selectors,d="",f=a.find(c.driverAgeCheckboxSelector+b).is(":checked");f||void 0===f||(c=a.find(c.driverAgeFieldSelector+b),void 0!==c&&c.val()&&(d="\x26"+e.flex.driverAge+c.val()));return d};e.prototype.getPackageUrl=function(a,b){var c="",d="",g="";var q=a.find(".gcw-origin:visible");var l=a.find(".gcw-destination:visible");var m=e.flex.flexibleShoppingUrl;var p=e.getPackageType(a);var r="packageType\x3dfh"===p&&0<a.find("[name\x3dfh-subNav]").length?"\x26"+e.getBundleTripType(a):"";var t=q.val()?"\x26"+e.flex.origin+encodeURIComponent(q.val()):"";var u=f.getUTAFeature(q,"region_id");q=f.getUTAFeature(q,"airport_code");u=u?"\x26"+e.flex.originId+u:"";q=q?"\x26"+e.flex.ftla+q:"";var v=(v=e.getPackagesAirlineOptionsUrl(a,b))?"\x26"+v:"";var w="\x26"+e.flex.destination+encodeURIComponent(l.val());var x=f.getUTAFeature(l,"region_id");l=f.getUTAFeature(l,"airport_code");x=x?"\x26"+e.flex.destinationId+x:"";l=l?"\x26"+e.flex.ttla+l:"";a.hasClass("ab29954TestStateOn")&&0!==a.find("select[id*\x3ddest-DropDown]").length?l=x="":a.hasClass("gcw-ignoreTypeaheadTLAs")&&0!==a.find("input#package-origin-hp-package").length&&(l="");var y="\x26"+e.flex.fromDate+a.find(".gcw-start-date:visible").val();var A="\x26"+e.flex.toDate+("\x26tripType\x3dONE_WAY"===r?a.find(".gcw-partial-end-date:visible").val():a.find(".gcw-end-date:visible").val());var B=(B=-1<p.indexOf("h")?e.getPartialStayUrl(a):null)?"\x26"+B:"";var k="\x26"+e.calculateAdultsForPackages(a);var C=(C=e.calculateChildrenForPackages(a))?"\x26"+C:"";e.packageContainsCar(p)&&(d=e.getCarRentalParameters(a,b),g=e.getDriverAgeParameter(a,b));e.packageContainsFlight(p)&&(c=e.getDirectFlightParameter(a,b));return m+p+r+t+u+q+v+w+x+l+y+A+B+k+C+g+d+c};e.getFlightsPackageUrl=function(a){var b=a.data("gcw-key"),c="",h="";var g=a.find(".gcw-origin:visible");var q=a.find(".gcw-destination:visible");var l=e.flex.flexibleShoppingUrl;var m=e.getFlightsPackageType(a);var p="\x26"+e.getFlightsTripType(a);var r="\x26"+e.flex.destination+encodeURIComponent(q.val());var t=f.getUTAFeature(q,"region_id");var u=f.getUTAFeature(q,"airport_code");t=t?"\x26"+e.flex.destinationId+t:"";u=u?"\x26"+e.flex.ttla+u:"";q="\x26"+e.flex.fromDate+a.find(".gcw-start-date:visible").val();var v="\x26"+e.flex.toDate+a.find(".gcw-end-date:visible").val();var w="\x26"+e.flex.origin+encodeURIComponent(g.val());var x=f.getUTAFeature(g,"region_id");g=f.getUTAFeature(g,"airport_code");x=x?"\x26"+e.flex.originId+x:"";g=g?"\x26"+e.flex.ftla+g:"";var y=(y=e.getFlightsAirlineOptionsUrl(a))?"\x26"+y:"";var A=(A=-1<m.indexOf("h")?e.getPartialStayUrl(a):null)?"\x26"+A:"";var B="\x26"+e.calculateAdultsForPackages(a);var k=(k=e.calculateChildrenForPackages(a))?"\x26"+k:"";e.packageContainsCar(m)&&(c=e.getDriverAgeParameter(a,"-"+b),h=e.getCarRentalParameters(a,"-"+b));a=e.getDirectFlightParameter(a,"-"+b);return l+m+p+r+t+u+q+v+c+w+x+g+y+A+B+a+k+h};e.getHotelsPackageUrl=function(a,b){var c=a.find(".gcw-flight-origin:visible");var d=a.find(".gcw-destination:visible");var g=e.flex.flexibleShoppingUrl;var q="?"+e.getHotelsPackageType(a,b);var l="\x26"+e.flex.destination+encodeURIComponent(a.find(".gcw-destination").val());
var m=f.getUTAFeature(d,"region_id");d=f.getUTAFeature(d,"airport_code");m=m?"\x26"+e.flex.destinationId+m:"";d=d?"\x26"+e.flex.ttla+d:"";var p="\x26"+e.flex.fromDate+a.find(".gcw-start-date").val();var r="\x26"+e.flex.toDate+a.find(".gcw-end-date").val();var t="",u="",v="";e.packageContainsCar(q.substr(1))&&(v=e.getCarRentalParameters(a,+b),t=e.getDriverAgeParameter(a,b));e.packageContainsFlight(q.substr(1))&&(u=e.getDirectFlightParameter(a,b));var w=c.val()?"\x26"+e.flex.origin+encodeURIComponent(c.val()):"";var x=f.getUTAFeature(c,"region_id");c=f.getUTAFeature(c,"airport_code");x=x?"\x26"+e.flex.originId+x:"";c=c?"\x26"+e.flex.ftla+c:"";var y="\x26"+e.calculateAdultsForPackages(a);var A=(A=e.calculateChildrenForPackages(a))?"\x26"+A:"";var B=e.sortByPropertyType(a);return g+q.substr(1)+l+m+d+p+r+t+w+x+c+y+A+v+B+u};e.getBundleTripType=function(a){return"tripType\x3d"+("fh-oneway"===a.find("[name\x3d'fh-subNav']:checked").data("gcw-sub-nav-option-name")?"ONE_WAY":"ROUND_TRIP")};e.getPartialStayUrl=function(a){var b=[];a.find(".gcw-partial-start-date").is(":visible")&&(b.push("isPartialStay\x3d1"),b.push("checkInDate\x3d"+a.find(".gcw-partial-start-date:visible").val()),b.push("checkOutDate\x3d"+a.find(".gcw-partial-end-date:visible").val()));return b.join("\x26")};e.getPackageType=function(a,d){var c="packageType\x3d";switch(a.find("#packages-type"+b.idSuffix).val()){case "1":c+="fhc";break;case "2":c+="fh";break;case "3":c+="hc";break;case "5":c+="fc";break;default:c+="fh"}return c};e.getFlightsPackageType=function(a){var b=a.find(".gcw-flights-add-hotel input").prop("checked");a=a.find(".gcw-flights-add-car input").prop("checked");var c="packageType\x3d";b&&a?c+="fhc":b&&!a?c+="fh":!b&&a&&(c+="fc");return c};e.getFlightsTripType=function(a){return"tripType\x3d"+("roundtrip"===a.find("[name\x3d'flight-type']:checked").data("gcw-sub-nav-option-name")?"ROUND_TRIP":"ONE_WAY")};e.getHotelsPackageType=function(a,b){var c=0<a.find("#hotel-add-flight-checkbox"+b+":checked").length,d=0<a.find("#hotel-add-car-checkbox"+b+":checked").length,e="packageType\x3d";c&&d?e+="fhc":c?e+="fh":d&&(e+="hc");return e};e.getPackagesAirlineOptionsUrl=function(a,b){var c;var d=[];if(a.find("#package-advanced-options-fields"+b).is(":visible"))return(c=a.find("#package-advanced-preferred-class"+b).val())&&d.push("cabinClass\x3d"+c),d.join("\x26")};e.getFlightsAirlineOptionsUrl=function(a){var b;var c=[];if(a.find("#flight-advanced-options-fields-hp-flight").is(":visible")){(b=a.find("#flight-advanced-preferred-airline-hp-flight").val())&&c.push("flightCarrier\x3d"+b);b=a.find("#flight-advanced-preferred-class-hp-flight").val();switch(b){case "first":b="f";break;case "business":b="b";break;case "premium":b="p";break;default:b=""}b&&c.push("cabinClass\x3d"+b);(a=a.find("#advanced-flight-nonstop-hp-flight").is(":checked"))&&c.push("isDirectFlight\x3d1");return c.join("\x26")}};e.calculateAdultsForPackages=function(a){return a.hasClass("gcw-traveler-selector")?encodeURI(e.calculateAdultsForPackagesWithTravelerSelector(a)):encodeURI(e.calculateAdultsForPackagesWithDropdowns(a))};e.calculateAdultsForPackagesWithTravelerSelector=function(a){var b=[];a=f.retrieveTravelerSelectorPassengersData(a);var c=a.rooms;b.push("numberOfRooms\x3d"+c);for(var e=0;e<c;e++){var g=e+1;b.push("adultsPerRoom["+g+"]\x3d"+a["room_"+g].adults)}return b.join("\x26")};e.calculateAdultsForPackagesWithDropdowns=function(a){var b=a.find(".gcw-rooms-container .room-data:visible"),c=[];0<b.length?(c.push("numberOfRooms\x3d"+b.length),b.each(function(a,b){c.push("adultsPerRoom["+(a+1)+"]\x3d"+$(b).find(".num-adults").val())})):(c.push("numberOfRooms\x3d1"),c.push("adultsPerRoom[1]\x3d"+a.find(".num-adults").val()));return c.join("\x26")};e.calculateChildrenForPackages=function(a){return a.hasClass("gcw-traveler-selector")?encodeURI(e.calculateChildrenForPackagesWithTravelerSelector(a)):encodeURI(e.calculateChildrenForPackagesWithDropdowns(a))};e.calculateChildrenForPackagesWithTravelerSelector=function(a){a=f.retrieveTravelerSelectorPassengersData(a);for(var b=[],c=[],e=[],g=a.rooms,q=0;q<g;q++){var l=q+1,m=a["room_"+l].children;b.push("childrenPerRoom["+l+"]\x3d"+m);for(var p=0;p<m;p++){var r=p,t=r+1;r=a["room_"+l].$childrenFields.eq(r).find("select");r=parseInt(r.val(),10)||0;c.push("childAges["+l+"]["+t+"]\x3d"+r)}}e=e.concat(b,c);return b.length&&c.length?(e.push("infantsInSeats\x3d"+("N"===a.infantInLap?"1":"0")),e.join("\x26")):""};e.calculateChildrenForPackagesWithDropdowns=function(a){var b=[],c=[],e=[],f=a.find(".gcw-rooms-container .room-data:visible");0<f.length?f.each(function(a,d){b.push("childrenPerRoom["+(a+1)+"]\x3d"+$(d).find(".num-children").val());(0!==$(d).find(".gcw-child-field select:visible").length?$(d).find(".gcw-child-field select:visible"):$(d).find(".gcw-flights-child-field select:visible")).each(function(b,d){var e=$(d).val()?$(d).val():"0";c.push("childAges["+(a+1)+"]["+(b+1)+"]\x3d"+e)})}):(b.push("childrenPerRoom[1]\x3d"+a.find(".num-children").val()),a.find(".gcw-child-field select:visible").each(function(a,b){var d=$(b).val()?$(b).val():"0";c.push("childAges[1]["+(a+1)+"]\x3d"+d)}));e=e.concat(b,c);return b.length&&c.length?(a=a.find(".gcw-young-child:checked"),a=0<a.length&&"seat"===a.val().toLowerCase()?"1":"0",e.push("infantsInSeats\x3d"+a),e.join("\x26")):""};e.sortByPropertyType=function(a){a=a.find("input[name\x3dsort]:checked");if(1!==a.length)return"";a=a.val();return"\x26sortOrder\x3d"+("hotel"===a?37:"vacationRental"===a?34:0)};return e});define("GcwRailsProcessingFunctions",["classCheck","GcwUtilsProcessingFunctions"],function(g,f){function e(a){g(this,e);b=this;b.$form=a.form;b.idSuffix=a.getKeyParameter()}var b;e.prototype.dispatch=function(){var a=b.$form.find(".num-adults:visible").val();a=b.buildValues(a,"adults");var d=b.buildAges(".children-data select:visible"),c=b.buildAges(".youth-data select:visible"),e=b.buildAges(".seniors-data select:visible");a=b.buildRailsPassengers(a,d,c,e);d=b.buildRailcard();f.setInput(b.$form,"age_pax",a);f.setInput(b.$form,"rail_card",d);return f.returnValue(!1)};e.prototype.buildAges=function(a){a=b.$form.find(a);var d=[];a&&0<a.length&&a.each(function(a,b){d.push($(b).val().toString())});return d};e.prototype.buildValues=function(a,b){var c=0,d=[];switch(b){case "adults":for(c;c<a;c++)d.push("40");break;case "seniors":for(c;c<a;c++)d.push("60")}return d};e.prototype.buildRailsPassengers=function(a,b,c,e){a=a.concat(b).concat(c).concat(e);return a=a.toString()};e.prototype.buildRailcard=function(){var a=b.$form.find(".railcards-list-fieldset:visible"),d,c,e=[];a&&0<a.length&&a.each(function(a,b){var h=0;d=$(b).find(".gcw-railcard-select").val();c=$(b).find(".gcw-railcard-count-select").val();if(""!==d)for(c=parseInt(c),h;h<c;h++)e.push(d)});return e.toString()};return e});
define("GcwThreeppProcessingFunctions",["classCheck","GcwUtilsProcessingFunctions"],function(g,f){function e(a){g(this,e);b=this;b.$form=a.form;b.idSuffix=a.getKeyParameter();b.gcwFormInstance=a}var b;e.prototype.dispatch=function(){var a=b.$form.find("[name\x3dorigin]"),d=b.$form.find("[name\x3doriginCityName]"),c=b.$form.find("[name\x3ddestination]"),e=b.$form.find("[name\x3ddestinationCityName]"),g=b.$form.find("[name\x3dcountry]"),q=b.$form.find("[name\x3dcountryCode]"),l=b.$form.find("[name\x3dexpGroupCode]"),m=b.$form.find(".gcw-hidden-input-children-age"),p=b.$form.find(".gcw-threepp-hotels-select"),r=b.getThreeppOriginValues(),t=b.getThreeppDestinationValues(),u=b.calculateChildOccupancyString(),v=[],w=[];a&&a.length&&d&&d.length&&(f.setInput(b.$form,"origin",r.origin),f.setInput(b.$form,"originCityName",r.originCityName));c&&c.length&&e&&e.length&&g&&g.length&&q&&q.length&&(f.setInput(b.$form,"destination",t.destination),f.setInput(b.$form,"destinationCityName",t.destinationCityName),f.setInput(b.$form,"country",t.country),f.setInput(b.$form,"countryCode",t.countryCode));l&&l.length&&f.setInput(b.$form,"expGroupCode",t.expGroupCode);u&&(v=u.split(","),$.each(v,function(a,c){""!==c.split("_")[1]?w.push(c.split("_")[1]):w.push("-1")}));m&&m.length&&m.each(function(a,c){a<w.length?$(c).val(w[a]):$(c).val("-1")});p&&p.length&&f.setInput(b.$form,"hotelSelected",p.val());return f.returnValue(!1)};e.prototype.dispatch_cloud=function(){var a=b.$form.find("[name\x3dorigin]"),d=b.$form.find("[name\x3ddestination]"),c=b.$form.find(".gcw-hidden-input-children-age"),e=b.$form.find(".gcw-threepp-hotels-select"),g=b.getThreeppOriginValues(),q=b.getThreeppDestinationValues(),l=b.calculateChildOccupancyString(),m=[],p=[];a&&a.length&&f.setInput(b.$form,"origin",g.origin);d&&d.length&&f.setInput(b.$form,"destination",q.destination);l&&(m=l.split(","),$.each(m,function(a,c){""!==c.split("_")[1]?p.push(c.split("_")[1]):p.push("-1")}));c&&c.length&&c.each(function(a,c){a<p.length&&$(c).val(p[a])});e&&e.length&&f.setInput(b.$form,"supplierHotelId",e.val());return f.returnValue(!1)};e.prototype.calculateChildOccupancyString=function(){return b.gcwFormInstance.travelerSelectorEnabled?f.calculateChildOccupancyStringWithTravelerSelector(b.gcwFormInstance):f.calculateChildOccupancyStringWithDropdowns(b.gcwFormInstance)};e.prototype.dispatch_ach=function(){var a=b.$form.find("[name\x3dcurrency]"),d=b.$form.find(".gcw-start-date"),c=b.$form.find(".gcw-end-date"),e=b.$form.find(".gcw-threepp-duration-select"),g=b.$form.find(".gcw-lc-filter input"),q=b.$form.find(".gcw-traveler-selector-num-adults"),l=b.getThreeppOriginValues(),m=b.getThreeppDestinationValues(),p=b.calculateChildOccupancyString(),r=[],t=[],u=b.$form.attr("action"),v=b.$form.data("locale");v=b.$form.data("locale-to-redirect")||v;var w=function(a){return 0<a},x=function(a){a=-1!==a.indexOf("/")?a.split("/"):a.split(".");return a[2]+"-"+a[1]+"-"+a[0]};f.setInput(b.$form,"rgid",m.destination);f.setInput(b.$form,"rid",m.destinationCityName);"string"===typeof l.origin&&0<l.origin.length&&f.setInput(b.$form,"depap",l.origin);p&&(r=p.split(","),$.each(r,function(a,c){""!==c.split("_")[1]?t.push(c.split("_")[1]):t.push("-1")}));l=b.$form.find("[name\x3drid]").val();u=void 0!==l&&0<l.length?u+("hotel?rid\x3d"+l):u+"region?";l=b.$form.find("[name\x3drgid]").val();void 0!==l&&0<l.length&&"any"!==l&&(u+="\x26rgid\x3d"+l);l=b.$form.find("[name\x3ddepap]").val();u+="\x26currency\x3d"+a.val();u+="\x26ddate\x3d"+x(d.val());u+="\x26rdate\x3d"+x(c.val());u+="\x26adult\x3d"+q.val();void 0!==l&&0<l.length&&"any"!==l&&(u+="\x26depap\x3d"+l);void 0!==t&&0<t.length&&(t=t.filter(w),u+="\x26child\x3d"+t.join());void 0!==e.val()&&"any"!==e.val()&&(u+="\x26dur\x3d"+e.val());"10122006"!==b.$form.attr("data-siteid")&&(g.prop("checked")&&(u+="\x26trans\x3d1"),u+="\x26lang\x3d"+v.replace("_","-"));return f.returnValue(!0,u)};e.prototype.dispatch_ai=function(){var a=b.$form.find("[name\x3dorigin]"),d=b.$form.find("[name\x3doriginCityName]"),c=b.$form.find("[name\x3ddestination]"),e=b.$form.find("[name\x3ddestinationCityName]"),g=b.$form.find("[name\x3dcountry]"),q=b.$form.find("[name\x3dcountryCode]"),l=b.$form.find("[name\x3dexpGroupCode]"),m=b.$form.find(".gcw-hidden-input-children-age"),p=b.$form.find('input[name\x3d"package-type"]:checked'),r=b.getThreeppOriginValues(),t=b.getThreeppDestinationValues(),u=b.calculateChildOccupancyString(),v=[],w=[];p&&p.prop("checked")&&p.prop("checked",!1);a&&a.length&&d&&d.length&&(f.setInput(b.$form,"origin",r.origin),f.setInput(b.$form,"originCityName",r.originCityName));c&&c.length&&e&&e.length&&g&&g.length&&q&&q.length&&(f.setInput($(".threepp-view-section"),"destination",t.destination),f.setInput(b.$form,"destinationCityName",t.destinationCityName),f.setInput(b.$form,"country",t.country),f.setInput(b.$form,"countryCode",t.countryCode));l&&l.length&&f.setInput(b.$form,"expGroupCode",t.expGroupCode);u&&(v=u.split(","),$.each(v,function(a,c){""!==c.split("_")[1]?w.push(c.split("_")[1]):w.push("-1")}));m&&m.length&&m.each(function(a,c){a<w.length?$(c).val(w[a]):$(c).val("-1")});f.setInput(b.$form,"GOTO","");b.$form.attr("action","all-inclusive-region-list");return f.returnValue(!1)};e.prototype.dispatch_ai_cloud=function(){var a=b.$form.find("[name\x3dorigin]"),d=b.$form.find("[name\x3ddestination]"),c=b.$form.find(".gcw-hidden-input-children-age"),e=b.$form.find('input[name\x3d"package-type"]:checked'),g=b.getThreeppOriginValues(),q=b.getThreeppDestinationValues(),l=b.calculateChildOccupancyString(),m=[],p=[];e&&e.prop("checked")&&e.prop("checked",!1);a&&a.length&&f.setInput(b.$form,"origin",g.origin);d&&d.length&&f.setInput($(".threepp-view-section"),"destination",q.destination);l&&(m=l.split(","),$.each(m,function(a,c){""!==c.split("_")[1]?p.push(c.split("_")[1]):p.push("-1")}));c&&c.length&&c.each(function(a,c){a<p.length&&$(c).val(p[a])});f.setInput(b.$form,"GOTO","");b.$form.attr("action","all-inclusive-vacation/search");return f.returnValue(!1)};e.prototype.getThreeppOriginValues=function(){var a=b.$form.find(".gcw-threepp-origin-input"),d="",c="";if(a&&a.length){var e=a.val();var f=e.split(":");e&&(d=f[0],c=f[1]||a.find("option:selected").data("sort"))}return{origin:d,originCityName:c}};e.prototype.getThreeppDestinationValues=function(){var a=b.$form.find(".gcw-threepp-destination-input"),d="",c="",e="",f="",g="";if(a&&a.length){var l=a.val();var m=l.split(":");l&&(d=m[0],l=d.split("|"),1<l.length&&(d=l[0]),c=m[1]||a.find("option:selected").data("label"),e=m[2]||a.find("option:selected").attr("country"),void 0!==m[3]&&(f=m[3]),void 0!==m[4]&&(d=m[4],g=m[4]))}return{destination:d,destinationCityName:c,country:e,countryCode:f,expGroupCode:g}};e.prototype.dispatch_eb_de=function(){var a=b.$form.find(".gcw-threepp-origin-input"),d=b.$form.find(".gcw-threepp-destination-input"),c=b.$form.find(".gcw-start-date"),e=b.$form.find(".gcw-end-date"),g=b.$form.find(".gcw-threepp-duration-select"),q=b.$form.find(".gcw-lc-filter input"),l=b.$form.find(".num-adults"),m=b.$form.find(".room-data:visible").find(".gcw-child-field select:visible");a=a.val()||"";d=d.val()||"";c=c.val()||"";e=e.val()||"";g=g.val()||"";var p="";switch(l.val()||""){case "1":p="25";break;case "2":p="25;25";break;case "3":p="25;25;25";break;case "4":p="25;25;25;25"}l=0<m.length?$(m[0]).val():"";var r=1<m.length?$(m[1]).val():"";m=2<m.length?$(m[2]).val():"";m=b.$form.attr("action")+"?rgid\x3d"+d+"\x26rid\x3d\x26GOTO\x3dTTPauschalreisen\x26ibe\x3dpackage\x26lnkloc\x3dlmn_1\x26lnkcid\x3d100\x26tab\x3dlmn\x26showresult\x3d1\x26StrWizTag\x3dTT_HolidayHome\x26KID\x3d840000\x26frbuch\x3d\x26agent\x3d\x26org_tla\x3d\x26formular\x3d2\x26sortierung\x3d\x26detail\x3dzielgebiet\x26rliste\x3d2\x26zfilter\x3d\x26backon\x3d1\x26hostexp\x3d\x26wzdf\x3d\x26wzid\x3d\x26termin\x3d"+c+"\x26ruecktermin\x3d"+e+"\x26abflughafen\x3d"+a+"\x26dauer\x3d"+g+"\x26topRegionenCache\x3d"+d+"\x26topRegionen\x3d\x26zimmer\x3d-1\x26erwachsene\x3d"+p+"\x26alter1\x3d"+
l+"\x26alter2\x3d"+r+"\x26alter3\x3d"+m+"\x26alter4\x3d-1\x26alter5\x3d-1\x26alter6\x3d-1\x26alter7\x3d-1\x26alter8\x3d-1\x26hbfges\x3d0\x26hbfanz\x3d0\x26hbfempf\x3d0\x26kategorie\x3d-1\x26shotel\x3d\x26typ\x3d-1\x26preis\x3d-1\x26verpflegung\x3d-1\x26sportangebot\x3d-1\x26marke\x3d-1\x26wizardSubmit.x\x3d23\x26wizardSubmit.y\x3d4\x26wizardSubmit\x3dFinden";q.prop("checked")&&(m+="\x26lcfilter\x3d513;0");return f.returnValue(!0,m+"\x26rfrr\x3d-58089")};e.prototype.dispatch_uk=function(){var a=b.$form.find(".gcw-origin:visible"),d=b.$form.find(".gcw-destination:visible"),c=f.getUTAFeature(a,"airport_code");a=a.val();var e=f.getUTAFeature(d,"airport_code"),g=f.getUTAFeature(d,"region_id");d=d.val();var q=b.$form.find(".gcw-hidden-input-children-age"),l=b.calculateChildOccupancyString(),m=[],p=[];c&&c.length&&a&&a.length&&(f.setInput(b.$form,"origin",c),f.setInput(b.$form,"originCityName",a));e&&e.length&&d&&d.length&&(f.setInput(b.$form,"destination",e),f.setInput(b.$form,"destinationCityName",d),f.setInput(b.$form,"regionId",g));f.setInput(b.$form,"roomCount",1);l&&(m=l.split(","),$.each(m,function(a,c){""!==c.split("_")[1]?p.push(c.split("_")[1]):p.push("-1")}));q&&q.length&&q.each(function(a,c){a<p.length?$(c).val(p[a]):$(c).val("-1")});return f.returnValue(!1)};return e});define("GcwUtilsProcessingFunctions",["classCheck","uitk"],function(g,f){function e(){g(this,e)}e.returnValue=function(b,a){return{redirect:b,url:a||""}};e.calculateChildOccupancyStringWithDropdowns=function(b){var a=[];b.form.find(".room-data:visible").each(function(b){$(this).find(".gcw-child-field select:visible").each(function(c){a.push(b+1+"_"+$(this).val())})});return a.toString()};e.calculateChildOccupancyStringWithTravelerSelector=function(b){b=e.retrieveTravelerSelectorPassengersData(b.form);for(var a=b.rooms,d=[],c=0;c<a;c++){var h=c+1;b["room_"+h].$childrenFields.each(function(a,c){var b=$(c).find("select");d.push(h+"_"+b.val())})}return d.toString()};e.getGroundTransfersSearchURL=function(b,a,d){var c,e,f,g;var l=g=f=0;var m="/ground-transfers/search?";d||(m+="direction\x3dH2A");if(d){var p=b.find("[name\x3dgtOriginAirport]").val();window.lx&&window.lx.cache&&window.lx.cache.airportSuggestionsMap&&$.each(window.lx.cache.airportSuggestionsMap,function(a){this.airportFullName===p&&(c=a)});f=b.find("[name\x3dgtDestinationHotel]");d=f.val();window.lx&&window.lx.cache&&window.lx.cache.hotelSuggestionsMap&&(e=window.lx.cache.hotelSuggestionsMap[d]&&window.lx.cache.hotelSuggestionsMap[d].hotelId);var r=f.data("rid");var t=b.find("[name\x3dgtOriginFlightArrivalDate]").val();var u=b.find("[name\x3dgtOriginFlightPickUpTime]  option:selected").val();f=b.find("[name\x3dgtOriginFlightAdultsCount]").val();g=b.find("[name\x3dgtOriginFlightChildrenCount]").val();l=b.find("[name\x3dgtOriginFlightInfantsCount]").val();$("#gt-roundtrip-flight-departure-module"+a).hasClass("gcw-disabled")||(a=b.find("[id\x3dgt-hotel-departure-date"+a+"]").val(),b=b.find("[name\x3dgtAirportDropOffTime]  option:selected").val(),m+="\x26roundTrip\x3dtrue",a&&(m+="\x26dropOffDate\x3d"+a),b&&(m+="\x26dropOffTime\x3d"+b))}else f=b.find("[name\x3dgtOriginHotel]"),d=f.val(),window.lx&&window.lx.cache&&window.lx.cache.hotelSuggestionsMap&&(e=window.lx.cache.hotelSuggestionsMap[d]&&window.lx.cache.hotelSuggestionsMap[d].hotelId),r=f.data("rid"),p=b.find("[name\x3dgtDestinationAirport]").val(),window.lx&&window.lx.cache&&window.lx.cache.airportSuggestionsMap&&$.each(window.lx.cache.airportSuggestionsMap,function(a){this.airportFullName===p&&(c=a)}),t=b.find("[name\x3dgtOriginHotelPickUpDate]").val(),u=b.find("[name\x3dgtOriginHotelPickUpTime]  option:selected").val(),f=b.find("[name\x3dgtOriginHotelAdultsCount]").val(),g=b.find("[name\x3dgtOriginHotelChildrenCount]").val(),l=b.find("[name\x3dgtOriginHotelInfantsCount]").val();c&&(m+="\x26airportCode\x3d"+c);m=m+("\x26location\x3d"+p)+("\x26hotelName\x3d"+d);e&&(m+="\x26hotelId\x3d"+e);t&&(m+="\x26pickUpDate\x3d"+t);u&&(m+="\x26pickUpTime\x3d"+u);f&&(m+="\x26adults\x3d"+f);g&&(m+="\x26children\x3d"+g);l&&(m+="\x26infants\x3d"+l);r&&(m+="\x26regionId\x3d"+r);return m};e.setInput=function(b,a,d){b.find("[name\x3d'"+a+"']").val(d)};e.replaceFormAction=function(b,a,d){var c=b.attr("action"),e=b.data("gcw-original-action"),f=b.data("gcw-new-action");a&&a!==d?f&&f!==c&&b.attr("action",f):e&&e!==c&&b.attr("action",e)};e.setUSDateInHiddenInput=function(b,a,d){a=b.find("."+a);var c=b.find("[name\x3d"+d+"]");a&&c&&a.length&&c.length&&""!==a.val()&&(a=e.convertDateToUSFormat(a.val()),e.setInput(b,d,a))};e.convertDateToUSFormat=function(b){return b.match(/^(\d{2})\/(\d{2})\/(\d{4})$/)?(b=b.split("/"),b[1]+"/"+b[0]+"/"+b[2]):b};e.getUTAFeature=function(b,a){var d=b.closest("div").parent().find("input[type\x3dhidden]");return 0<d.length?d.filter('input[id*\x3d"'+a+'"]').val():void 0};e.getUTAFeatures=function(b){var a={};b.closest("div").parent().find("input[type\x3dhidden]").each(function(){""!==$(this).val()&&(a[$(this).data("gcw-storeable-name").slice(4)]=$(this).val())});return 0<Object.keys(a).length?a:void 0};e.getWindowLocation=function(){return window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")};e.getLocationField=function(b,a){return b.find("."+{origin:"gcw-origin",destination:"gcw-destination"}[a]+":visible")};e.retrieveTravelerSelectorPassengersData=function(b){var a={},d=b.find(".travel-selector-wrapper:visible"),c=d.find(".gcw-traveler-amount-select"),e=b.find('input[name\x3d"lap-or-seat"]:checked'),f=[];e.length||(e=d.find(".gcw-young-child:checked"));b=d.find(".traveler-selector-room-data");var g=c.data("total-rooms")||1;b.each(function(c,b){var d=c+1,e=$(b).find(".gcw-traveler-selector-num-adults"),h=$(b).find(".gcw-traveler-selector-num-children"),g=$(b).find(".gcw-child-field").not(".gcw-disabled");e=parseInt(e.val());var n=0;h.each(function(a,c){n+=parseInt($(c).val(),10)||0});g.each(function(a,c){f.push($(c))});a["room_"+d]={adults:e,children:n,$childrenFields:g}});a.$activeTravelerSelector=d;a.totalTravelers=c.data("total-travelers");a.totalAdults=c.data("adults");a.totalchildren=c.data("children");a.totalChildrenFields=f;a.rooms=g;a.infantInLap=0<e.length&&"seat"===e.val().toLowerCase()?"N":"Y";return a};e.calculateEndDateValue=function(b){var a=b.find("#package-departing-wrapper"),d=b.find(".gcw-start-date").val();d=f.datePickerCalendarObj.getDateFromString(d);var c;d&&(c=new XDate(d));d=b.find("#packageReturning");b=b.find("#package-departing").data("gcw-date-format").toLowerCase().replace(/m/g,"M");var e=0;void 0!==a.data("default-range-length")&&(e=a.data("default-range-length"));c&&b&&(c.addDays(e),d.val(c.toString(b)));return d.val()};e.calculatePackageTypeForHIS=function(b){var a="/";switch(b.find(".sub-nav-select").find('input[type\x3d"radio"]:checked').data("gcw-sub-nav-option-name")){case "flight-hotel":a+="FlightHotel";break;case "flight-hotel-car":a+="FlightHotelCar";break;case "hotel-car":a+="HotelCar";break;default:a+="FlightHotel"}return a};e.calculateAdultsForPackagesWithDropdownsForHIS=function(b){var a=[];b=e.retrieveTravelerSelectorPassengersData(b);var d=b.rooms;a.push("NumRoom\x3d"+d);for(var c=0;c<d;c++){var h=c+1;a.push("NumAdult-Room"+h+"\x3d"+b["room_"+h].adults)}return a.join("\x26")};e.calculateChildrenForPackagesWithDropdownsForHIS=function(b){b=e.retrieveTravelerSelectorPassengersData(b);for(var a=[],d=[],c=[],h=b.rooms,f=0;f<h;f++){var g=f+1,l=b["room_"+g].children;a.push("NumChild-Room"+g+"\x3d"+l);for(var m=0;m<l;m++){var p=m,r=p+1;p=b["room_"+g].$childrenFields.eq(p).find("select");p=parseInt(p.val(),10)||0;d.push("Room"+g+"-Child"+r+"Age\x3d"+p)}}c=c.concat(a,d);a.length&&d.length&&c.push("infantsInSeats\x3d"+("N"===b.infantInLap?"1":"0"));return c.join("\x26")};return e});
define("GcwPackagesEssPassthroughProcessingFunctions",["classCheck","GcwUtilsProcessingFunctions"],function(g,f){function e(a){g(this,e);b=this;b.$form=a.form;b.idSuffix=a.getKeyParameter()}var b;e.prototype.dispatch=function(){var a=b.$form.find("#packages-type"+b.idSuffix),d=b.$form.find("#packages-fr-airport"+b.idSuffix),c=b.$form.find("#packages-dest-name"+b.idSuffix),h=b.$form.find("#packages-from-date"+b.idSuffix),g=b.$form.find("#packages-to-date"+b.idSuffix),q="\x26"+e.calculateAdultsForPackages(b.$form),l="\x26"+e.calculateChildrenForPackages(b.$form);q+=l;var m=b.$form.find("#packages-flex-from"+b.idSuffix),p=b.$form.find("#packages-flex-to"+b.idSuffix),r=b.$form.find("#package-checkin"+b.idSuffix+":visible"),t=b.$form.find("#package-checkout"+b.idSuffix+":visible"),u=b.$form.find("#packages-cabin-class"+b.idSuffix),v=b.$form.find("#package-advanced-preferred-class"+b.idSuffix);l=0;q=q.split("\x26");var w=""===a.val()?b.packageSelectedForUrl():a.val();""!==w&&a.val(w);d.val(b.$form.find(".gcw-origin:visible").val());c.val(b.$form.find(".gcw-destination:visible").val());h.val(b.$form.find(".gcw-start-date:visible").val());g.val(b.$form.find(".gcw-end-date:visible").val());0<r.length&&m.val(r.val());0<t.length&&p.val(t.val());""!==v.val()&&v.is(":visible")?u.val(v.val()):u.val("");for(l;l<q.length;l++)a=q[l].split("\x3d")[0],d=q[l].split("\x3d")[1],1<q[l].length&&f.setInput(b.$form,a,d);return f.returnValue(!0,this.getPackageUrl(b.$form,b.idSuffix))};e.prototype.packageSelectedForUrl=function(){var a="";switch(b.$form.find(".sub-nav-select").find('input[type\x3d"radio"]:checked').data("gcw-sub-nav-option-name")){case "flight-hotel":a="2";break;case "flight-hotel-car":a="1";break;case "flight-car":a="5";break;case "hotel-car":a="3"}return a};e.prototype.getPackageUrl=function(a,b){var c=a.find(".gcw-origin:visible");var d=a.find(".gcw-destination:visible");var g=e.getPackageType(a);var q=c.val()?"\x26origin\x3d"+c.val():"";var l=(l=e.getPackagesAirlineOptionsUrl(a,b))?"\x26"+l:"";var m="\x26destination\x3d"+d.val();var p="\x26fromDate\x3d"+a.find(".gcw-start-date:visible").val();var r="\x26toDate\x3d"+a.find(".gcw-end-date:visible").val();var t=(t=-1<g.indexOf("h")?e.getPartialStayUrl(a):null)?"\x26"+t:"";var u="\x26"+e.calculateAdultsForPackages(a);var v=(v=e.calculateChildrenForPackages(a))?"\x26"+v:"";c=f.getUTAFeature(c,"-ta");d=f.getUTAFeature(d,"-ta");c=e.getEssJson(c,d);return"/flexibleshopping?"+g+q+l+m+p+r+t+u+v+c};e.getFlightsPackageUrl=function(a){var b=a.data("gcw-key");var c=a.find(".gcw-origin:visible");var h=a.find(".gcw-destination:visible");var g=e.getFlightsPackageType(a);var q="";if("packageType\x3dfc"===g||"packageType\x3dfhc"===g){var l=a.find("#driver-age-checkbox-"+b).is(":checked");l||void 0===l||(l=a.find("#car-driver-age-"+b),void 0!==l&&l.val()&&(q="\x26driverAge\x3d"+l.val()))}var m="\x26destination\x3d"+a.find(".gcw-destination:visible").val();l="\x26fromDate\x3d"+a.find(".gcw-start-date:visible").val();var p="\x26toDate\x3d"+a.find(".gcw-end-date:visible").val();var r="\x26origin\x3d"+a.find(".gcw-origin:visible").val();b=(b=e.getFlightsAirlineOptionsUrl(a,b))?"\x26"+b:"";var t=(t=-1<g.indexOf("h")?e.getPartialStayUrl(a):null)?"\x26"+t:"";var u="\x26"+e.calculateAdultsForPackages(a);a=(a=e.calculateChildrenForPackages(a))?"\x26"+a:"";c=f.getUTAFeature(c,"-ta");h=f.getUTAFeature(h,"-ta");h=e.getEssJson(c,h);return"/flexibleshopping?"+g+m+l+p+q+r+b+t+u+a+h};e.getHotelsPackageUrl=function(a,b){var c=a.find(".gcw-flight-origin:visible");var d=a.find(".gcw-destination:visible");var g="?"+e.getHotelsPackageType(a,b);var q="";if("?packageType\x3dhc"===g||"?packageType\x3dfhc"===g){var l=a.find("#driver-age-checkbox"+b).is(":checked");l||void 0===l||(l=a.find("#car-driver-age"+b),void 0!==l&&l.val()&&(q="\x26driverAge\x3d"+l.val()))}var m=a.find("#packageDirectFlight"+b).is(":checked")?"\x26isDirectFlight\x3d1":"";l="\x26destination\x3d"+a.find(".gcw-destination").val();var p="\x26fromDate\x3d"+a.find(".gcw-start-date").val();var r="\x26toDate\x3d"+a.find(".gcw-end-date").val();var t=c.val()?"\x26origin\x3d"+c.val():"";var u="\x26"+e.calculateAdultsForPackages(a);var v=(v=e.calculateChildrenForPackages(a))?"\x26"+v:"";var w=e.sortByPropertyType(a);c=f.getUTAFeature(c,"-ta");d=f.getUTAFeature(d,"-ta");d=e.getEssJson(c,d);return"/flexibleshopping"+g+l+p+r+q+t+u+v+w+m+d};e.getPartialStayUrl=function(a){var b=[];a.find(".gcw-partial-start-date").is(":visible")&&(b.push("isPartialStay\x3d1"),b.push("checkInDate\x3d"+a.find(".gcw-partial-start-date:visible").val()),b.push("checkOutDate\x3d"+a.find(".gcw-partial-end-date:visible").val()));return b.join("\x26")};e.getPackageType=function(a,d){var c="packageType\x3d";switch(a.find("#packages-type"+b.idSuffix).val()){case "1":c+="fhc";break;case "2":c+="fh";break;case "3":c+="hc";break;case "5":c+="fc";break;default:c+=""}return c};e.getFlightsPackageType=function(a){var b=a.find(".gcw-flights-add-hotel input").prop("checked");a=a.find(".gcw-flights-add-car input").prop("checked");var c="packageType\x3d";b&&a?c+="fhc":b&&!a?c+="fh":!b&&a&&(c+="fc");return c};e.getHotelsPackageType=function(a,b){var c=0<a.find("#hotel-add-flight-checkbox"+b+":checked").length,d=0<a.find("#hotel-add-car-checkbox"+b+":checked").length,e="packageType\x3d";c&&d?e+="fhc":c?e+="fh":d&&(e+="hc");return e};e.getPackagesAirlineOptionsUrl=function(a,b){var c;var d=[];if(a.find("#package-advanced-options-fields"+b).is(":visible"))return(c=a.find("#package-advanced-preferred-class"+b).val())&&d.push("cabinClass\x3d"+c),d.join("\x26")};e.getFlightsAirlineOptionsUrl=function(a,b){var c;var d=[];if(a.find("#flight-advanced-options-fields-"+b).is(":visible")){(c=a.find("#flight-advanced-preferred-airline-"+b).val())&&d.push("flightCarrier\x3d"+c);c=a.find("#flight-advanced-preferred-class-"+b).val();switch(c){case "first":c="f";break;case "business":c="b";break;case "premium":c="p";break;default:c=""}c&&d.push("cabinClass\x3d"+c);c=a.find("#advanced-flight-nonstop-"+b).is(":checked")}else c=a.find("#packageDirectFlight-"+b).is(":checked");c&&d.push("isDirectFlight\x3d1");return d.join("\x26")};e.calculateAdultsForPackages=function(a){return a.hasClass("gcw-traveler-selector")?encodeURI(e.calculateAdultsForPackagesWithTravelerSelector(a)):encodeURI(e.calculateAdultsForPackagesWithDropdowns(a))};e.calculateAdultsForPackagesWithDropdowns=function(a){var b=a.find(".gcw-rooms-container .room-data:visible"),c=[];0<b.length?(c.push("numberOfRooms\x3d"+b.length),b.each(function(a,b){c.push("adultsPerRoom["+(a+1)+"]\x3d"+$(b).find(".num-adults").val())})):(c.push("numberOfRooms\x3d1"),c.push("adultsPerRoom[1]\x3d"+a.find(".num-adults").val()));return c.join("\x26")};e.calculateAdultsForPackagesWithTravelerSelector=function(a){var b=[];a=f.retrieveTravelerSelectorPassengersData(a);var c=a.rooms;b.push("numberOfRooms\x3d"+c);for(var e=0;e<c;e++){var g=e+1;b.push("adultsPerRoom["+g+"]\x3d"+a["room_"+g].adults)}return b.join("\x26")};e.calculateChildrenForPackages=function(a){return a.hasClass("gcw-traveler-selector")?encodeURI(e.calculateChildrenForPackagesWithTravelerSelector(a)):encodeURI(e.calculateChildrenForPackagesWithDropdowns(a))};e.calculateChildrenForPackagesWithDropdowns=function(a){var b=[],c=[],e=[],f=a.find(".gcw-rooms-container .room-data:visible");0<f.length?f.each(function(a,d){b.push("childrenPerRoom["+(a+1)+"]\x3d"+$(d).find(".num-children").val());(0!==$(d).find(".gcw-child-field select:visible").length?$(d).find(".gcw-child-field select:visible"):$(d).find(".gcw-flights-child-field select:visible")).each(function(b,d){var e=$(d).val()?$(d).val():"0";c.push("childAges["+(a+1)+"]["+(b+1)+"]\x3d"+e)})}):(b.push("childrenPerRoom[1]\x3d"+a.find(".num-children").val()),a.find(".gcw-child-field select:visible").each(function(a,b){var d=$(b).val()?$(b).val():"0";c.push("childAges[1]["+(a+1)+"]\x3d"+d)}));e=e.concat(b,c);return b.length&&c.length?(a=a.find(".gcw-young-child:checked"),a=0<a.length&&"seat"===a.val().toLowerCase()?
"1":"0",e.push("infantsInSeats\x3d"+a),e.join("\x26")):""};e.calculateChildrenForPackagesWithTravelerSelector=function(a){a=f.retrieveTravelerSelectorPassengersData(a);for(var b=[],c=[],e=[],g=a.rooms,q=0;q<g;q++){var l=q+1,m=a["room_"+l].children;b.push("childrenPerRoom["+l+"]\x3d"+m);for(var p=0;p<m;p++){var r=p,t=r+1;r=a["room_"+l].$childrenFields.eq(r).find("select");r=parseInt(r.val(),10)||0;c.push("childAges["+l+"]["+t+"]\x3d"+r)}}e=e.concat(b,c);return b.length&&c.length?(e.push("infantsInSeats\x3d"+("N"===a.infantInLap?"1":"0")),e.join("\x26")):""};e.sortByPropertyType=function(a){a=a.find("input[name\x3dsort]:checked");if(1!==a.length)return"";a=a.val();return"\x26sortOrder\x3d"+("hotel"===a?37:"vacationRental"===a?34:0)};e.getEssJson=function(a,b){var c="\x26essJson\x3d",d={orig:"",dest:""};a&&b?(d.orig=JSON.parse(a),d.dest=JSON.parse(b),c+=JSON.stringify(d)):a?(d={orig:""},d.orig=JSON.parse(a),c+=JSON.stringify(d)):b?(d={dest:""},d.dest=JSON.parse(b),c+=JSON.stringify(d)):c="";return c};return e});define("gcwStorableLegacyKeys",[],function(){return{legacyCurrentKeysMap:{"gcw-rails-typeahead-orig":"gcw-rails-origin-station_code","gcw-rails-typeahead-dest":"gcw-rails-destination-station_code"},getLegacyCurrentKeysMap:function(){return this.legacyCurrentKeysMap},replace:function(g){var f=!1;if(null!==g&&"object"===typeof g){var e=this.getLegacyCurrentKeysMap(),b;for(b in e)g.hasOwnProperty(b)&&(f=!0,g[e[b]]=g[b],delete g[b])}return f?g:!1}}});define("gcw-store-form-data-controller",["oip","jquery"],function(g,f){function e(){b=!(0<f("meta[name\x3dignoreSavedFormData][value\x3dtrue]").length);a="ignoreSavedFormData";g.canTrack||(b=g.canTrack,a="oip.canTrack");return{canTrack:b,src:a,init:e}}var b=!1,a;return e()});define("gcwTabsLogic",["jquery","uitk","uitk_tabs"],function(g,f){function e(b){b=(b||window.location.search).replace(/^\?/,"").split("\x26");var a;for(a=0;a<b.length;a++){var d=b[a].split("\x3d");if("lob"===d[0])return!0}return!1}return{selectLastSearchLobTab:function(b,a,d,c){if(!e(c)&&!b&&Modernizr.localstorage&&(b=window.localStorage.getItem("gcw_lob_tab"))){b=JSON.parse(b);a&&b[d]&&(b=b[d]);var h;a=g('li.tab button[data-lob\x3d"'+b+'"]');0===a.length&&(d={"flight-hotel":"flightHotel","flight-hotel-car":"flightHotelCar","flight-car":"flightCar","hotel-car":"hotelCar"},d[b]&&(a=g('li.tab button[data-lob\x3d"'+d[b]+'"]')),0===a.length&&(d={flightHotel:"flight-hotel",flightHotelCar:"flight-hotel-car",flightCar:"flight-car",hotelCar:"hotel-car"},d=d[b],a=g('li.tab button[data-lob\x3d"package"]'),d&&(h=g('.gcw-sub-nav-option[value\x3d"'+d+'"]'))));0<a.length&&a.click();h&&0<h.length&&h.prop("checked",!0)}},isLobParamPresentInUrl:e}});require("uitk",function(g){$(".tab").on("click",function(f){var e=$(f.target).closest("button"),b=e.data("gcw-tab-link");b&&(f.stopPropagation(),e.data("gcw-tab-link-new-window")?window.open(b,b):window.location=b)});$("button[data-gcw-add-disabled-mobile-classes]").each(function(){var f=$(this),e=f.data("gcw-add-disabled-mobile-classes");if(e){e=e.split(",");for(var b=0;b<e.length;b++)""!==e[b]&&f.parent().addClass(e[b])}});$(".wizard-tabs .tab").css("display","list-item")});(function(){var g={}.hasOwnProperty,f=function(a,c){function b(){this.constructor=a}for(var d in c)g.call(c,d)&&(a[d]=c[d]);b.prototype=c.prototype;a.prototype=new b;a.__super__=c.prototype;return a},e=[].slice;var b=function(a){function c(a){this.message=a}f(c,a);c.prototype.name="ValueError";return c}(Error);var a=function(a){null==a&&(a={});return function(){var c;var h=arguments[0];var f=2<=arguments.length?e.call(arguments,1):[];var g=0;var n=c=!1;return h.replace(/([{}])\1|[{](.*?)(?:!(.+?))?[}]/g,function(e,h,l,m){var q,p;if(h)return h;if(l.length){if(c)throw new b("cannot switch from implicit to explicit numbering");n=!0;e=null!=(q=d(f,l))?q:""}else{if(n)throw new b("cannot switch from explicit to implicit numbering");c=!0;e=null!=(p=f[g++])?p:""}return Object.prototype.hasOwnProperty.call(a,m)?a[m](e):e})}};var d=function(a,b){var d;for(/^(\d+)([.]|$)/.test(b)||(b="0."+b);d=/(.+?)[.](.+)/.exec(b);)a=c(a,d[1]),b=d[2];return c(a,b)};var c=function(a,c){var b=a[c];return"function"===typeof b?b.call(a):b};var h=a({});h.create=a;h.extend=function(c,b){var d=a(b);c.format=function(){return d.apply(null,[this].concat(e.call(arguments)))}};window.format=h}).call(this);define("classCheck",function(){return function(g,f){if(!(g instanceof f))throw new TypeError("Cannot call a class as a function");}});
var XDate=function(g,f,e,b){function a(){var b=this instanceof a?this:new a;var e=arguments;var h=e.length,f;"boolean"==typeof e[h-1]&&(f=e[--h],e=F(e,0,h));if(h)if(1==h)if(h=e[0],h instanceof g||"number"==typeof h)b[0]=new g(+h);else if(h instanceof a){e=b;var k=new g(+h[0]);d(h)&&(k.toString=I);e[0]=k}else{if("string"==typeof h)a:{b[0]=new g(0),e=h;h=f||!1;k=a.parsers;for(var n=0,l;n<k.length;n++)if(l=k[n](e,h,b)){b=l;break a}b[0]=new g(e)}}else b[0]=new g(G.apply(g,e)),f||(b[0]=B(b[0]));else b[0]=new g;"boolean"==typeof f&&c(b,f);return b}function d(a){return a[0].toString===I}function c(a,c,b){c?d(a)||(b&&(a[0]=new g(G(a[0].getFullYear(),a[0].getMonth(),a[0].getDate(),a[0].getHours(),a[0].getMinutes(),a[0].getSeconds(),a[0].getMilliseconds()))),a[0].toString=I):d(a)&&(a[0]=b?B(a[0]):new g(+a[0]));return a}function h(a,c,b,d,e){var h=D(y,a[0],e);a=D(A,a[0],e);e=!1;2==d.length&&"boolean"==typeof d[1]&&(e=d[1],d=[b]);b=1==c?(b%12+12)%12:h(1);a(c,d);e&&h(1)!=b&&(a(1,[h(1)-1]),a(2,[k(h(0),h(1))]))}function n(a,c,b,d){b=Number(b);var e=f.floor(b);a["set"+H[c]](a["get"+H[c]]()+e,d||!1);e!=b&&6>c&&n(a,c+1,(b-e)*L[c],d)}function q(c,b,d){c=c.clone().setUTCMode(!0,!0);b=a(b).setUTCMode(!0,!0);var e=0;if(0==d||1==d){for(var h=6;h>=d;h--)e/=L[h],e+=y(b,!1,h)-y(c,!1,h);1==d&&(e+=12*(b.getFullYear()-c.getFullYear()))}else 2==d?(d=c.toDate().setUTCHours(0,0,0,0),e=b.toDate().setUTCHours(0,0,0,0),e=f.round((e-d)/864E5)+(b-e-(c-d))/864E5):e=(b-c)/[36E5,6E4,1E3,1][d-3];return e}function l(a){var c=a(0),b=a(1),d=a(2);a=new g(G(c,b,d));c=p(m(c,b,d));return f.floor(f.round((a-c)/864E5)/7)+1}function m(a,c,b){c=new g(G(a,c,b));return c<p(a)?a-1:c>=p(a+1)?a+1:a}function p(a){a=new g(G(a,0,4));a.setUTCDate(a.getUTCDate()-(a.getUTCDay()+6)%7);return a}function r(a,c,d,e){var h=D(y,a,e),f=D(A,a,e);d===b&&(d=m(h(0),h(1),h(2)));d=p(d);e||(d=B(d));a.setTime(+d);f(2,[h(2)+7*(c-1)])}function t(c,b,d,e,h){var f=a.locales,g=f[a.defaultLocale]||{},k=D(y,c,h);d=("string"==typeof d?f[d]:d)||{};return u(c,b,function(a){if(e)for(var c=(7==a?2:a)-1;0<=c;c--)e.push(k(c));return k(a)},function(a){return d[a]||g[a]},h)}function u(a,c,d,e,h){for(var f,g,k="";f=c.match(M);){k+=c.substr(0,f.index);if(f[1]){g=k;k=a;for(var n=f[1],l=d,m=e,p=h,q=n.length,r,t="";0<q;)r=v(k,n.substr(0,q),l,m,p),r!==b?(t+=r,n=n.substr(q),q=n.length):q--;k=g+(t+n)}else f[3]?(g=u(a,f[4],d,e,h),parseInt(g.replace(/\D/g,""),10)&&(k+=g)):k+=f[7]||"'";c=c.substr(f.index+f[0].length)}return k+c}function v(c,b,d,e,h){var g=a.formatters[b];if("string"==typeof g)return u(c,g,d,e,h);if("function"==typeof g)return g(c,h||!1,e);switch(b){case "fff":return E(d(6),3);case "s":return d(5);case "ss":return E(d(5));case "m":return d(4);case "mm":return E(d(4));case "h":return d(3)%12||12;case "hh":return E(d(3)%12||12);case "H":return d(3);case "HH":return E(d(3));case "d":return d(2);case "dd":return E(d(2));case "ddd":return e("dayNamesShort")[d(7)]||"";case "dddd":return e("dayNames")[d(7)]||"";case "M":return d(1)+1;case "MM":return E(d(1)+1);case "MMM":return e("monthNamesShort")[d(1)]||"";case "MMMM":return e("monthNames")[d(1)]||"";case "yy":return(d(0)+"").substring(2);case "yyyy":return d(0);case "t":return w(d,e).substr(0,1).toLowerCase();case "tt":return w(d,e).toLowerCase();case "T":return w(d,e).substr(0,1);case "TT":return w(d,e);case "z":case "zz":case "zzz":return h?b="Z":(e=c.getTimezoneOffset(),c=0>e?"+":"-",d=f.floor(f.abs(e)/60),e=f.abs(e)%60,h=d,"zz"==b?h=E(d):"zzz"==b&&(h=E(d)+":"+E(e)),b=c+h),b;case "w":return l(d);case "ww":return E(l(d));case "S":return b=d(2),10<b&&20>b?"th":["st","nd","rd"][b%10-1]||"th"}}function w(a,c){return 12>a(3)?c("amDesignator"):c("pmDesignator")}function x(a){return!isNaN(+a[0])}function y(a,c,b){return a["get"+(c?"UTC":"")+H[b]]()}function A(a,c,b,d){a["set"+(c?"UTC":"")+H[b]].apply(a,d)}function B(a){return new g(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds())}function k(a,c){return 32-(new g(G(a,c,32))).getUTCDate()}function C(a){return function(){return a.apply(b,[this].concat(F(arguments)))}}function D(a){var c=F(arguments,1);return function(){return a.apply(b,c.concat(F(arguments)))}}function F(a,c,d){return e.prototype.slice.call(a,c||0,d===b?a.length:d)}function J(a,c){for(var b=0;b<a.length;b++)c(a[b],b)}function E(a,c){c=c||2;for(a+="";a.length<c;)a="0"+a;return a}var H="FullYear Month Date Hours Minutes Seconds Milliseconds Day Year".split(" "),K=["Years","Months","Days"],L=[12,31,24,60,60,1E3,1],M=/(([a-zA-Z])\2*)|(\((('.*?'|\(.*?\)|.)*?)\))|('(.*?)')/,G=g.UTC,I=g.prototype.toUTCString,z=a.prototype;z.length=1;z.splice=e.prototype.splice;z.getUTCMode=C(d);z.setUTCMode=C(c);z.getTimezoneOffset=function(){return d(this)?0:this[0].getTimezoneOffset()};J(H,function(a,c){z["get"+a]=function(){return y(this[0],d(this),c)};8!=c&&(z["getUTC"+a]=function(){return y(this[0],!0,c)});7!=c&&(z["set"+a]=function(a){h(this,c,a,arguments,d(this));return this},8!=c&&(z["setUTC"+a]=function(a){h(this,c,a,arguments,!0);return this},z["add"+(K[c]||a)]=function(a,b){n(this,c,a,b);return this},z["diff"+(K[c]||a)]=function(a){return q(this,a,c)}))});z.getWeek=function(){return l(D(y,this,!1))};z.getUTCWeek=function(){return l(D(y,this,!0))};z.setWeek=function(a,c){r(this,a,c,!1);return this};z.setUTCWeek=function(a,c){r(this,a,c,!0);return this};z.addWeeks=function(a){return this.addDays(7*Number(a))};z.diffWeeks=function(a){return q(this,a,2)/7};a.parsers=[function(a,c,b){if(a=a.match(/^(\d{4})(-(\d{2})(-(\d{2})([T ](\d{2}):(\d{2})(:(\d{2})(\.(\d+))?)?(Z|(([-+])(\d{2})(:?(\d{2}))?))?)?)?)?$/)){var d=new g(G(a[1],a[3]?a[3]-1:0,a[5]||1,a[7]||0,a[8]||0,a[10]||0,a[12]?1E3*Number("0."+a[12]):0));a[13]?a[14]&&d.setUTCMinutes(d.getUTCMinutes()+("-"==a[15]?1:-1)*(60*Number(a[16])+(a[18]?Number(a[18]):0))):c||(d=B(d));return b.setTime(+d)}}];a.parse=function(c){return+a(""+c)};z.toString=function(a,c,e){return a!==b&&x(this)?t(this,a,c,e,d(this)):this[0].toString()};z.toUTCString=z.toGMTString=function(a,c,d){return a!==b&&x(this)?t(this,a,c,d,!0):this[0].toUTCString()};z.toISOString=function(){return this.toUTCString("yyyy-MM-dd'T'HH:mm:ss(.fff)zzz")};a.defaultLocale="";a.locales={"":{monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),amDesignator:"AM",pmDesignator:"PM"}};a.formatters={i:"yyyy-MM-dd'T'HH:mm:ss(.fff)",u:"yyyy-MM-dd'T'HH:mm:ss(.fff)zzz"};J("getTime valueOf toDateString toTimeString toLocaleString toLocaleDateString toLocaleTimeString toJSON".split(" "),function(a){z[a]=function(){return this[0][a]()}});z.setTime=function(a){this[0].setTime(a);return this};z.valid=C(x);z.clone=function(){return new a(this)};z.clearTime=function(){return this.setHours(0,0,0,0)};z.toDate=function(){return new g(+this[0])};a.now=function(){return+new g};a.today=function(){return(new a).clearTime()};a.UTC=G;a.getDaysInMonth=k;"undefined"!==typeof module&&module.exports&&(module.exports=a);"function"===typeof define&&define.amd&&define([],function(){return a});return a}(Date,Math,Array);define("xdate",function(){return XDate});
define("gcw-custom-typeahead.hbs",["handlebars"],function(g){var f=g.template({1:function(e,b,a,d,c,h,f){var g;return'  \x3cli class\x3d"results-item-ally" role\x3d"presentation"\x3e\n'+(null!=(g=a["if"].call(null!=b?b:{},null!=f[1]?f[1].isV4:f[1],{name:"if",hash:{},fn:e.program(2,c,0,h,f),inverse:e.program(4,c,0,h,f),data:c}))?g:"")+"    \x3c/a\x3e\n  \x3c/li\x3e\n"},2:function(e,b,a,d,c){var h,f;return'    \x3ca href\x3d"#" class\x3d"details uitk-ta" data-value\x3d"'+e.escapeExpression(e.lambda(null!=(h=null!=b?b.regionNames:b)?h.lastSearchName:h,b))+'" id\x3d"aria-option-'+e.escapeExpression((f=null!=(f=a.index||c&&c.index)?f:a.helperMissing,"function"===typeof f?f.call(null!=b?b:{},{name:"index",hash:{},data:c}):f))+'" role\x3d"option" tabindex\x3d"-1" data-id\x3d"'+e.escapeExpression((f=null!=(f=a.gaiaId||(null!=b?b.gaiaId:b))?f:a.helperMissing,"function"===typeof f?f.call(null!=b?b:{},{name:"gaiaId",hash:{},data:c}):f))+'" data-type\x3d"'+e.escapeExpression((f=null!=(f=a.type||(null!=b?b.type:b))?f:a.helperMissing,"function"===typeof f?f.call(null!=b?b:{},{name:"type",hash:{},data:c}):f))+'" data-rails-station-code\x3d"'+e.escapeExpression(e.lambda(null!=(h=null!=(h=null!=b?b.hierarchyInfo:b)?h.rails:h)?h.stationCode:h,b))+'" data-airport-code\x3d"'+e.escapeExpression(e.lambda(null!=(h=null!=(h=null!=b?b.hierarchyInfo:b)?h.airport:h)?h.airportCode:h,b))+'" data-lat\x3d"'+e.escapeExpression(e.lambda(null!=(h=null!=b?b.coordinates:b)?h.lat:h,b))+'" data-long\x3d"'+e.escapeExpression(e.lambda(null!=(h=null!=b?b.coordinates:b)?h["long"]:h,b))+'"\x3e\n      \x3cspan class\x3d"icon icon-'+e.escapeExpression((f=null!=(f=a.icon||(null!=b?b.icon:b))?f:a.helperMissing,"function"===typeof f?f.call(null!=b?b:{},{name:"icon",hash:{},data:c}):f))+"\" aria-hidden\x3d'true'\x3e\x3c/span\x3e"+(null!=(h=e.lambda(null!=(h=null!=b?b.regionNames:b)?h.displayName:h,b))?h:"")+"\n"},4:function(e,b,a,d,c){var h,f;return'    \x3ca href\x3d"#" class\x3d"details" data-value\x3d"'+e.escapeExpression((f=null!=(f=a.l||(null!=b?b.l:b))?f:a.helperMissing,"function"===typeof f?f.call(null!=b?b:{},{name:"l",hash:{},data:c}):f))+'" id\x3d"aria-option-'+e.escapeExpression((f=null!=(f=a.index||c&&c.index)?f:a.helperMissing,"function"===typeof f?f.call(null!=b?b:{},{name:"index",hash:{},data:c}):f))+'" role\x3d"option" tabindex\x3d"-1" data-id\x3d"'+e.escapeExpression((f=null!=(f=a.id||(null!=b?b.id:b))?f:a.helperMissing,"function"===typeof f?f.call(null!=b?b:{},{name:"id",hash:{},data:c}):f))+'" data-type\x3d"'+e.escapeExpression((f=null!=(f=a.t||(null!=b?b.t:b))?f:a.helperMissing,"function"===typeof f?f.call(null!=b?b:{},{name:"t",hash:{},data:c}):f))+'" data-rails-station-code\x3d"'+e.escapeExpression(e.lambda(null!=(h=null!=(h=null!=b?b.hierarchyInfo:b)?h.rails:h)?h.stationCode:h,b))+'"\x3e\n      \x3cspan class\x3d"icon icon-'+e.escapeExpression((f=null!=(f=a.icon||(null!=b?b.icon:b))?f:a.helperMissing,"function"===typeof f?f.call(null!=b?b:{},{name:"icon",hash:{},data:c}):f))+"\" aria-hidden\x3d'true'\x3e\x3c/span\x3e"+(null!=(h=(f=null!=(f=a.d||(null!=b?b.d:b))?f:a.helperMissing,"function"===typeof f?f.call(null!=b?b:{},{name:"d",hash:{},data:c}):f))?h:"")+"\n"},6:function(e,b,a,d,c){var f,g;return null!=(f=(g=null!=(g=a.closeText||(null!=b?b.closeText:b))?g:a.helperMissing,"function"===typeof g?g.call(null!=b?b:{},{name:"closeText",hash:{},data:c}):g))?f:""},8:function(e,b,a,d,c){var f;return null!=(f=(a.i18n||b&&b.i18n||a.helperMissing).call(null!=b?b:{},"close",{name:"i18n",hash:{bundle:"uitk_messages",locale:null!=b?b.locale:b},data:c}))?f:""},compiler:[7,"\x3e\x3d 4.0.0"],main:function(e,b,a,d,c,f,g){var h,l;return'\x3cul id\x3d"'+e.escapeExpression((l=null!=(l=a.ariaOwns||(null!=b?b.ariaOwns:b))?l:a.helperMissing,"function"===typeof l?l.call(null!=b?b:{},{name:"ariaOwns",hash:{},data:c}):l))+'" role\x3d"listbox" class\x3d"results"\x3e\n'+(null!=(h=a.each.call(null!=b?b:{},null!=b?b.results:b,{name:"each",hash:{},fn:e.program(1,c,0,f,g),inverse:e.noop,data:c}))?h:"")+'\x3c/ul\x3e\n\x3cfooter class\x3d"footer" role\x3d"application"\x3e\n  \x3ca class\x3d"close" href\x3d"#" aria-label\x3d\''+(null!=(h=(a.compare||b&&b.compare||a.helperMissing).call(null!=b?b:{},null!=b?b.closeText:b,"Close",{name:"compare",hash:{},fn:e.program(6,c,0,f,g),inverse:e.noop,data:c}))?h:"")+"\n    "+(null!=(h=(a.compare||b&&b.compare||a.helperMissing).call(null!=b?b:{},null!=b?b.closeText:b,"Close",{name:"compare",hash:{operator:"!\x3d"},fn:e.program(8,c,0,f,g),inverse:e.noop,data:c}))?h:"")+"'\x3e\n    "+(null!=(h=(a.compare||b&&b.compare||a.helperMissing).call(null!=b?b:{},null!=b?b.closeText:b,"Close",{name:"compare",hash:{},fn:e.program(6,c,0,f,g),inverse:e.noop,data:c}))?h:"")+"\n    "+(null!=(h=(a.compare||b&&b.compare||a.helperMissing).call(null!=b?b:{},null!=b?b.closeText:b,"Close",{name:"compare",hash:{operator:"!\x3d"},fn:e.program(8,c,0,f,g),inverse:e.noop,data:c}))?h:"")+'\n    \x3cspan class\x3d"icon icon-close"\x3e\x3c/span\x3e\n  \x3c/a\x3e\n\x3c/footer\x3e'},useData:!0,useDepths:!0});g.templates=g.templates||{};g.templates["gcw-custom-typeahead"]=f;g.partials=g.partials||{};return g.partials["gcw-custom-typeahead"]=f});
define("gcw-traveler-selector-state",["uitk","jquery"],function(g,f){function e(c){a=this;a._loadStoredData(c);g.subscribe("travelerselector.cloneRoom",a._addRoomUpdateTravelers);g.subscribe("travelerselector.removeRoom",a._removeRoomUpdateTravelers);g.subscribe("travelerselector.updateTravelerInformation",a._changeTravelerInformation);g.subscribe("travelerselector.onLoadUpdateRooms",a._updateRooms);g.subscribe("travelerselector.onLoadUpdateTravelers",a._updateTravelers);g.subscribe("travelerselector.injectTravelerData",a._injectTravelerData)}var b=null,a,d=function(){this.children=[];this.adults=[];this.infants=[];this.childrenAndInfants=[];this.visibleChildrenAndInfants=this.visibleChildren=this.visibleInfants=0},c=[new d],h=1;e.prototype._injectTravelerData=function(b,d){function e(a){var c=!0;void 0!==a&&0<a.length&&a.forEach(function(a,b){"string"!==typeof a&&(c=!1)});return c}function f(a,c){var b=!0;void 0!==c&&0<c.length&&("children"===a&&c.forEach(function(a,c){1>=parseInt(a)&&(b=!1)}),"infants"===a&&c.forEach(function(a,c){1<parseInt(a)&&(b=!1)}));return b}(function(a){var c=a.visibleRooms;a=a.roomData;if(void 0===c||"number"!==typeof c&&"group"!==c||1>c||9<c||void 0===a||!Array.isArray(a)||1>a.length)return!1;for(c=0;c<a.length;c++){var b=a[c];if(void 0!==b.adults&&Array.isArray(b.adults)&&!(1>b.adults.length)&&e(b.adults)&&void 0!==b.children&&Array.isArray(b.children)&&e(b.children))if(void 0!==b.infants&&Array.isArray(b.infants)&&e(b.infants))if(void 0!==b.childrenAndInfants&&Array.isArray(b.childrenAndInfants)&&e(b.childrenAndInfants)){if(void 0===b.visibleChildren||"number"!==typeof b.visibleChildren||void 0===b.visibleInfants||"number"!==typeof b.visibleInfants||void 0===b.visibleChildrenAndInfants||"number"!==typeof b.visibleChildrenAndInfants||!f("children",b.children)||!f("infants",b.infants))return!1}else return!1;else return!1;else return!1}return!0})(d)&&(g.publish("travelerselector.clearClonedFields",{}),c=d.roomData,h="group"===d.visibleRooms?9:d.visibleRooms,a._updateRooms(),a._updateTravelers())};e.prototype._loadStoredData=function(b){b&&(b["traveler-selector-data"]&&(c=b["traveler-selector-data"]),b["gcw-num-rooms"]&&(h="group"===b["gcw-num-rooms"]?9:b["gcw-num-rooms"]),a._updateTravelers())};e.prototype._addRoomUpdateTravelers=function(b,e){if(e.totalRooms>h){a._setDefaultAdults(e.$el);var f=e.defaults;c.push(new d);h++;f.forEach(function(b,d){for(var e=b[1],f=0;f<e;f++)c[c.length-1][a._normalizeTravelerType(b[0])].push("")});a._updateRooms();a._updateTravelers()}};e.prototype._removeRoomUpdateTravelers=function(b,d){d.totalRooms<h&&(c.splice(d.index,1),h--,a._updateRooms(),a._updateTravelers())};e.prototype._changeTravelerInformation=function(b,e){var h=e.input,g=f(h.find(".gcw-child-field:not(.gcw-disabled)")),n=f(h.find(".gcw-child-field.gcw-disabled"));h=f(h.find(".uitk-step-input-input"));var q=new d,t=0;h.each(function(c,b){var d=f(b).val(),e=f(b).data("gcw-storeable-name").split("-"),h=a._normalizeTravelerType(e[2]);t=parseInt(e[3])-1;for(e=0;e<d;e++)q[h].push("");"children"===h&&(q.visibleChildren=parseInt(d));"infants"===h&&(q.visibleInfants=parseInt(d))});q.visibleChildrenAndInfants=q.visibleChildren+q.visibleInfants;c[t]=q;var u=0;g.each(function(c,b){var d=f(f(b).find("select")),e=d.val()?d.val():"";u+=a.addTravelerAgeInformation(t,u,d,e)});n.each(function(c,b){var d=f(f(b).find("select")),e=d.val()?d.val():"";""!==e&&(u+=a.addTravelerAgeInformation(t,u,d,e))});a._updateTravelers()};e.prototype.addTravelerAgeInformation=function(b,d,e,f){var h=e.data("gcw-storeable-name").split("-");e=a._normalizeTravelerType(h[1]);h=h[4]-1;"children"===e&&(h-=d);c[b][e][h]=f;c[b].childrenAndInfants.push(f);return a._sortTravelers(h,e,b,d)};e.prototype._sortTravelers=function(a,b,d,e){var f=c[d][b][a],h=0;1>=parseInt(f)&&"infants"!==b&&(c[d][b].splice(a,1),c[d].infants.push(f),a+e<c[d].visibleChildrenAndInfants&&(c[d].visibleChildren--,c[d].visibleInfants++),h=1);return h};e.prototype._normalizeTravelerType=function(a){if("infant"===a||"infants"===a)return"infants";if("child"===a|"children"===a)return"children";if("adult"===a|"adults"===a)return"adults"};e.prototype._setDefaultAdults=function(a){if(!c[0].adults.length){a=f(a.find(".gcw-traveler-selector-num-adults")).val();for(var b=0;b<parseInt(a);b++)c[0].adults.push("")}};e.prototype._updateTravelers=function(){g.publish("travelerselector.updatetravelerselector",{roomData:c,visibleRooms:h})};e.prototype._updateRooms=function(){g.publish("travelerselector.updaterooms",{roomData:c,visibleRooms:h})};e.prototype.getState=function(){return{rooms:c,visibleRooms:h}};e.prototype.resetSingleton=function(){b=null;c=[new d];h=1};return function(a){return b=b||new e(a)}});define("gcw-traveler-selector-state-manager",["uitk","jquery","gcw-traveler-selector-state"],function(g,f,e){function b(b){a=this;a.TSS=e(b)}var a;b.prototype.updateNumberOfTravelers=function(b,c,e){b=f(e.find(".gcw-travel-selector-wrapper"));for(var d=0;d<b.length;d++)a._updateTravelerHTML(f(b[d]),c,e)};b.prototype._updateTravelerHTML=function(b,c,e){var d=c.roomData;b=f(b.find(".traveler-selector-room-data"));b.length!==c.visibleRooms&&a._updateRooms("",c,e);var h=!1;b.each(function(c,b){if(c<d.length){b=f(b);var e=d[c].adults.length,g=parseInt(d[c].visibleChildren),l=parseInt(d[c].visibleInfants),n=parseInt(d[c].visibleChildrenAndInfants),m=f(b.find(".gcw-traveler-selector-num-adults"));0<l&&(h=!0);var q=parseInt(m.attr("max"));0<e&&(e<=q?m[0].value=e:m[0].value=q);f(m[0]).trigger("input");e=f(b.find(".children-wrapper"));m=f(b.find(".infants-wrapper"));e.length&&m.length?(a._setChildInformation(e,g,d[c].children),a._setChildInformation(m,l,d[c].infants)):e.length&&!m.length&&a._setChildInformation(e,n,d[c].childrenAndInfants)}});a.showYoungChildNote(h,e)};b.prototype.showYoungChildNote=function(a,c){var b=f(c.find(".gcw-young-child-note"));a?b.removeClass("gcw-disabled"):b.addClass("gcw-disabled")};b.prototype._setChildInformation=function(b,c,e){var d=f(b.find("input")),h=f(b.find(".gcw-child-age-select"));e.forEach(function(c,b){var d=f(h[b]);if(a.optionExistInSelect(d,c))d.val(c);else{var e=f(d.find("option")),g=f(e[1]).val();e=f(e[e.length-1]).val();var l=parseInt(c);l<=parseInt(g)?d.val(g):l>=parseInt(e)&&d.val(e)}});for(b=e.length;b<h.length;b++)f(h[b]).val("");b=parseInt(d.attr("max"));c<=b?d[0].value=c:d[0].value=b;f(d[0]).trigger("input");f(d[0]).trigger("change")};b.prototype.optionExistInSelect=function(a,c){var b=!1;a.find("option").each(function(a,d){f(d).val()===c&&(b=!0)});return b};b.prototype._updateRooms=function(a,c,b){a=f(b.find("input.gcw-clone-field-configuration"));c=c.visibleRooms;for(b=0;b<a.length;b++){var d=f(a[b]),e=d.data("max-clones-allowed")+1,h="group"===d.val()?9:parseInt(d.val());if(c>h)for(h+=1;h<=c;h++){if(h<=e||8<=h)9===h?d.val("group"):d.val(h),d.trigger("input")}else if(c<h)for(e=h-1;e>=c;e--)d.val(e),d.trigger("input")}};b.prototype._clearClonedRooms=function(a,c,b){a=f(b.find(".gcw-remove-cloned-field"));for(c=a.length;0<c;c--)a.trigger("click")};return b});define("gcwComponentInitializer",["jquery"],function(g){return{registerComponent:function(f,e,b){var a=0,d=f.form.find('[data-gcw-component\x3d"'+e+'"]').filter(":not(.gcw-component-initialized)"),c=d.length,h=[];for(a;a<c;a++){var n=d[a];n[e]||(h.push(n[e]=new b(n,f)),g(n).addClass("gcw-component-initialized"))}return h}}});
define("gcw-step-input",["uitk","jquery"],function(g,f){function e(a,d){this.componentName="gcw-step-input";this.element=a;this.gcwForm=d;this.initialized=!1;a&&(this.options=b,this.init())}var b={increaseValue:"1",decreaseValue:"-1"};e.prototype={constructor:e,init:function(){var a=this,b=a.element,c=f(a.element),e=!0;a.inputElem=b.querySelector(".uitk-step-input-input");a.$inputElem=f(a.inputElem);a.gcwFormFeatureName=a.$inputElem.data("gcw-feature-name");a.min=parseInt(a.inputElem.min,10);a.max=parseInt(a.inputElem.max,10);a.value=parseInt(a.inputElem.value||0,10);a.$minusBtn=c.find(".uitk-step-input-minus");a.$plusBtn=c.find(".uitk-step-input-plus");a.valueElem=b.querySelector(".uitk-step-input-value");b.classList.add("gcw-step-input");a.inputElem.setAttribute("type","hidden");a.$plusBtn.on("click",a._increaseCount.bind(a));a.$minusBtn.on("click",a._decreaseCount.bind(a));a.$inputElem.on("input",function(){var c=a.value,b=f(this).val();a._changeCount(b-c,!0)});e=a.value>=a.min&&a.value<=a.max;a.$minusBtn.prop("disabled",!1);a.$plusBtn.prop("disabled",!1);e?(a.valueElem.innerHTML=a.value,a.value<=a.min&&a.$minusBtn.prop("disabled",!0),a.value>=a.max&&a.$plusBtn.prop("disabled",!0)):(a.value=a.max,a.valueElem.innerHTML=a.value,a.$plusBtn.prop("disabled",!0),a.$inputElem.val(a.value));a._publishUpdate();a.initialized=!0},_publishUpdate:function(){this.gcwFormFeatureName!==this.$inputElem.data("gcw-feature-name")&&(this.gcwFormFeatureName=this.$inputElem.data("gcw-feature-name"));var a=this.gcwFormFeatureName.split("."),b=1<a.length?a[0]:void 0;if(b){void 0===this.gcwForm[b]&&(this.gcwForm[b]={});var c=a[1];this.gcwForm[b][c]=this.value}else this.gcwForm[c]=this.value;g.publish("gcw-step-input-updated",{gcwFeatureName:c,value:this.value});g.publish("gcw-form-feature-updated",{gcwFeature:c,value:this.value})},_changeCount:function(a,b){var c=this.value+parseInt(a,10);c>=this.min&&c<=this.max?(b?f(this.inputElem).trigger("change.step-input.reflection"):(this.inputElem.value=c,f(this.inputElem).trigger("change"),g.publish("travelerselector.updateTravelerInformation",{input:f(this.$inputElem.parents(".traveler-selector-room-data"))}),g.utils.liveAnnounce(c.toString())),this.value=this.valueElem.innerHTML=c,this._publishUpdate(),0!==a&&(0>parseInt(a,10)?(c<=this.min&&this.$minusBtn.prop("disabled",!0),this.$plusBtn.is(":disabled")&&this.$plusBtn.prop("disabled",!1)):(c>=this.max&&this.$plusBtn.prop("disabled",!0),this.$minusBtn.is(":disabled")&&this.$minusBtn.prop("disabled",!1)))):this.$inputElem.val(this.value)},_increaseCount:function(){this._changeCount(this.options.increaseValue,!1)},_decreaseCount:function(){this._changeCount(this.options.decreaseValue,!1)}};return e});define("gcw-traveler-amount-select",["uitk","jquery"],function(g,f){function e(b,a){this.componentName="gcw-traveler-amount-select";this.$component=f(b);this.$amountFields=this.$component.find(".gcw-amount-field");this.gcwForm=a;this.$form=a.form;this.initialized=!1;this.isSingleRoom=!0===this.$component.data("gcw-single-room");this.$amountRooms=this.$amountFields.filter(".rooms");this.$amountAdults=this.$amountFields.filter(".adults");this.$amountChildren=this.$amountFields.filter(".children");this.$amountTravelers=this.$amountFields.filter(".travelers");this.$closestTravelerSelector=this.$component.closest(".gcw-travel-selector-wrapper");this.$totalRoomsConfigField=this.$closestTravelerSelector.find(".gcw-traveler-selector-num-rooms");this.$roomsTitles=this.$component.next().find(".title-amount");b&&this.init()}e.prototype={constructor:e,init:function(){var b=this;b.$component.addClass("gcw-traveler-amount-select");g.subscribe("gcw-step-input-first-load-complete",function(){b._getTotalTravelers.bind(b)()});b.$closestTravelerSelector.on("change, change.step-input.reflection",".gcw-traveler-selector-num-adults",b._getTotalTravelers.bind(b));b.$closestTravelerSelector.on("change, change.step-input.reflection",".gcw-traveler-selector-num-children",b._getTotalTravelers.bind(b));b.$closestTravelerSelector.on("change",".gcw-traveler-selector-num-rooms",b._getTotalTravelers.bind(b));b.$closestTravelerSelector.on("input",".gcw-traveler-selector-num-rooms",b._getTotalTravelers.bind(b));b._getTotalTravelers();b.initialized=!0},_getTotalTravelers:function(b){var a=this,d=a.$totalRoomsConfigField.val();a.totalRooms=0;a.totalAdults=0;a.totalChildren=0;a.totalTravelers=0;b=a.$closestTravelerSelector.find(".gcw-traveler-selector-num-adults");var c=a.$closestTravelerSelector.find(".gcw-traveler-selector-num-children");b.each(function(c,b){a.totalAdults+=f(b).val()?parseInt(f(b).val(),10):0});c.each(function(c,b){a.totalChildren+=f(b).val()?parseInt(f(b).val(),10):0});a.totalRooms="group"===d?9:parseInt(a.$totalRoomsConfigField.val(),10)||1;a.totalTravelers=a.totalAdults+a.totalChildren;a._setDataAttributes();a._setAmountOfTravelers()},_setAmountOfTravelers:function(){var b=8<this.totalRooms?this.ninePlusLabel:this.totalRooms,a=this.$amountRooms.data("rooms-label"),d=this.$amountRooms.data("room-label"),c=this.$amountRooms.data("nine-plus-label"),e=this.$amountAdults.data("adults-label"),f=this.$amountAdults.data("adult-label"),g=this.$amountChildren.data("children-label"),l=this.$amountChildren.data("child-label"),m=this.$amountTravelers.data("traveler-label"),p=this.$amountTravelers.data("travelers-label");if(this.$amountAdults.length){var r=1<this.totalAdults||0===this.totalAdults?window.format.apply({},[e,this.totalAdults]):f;this.$amountAdults.html(r+",")}this.$amountChildren.length&&(e=1<this.totalChildren||0===this.totalChildren?window.format.apply({},[g,this.totalChildren]):l,this.$amountRooms.length?this.$amountChildren.html(" "+e+", "):this.$amountChildren.html(" "+e),0===this.totalChildren?this.$amountChildren.addClass("gcw-disabled"):this.$amountChildren.removeClass("gcw-disabled"));this.$amountTravelers.length&&(m=1<this.totalTravelers||0===this.totalTravelers?window.format.apply({},[p,this.totalTravelers]):m,this.$amountTravelers.html(m));this.$amountRooms.length?(r=1<this.totalRooms?8<this.totalRooms?c:window.format.apply({},[a,b]):d,this.$amountTravelers.length?this.$amountRooms.html(r+", "):this.$amountRooms.html(r)):0<this.totalChildren?this.$amountAdults.html(r+", "):this.$amountAdults.html(r);this._setInitialValues()},_setDataAttributes:function(){this.$component.data("adults",this.totalAdults).data("children",this.totalChildren).data("total-travelers",this.totalTravelers).data("total-rooms",this.totalRooms)},_setInitialValues:function(){this.$roomsTitles.html(this.$roomsTitles.text().replace("{0}","1"))}};return e});
define("gcw-clone-field",["uitk","jquery","handlebars","remove-field-template.hbs","uitk_dropdown"],function(g,f,e,b,a){function d(a,b){this.componentName="gcw-clone-field";this.$component=f(a);this.gcwForm=b;this.$form=b.form;this.initialized=!1;this.clonesAllowed=!0;this.isNinePlusRoomsEnabled=!1;this.$configurationField=this.$component.find("input.gcw-clone-field-configuration");this.targetFieldSelector=this.$configurationField.data("target-field-selector");this.$targetField=this.$form.find(this.targetFieldSelector);this.targetPubEventName=this.$configurationField.data("gcw-pub-event-name");this.maxClonesAllowed=parseInt(this.$configurationField.data("max-clones-allowed")||"0");this.originalMaxClonesAllowed=this.$configurationField.data("original-max-clones-allowed")||this.maxClonesAllowed;this.initialClonesNeeded=parseInt(this.$configurationField.val()-1);isNaN(this.initialClonesNeeded)&&(this.initialClonesNeeded="group"===this.$configurationField.val()?8:0);this.clonedElementsCount=0;this.clonedElements=[];this.removeButtonText=this.$configurationField.data("remove-button-text");this.removeButtonTitle=this.$configurationField.data("remove-button-title");this.gcwFormFeatureName=this.$configurationField.data("gcw-feature-name");this.ninePlusRoomsEnabled=this.$configurationField.data("gcw-nine-plus-rooms-enabled");this.$closestTravelerSelector=this.$component.closest(".gcw-travel-selector-wrapper");this.$closestMenu=this.$closestTravelerSelector.find('[data-control\x3d"menu"]');this.initialTitle=f(this.$configurationField.data("amount-selector")).text().split(" ");a&&(this.$component.addClass("gcw-component-initialized"),this.defaultFields=[],this.init())}d.prototype={constructor:d,init:function(){var a=this;a.$configurationField.on("input",function(c){c=parseInt(f(this).val()-1)-a.clonedElementsCount;1===c?a._cloneField():-1===c?(c=a.$configurationField.data("last-item-removed"),a._removeField(c)):a.$configurationField.val(a.clonedElementsCount+1)});a.$configurationField.on("cloneField.maxClonesAllowed.update",function(c){c=f(c.target).data("max-clones-allowed");a._updateMaxClonesAllowed(c)});a.$configurationField.on("cloneField.maxClonesAllowed.restore",a._restoreMaxClonesAllowed.bind(a));a.$component.on("click",function(c){c.preventDefault();c.stopPropagation();a._cloneField();a.clonesAllowed&&(a.$configurationField.val(a.clonedElementsCount+1),a.$configurationField.trigger("change"),g.publish("travelerselector.cloneRoom",{defaults:a.defaultFields,$el:a.$targetField,totalRooms:a.clonedElementsCount+1}))});a.$closestTravelerSelector.on("click",function(c){a.isNinePlusRoomsEnabled&&a._isNinePlusRoomsOff()});g.subscribe("gcw-clone-field.item.removed",function(a,c){this.$configurationField.data("last-item-removed",c.indexRemoved)}.bind(a));a._cloneFields(a.initialClonesNeeded);a.$component.addClass("gcw-clone-field");a.initialized=!0},_cloneFields:function(){for(var a=0;a<this.initialClonesNeeded;a++)this._cloneField();g.publish("gcw-step-input-first-load-complete",{})},_addMoreRooms:function(){return this.clonedElementsCount<this.maxClonesAllowed||this.ninePlusRoomsEnabled&&7<=this.maxClonesAllowed?!0:!1},_toggleAddAnotherRoomButton:function(){var a=this.$component;this._addMoreRooms()?a.removeClass("gcw-disabled"):a.addClass("gcw-disabled")},_cloneField:function(){if(this.clonedElementsCount<this.maxClonesAllowed){this.clonesAllowed=!0;this.clonedElementsCount++;var a=this.$targetField.clone();this._cleanupEl(a);this._addNewFieldsToFieldsCollection(a);this._loadStoredData(a);this.clonedElements.push(a);this.$component.before(a);this._attachRemoveField(a);this._initComponents(a);a.addClass("gcw-cloned-field");this._publishChange();a.find(".title-amount").attr("tabindex",0);a.find(".title-amount").attr("aria-live","assertive");a.find(".title-amount").focus()}else this.clonesAllowed=!1,this.$configurationField.val(this.clonedElementsCount+1),7===this.clonedElementsCount&&this.ninePlusRoomsEnabled&&this._isNinePlusRoomsOn();this._toggleAddAnotherRoomButton()},_isNinePlusRoomsOn:function(){this.$closestMenu.uitk_dropDown("close");this.$configurationField.val("group");this.$configurationField.trigger("change");this.isNinePlusRoomsEnabled=!0},_isNinePlusRoomsOff:function(){this.$configurationField.val(this.clonedElementsCount+1);this.$configurationField.trigger("change");this.isNinePlusRoomsEnabled=!1},_addNewFieldsToFieldsCollection:function(a){var c=this.gcwForm.fieldsCollection;a.find("input","select","textarea").each(function(){c.add(f(this))})},_removeFieldsFromFieldsCollectionInstance:function(a){var c=this.gcwForm.fieldsCollection;a.find("input","select","textarea").each(function(){c.remove(f(this))})},_removeField:function(a){var b=this.clonedElements.length===a+1,c=this.clonedElements[a];c.remove();this._removeFieldsFromFieldsCollectionInstance(c);this.clonedElements.splice(a,1);this.clonedElementsCount--;this._adjustCurrentElements(b,a);this._toggleAddAnotherRoomButton();this._publishChange()},_cleanupEl:function(a){var b=this;b.defaultFields=[];var c=b.$configurationField.data("clear-value-selector");c=a.find(c);var d=b.$configurationField.data("amount-selector"),e=a.find(".gcw-update-feature-name");d=a.find(d);var g=a.find(".gcw-child-field"),p=a.find(".gcw-infant-field");a=a.find(".traveler-increment");1<b.initialTitle.length&&d.text(b.initialTitle[0]+" "+parseInt(b.clonedElementsCount+1));a.each(function(a,c){var d=f(c).text().split(" ");d[d.length-1]=parseInt(b.clonedElementsCount+1);f(c).html(d.join(" "))});c.length&&c.each(function(a,c){var d=f(c);d.val(d.attr("min"));if(d.data("gcw-storeable-name")){var e=d.data("gcw-storeable-name"),h=e.split("-");b.defaultFields.push([h[2],d.val()]);h=parseInt(h[h.length-1]);e=e.replace(h,b.clonedElementsCount+1);d.attr("data-gcw-storeable-name",e);d.data("gcw-storeable-name",e)}});e.length&&e.each(function(a,c){var d=b.$configurationField.data("update-data-feature-name"),e=f(c).data(d);if(e){var h=e.split("_");h=parseInt(h[h.length-1]);f(c).data(d,e.replace(h,b.clonedElementsCount+1))}});g.addClass("gcw-disabled");p.addClass("gcw-disabled");b._restoreChildrenAndInfantsStoreableName(g,b.clonedElementsCount+1)},_attachRemoveField:function(a){var c=this,d=c.$configurationField.data("target-title-wrapper-selector");d=a.find(d);var e=b(c._buildRemoveFieldContext());d.append(e);a.find(".gcw-remove-cloned-field").on("click",function(a){a.preventDefault();a.stopPropagation();a=f(this).data("cloned-element-index");c._removeField(a);c.$configurationField.val(c.clonedElementsCount+1);g.publish("travelerselector.removeRoom",{index:a+1,totalRooms:c.clonedElementsCount+1});c.$configurationField.trigger("change");g.publish("travelerselector.onLoadUpdateTravelers")})},_adjustCurrentElements:function(a,b){var c=this,d=c.clonedElements.slice(b),e=c.clonedElements.length-d.length;a||f.each(d,function(a,b){var d=c.$configurationField.data("amount-selector"),h=b.find(d);d=b.find(".gcw-remove-cloned-field");var g=c.$configurationField.data("clear-value-selector");g=b.find(g);var l=b.find(".gcw-update-feature-name"),m=e+2,n=h.text().split(" "),p=b.find(".gcw-child-field"),q=f(b).find(".traveler-increment");h.text(n[0]+" "+m);q.each(function(a,b){var c=f(b).text().split(" ");c[c.length-1]=parseInt(m);f(b).html(c.join(" "))});h=c.removeButtonTitle.split(" ");h[h.length-1]=parseInt(m);c.$configurationField.attr("remove-button-title",h.join(" "));h=f(f(b).find(".gcw-remove-cloned-field")).find("span");f(h).attr("title",c.$configurationField.attr("remove-button-title"));d.data("cloned-element-index",e);d.attr("data-cloned-element-index",e);g.length&&g.each(function(a,b){var c=f(b);if(c.data("gcw-storeable-name")){var d=c.data("gcw-storeable-name"),e=d.split("-");e=parseInt(e[e.length-1]);d=d.replace(e,m);c.attr("data-gcw-storeable-name",d);c.data("gcw-storeable-name",d)}});l.length&&l.each(function(a,b){var d=c.$configurationField.data("update-data-feature-name"),e=f(b).data(d);if(e){var h=e.split("_");h=parseInt(h[h.length-1]);
e=e.replace(h,m);f(b).data(d,e);f(b).trigger("input")}});c._restoreChildrenAndInfantsStoreableName(p,m);e++});g.publish("gcw-clone-field.item.removed",{indexRemoved:b})},_buildRemoveFieldContext:function(){var a=this.removeButtonTitle.split(" ");a[a.length-1]=this.clonedElementsCount+1;this.$configurationField.attr("data-remove-button-title",a.join(" "));return{index:this.clonedElementsCount-1,title:this.$configurationField.attr("data-remove-button-title"),text:this.removeButtonText}},_initComponents:function(a){this._restoreComponents(a);this.gcwForm.initGcwComponents()},_loadStoredData:function(a){var b=this;a.find(".gcw-storeable").each(function(){var a=f(this),c=a.data("gcw-storeable-name"),d=b.gcwForm,e=d.storedData;(c=e&&e[c]||void 0)&&a.val(c);c&&a.hasClass("gcw-toggles-fields")&&d.selectToggle(a);b._toggleAddAnotherRoomButton()})},_restoreComponents:function(a){a.find(".gcw-component").removeClass("gcw-component-initialized")},_publishChange:function(){var a=this.gcwFormFeatureName.split("."),b=1<a.length?a[0]:void 0,d=this.clonedElementsCount+1,e=this.targetPubEventName;b?(void 0===this.gcwForm[b]&&(this.gcwForm[b]={}),a=a[1],this.gcwForm[b][a]=d):this.gcwForm[a]=d;e&&g.publish(e,{})},_updateMaxClonesAllowed:function(a){this.maxClonesAllowed=a;this._toggleAddAnotherRoomButton()},_restoreMaxClonesAllowed:function(){this.maxClonesAllowed=this.originalMaxClonesAllowed;this._toggleAddAnotherRoomButton()},_restoreChildrenAndInfantsStoreableName:function(a,b){a.each(function(a,c){var d=f(c).find("select"),e=d.data("gcw-storeable-name").split("-");e[e.length-2]=b.toString();e=e.join("-");d.data("gcw-storeable-name",e);d.attr("data-gcw-storeable-name",e)})}};return d});define("remove-field-template.hbs",["handlebars"],function(g){var f=g.template({compiler:[7,"\x3e\x3d 4.0.0"],main:function(e,b,a,d,c){var f;return'\x3ca href\x3d"#"\n  role\x3d"button"\n  id\x3d""\n  class\x3d"secondary gcw-remove-cloned-field"\n  data-cloned-element-index\x3d'+e.escapeExpression((f=null!=(f=a.index||(null!=b?b.index:b))?f:a.helperMissing,"function"===typeof f?f.call(null!=b?b:{},{name:"index",hash:{},data:c}):f))+'\n  \x3e\n    \x3cspan class\x3d"icon visuallyhidden" title\x3d"'+e.escapeExpression((f=null!=(f=a.title||(null!=b?b.title:b))?f:a.helperMissing,"function"===typeof f?f.call(null!=b?b:{},{name:"title",hash:{},data:c}):f))+'"\x3e'+e.escapeExpression((f=null!=(f=a.title||(null!=b?b.title:b))?f:a.helperMissing,"function"===typeof f?f.call(null!=b?b:{},{name:"title",hash:{},data:c}):f))+'\x3c/span\x3e\x3cspan aria-hidden\x3d"true"\x3e'+e.escapeExpression((f=null!=(f=a.text||(null!=b?b.text:b))?f:a.helperMissing,"function"===typeof f?f.call(null!=b?b:{},{name:"text",hash:{},data:c}):f))+"\x3c/span\x3e\n\x3c/a\x3e\n"},useData:!0});g.templates=g.templates||{};g.templates["remove-field-template"]=f;g.partials=g.partials||{};return g.partials["remove-field-template"]=f});
//# sourceMappingURL=script.js.map