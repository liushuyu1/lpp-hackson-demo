define("dctk/dctk",["PlatformAnalytics"],function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="https://b.travel-assets.com/platform-analytics-prime/1/",n(n.s=1)}([function(t,n){t.exports=e},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(0),o={event2:"AppFederatedSearch",event3:"ProductView",event4:"ProductViewUDP",event5:"AppETPEligible",event6:"Leads",event7:"LeadUnits",event8:"LeadValue",event9:"InfositeHotelPostBook",event10:"DatedSearch",event11:"NonDatedSearch",event12:"SearchResultsProduct",event13:"SearchResultsDisambig",event14:"InventoryNoAvailable",event15:"SearchResultsAirportDropoff",event16:"SearchResultsAirport",event17:"AppInAppPushNotification",event18:"InventoryPartialAvailable",event21:"CouponAddSuccess",event22:"CouponAddFailure",event25:"UserAccountCreated",event26:"UserAccountLogin",event27:"UserAccountUpdates",event28:"UserAccountAutoCreated",event29:"UserAccountLogout",event31:"PageDiscover",event33:"PageViewfinder",event34:"AppBookByPhone",event35:"CallSupport",event36:"CheckoutStart",event37:"AppUserFeedback",event38:"CheckoutError",event39:"AppDeviceCrash",event40:"AppOpt-OutforPush",event41:"AppOpt-InforPush",event42:"AppOpt-InforMarketing",event43:"AppOpt-OutforMarketing",event44:"TypeaheadSelectionDepth",event45:"TypeaheadSearch",event46:"TypeaheadCharactersTyped",event47:"SearchResultsLXGT",event48:"SocialShare",event49:"UserGeneratedContent",event50:"SearchResultsFlightDetailsExpand",event51:"SearchResultsHotel",event52:"SearchResultsCar",event53:"SearchResultsPackage",event54:"SearchResultsFlight",event55:"SearchResultsCruise",event56:"SearchResultsLocalExpert",event57:"AirAttachImpressions",event58:"AirAttachClicks",event59:"SearchResultsCarDrop-off",event60:"RewardsPointRedemption",event61:"RewardsRegistration",event62:"PriceChange",event63:"ItinView",event64:"ItinCancellation",event65:"ItinChange",event66:"ClicktoChat",event67:"RewardsAutoRegistration",event68:"CheckoutStart-Rail",event69:"CheckoutStart-MICKO",event70:"CheckoutStart-Hotel",event71:"CheckoutStart-Flight",event72:"CheckoutStart-Package",event73:"CheckoutStart-Car",event74:"CheckoutStart-Cruise",event75:"CheckoutStart-LocalExpert",event76:"CruiseDepositPayment",event77:"CruiseDepositFinalPayment",event78:"CheckoutStartBaggageEligible",event79:"FlightBaggageEligiblePurchase",event80:"ScratchPadNotificationOpt-In",event81:"ScratchPadNotificationOpt-Out",event82:"EmailOpen",event83:"KrazyGlueClick",event84:"AlertSignup",event85:"AlertEmailValidation",event86:"KrazyGlueImpression",event87:"TripExpertImpression",event88:"TripExpertClick",event89:"CarsMulti-Sort",event90:"CheckoutStart-Insurance",event92:"RecommenderLXClick",event93:"TravelArrangerAdded",event94:"TravelArrangerConfirmed",event95:"ItinClicktoFlightCheckIn",event96:"ItinFlightCheckInSuccess",event97:"ItinFlightCheckInFailure",event98:"ItinItineraryErrors",event101:"BotvilleTraffic",event102:"InfositeHotelReviewTranslatorCharacters",event103:"AdobeVisitorAPIEnabled",event104:"AdobeVisitorAPITimedOut",event105:"MRPHotelSearchResults",event106:"MRPHotelInfositeView",event107:"MRPHotelRateisCheapest",event108:"MRPHotelCheckoutStart",event109:"MRPHotelPurchaseConfirmation",event110:"CheckoutSubmitCar",event111:"CheckoutSubmitLX",event112:"CheckoutSubmitGT",event113:"CheckoutSubmitCruise",event114:"PwPExpedia+Eligible",event115:"PwPCiti/PartnerEligible",event116:"PwPMultiplePrograms",event117:"PwPExpedia+PointsBurned",event118:"PwPShopwithPointsEnabled",event119:"PwPPaywithOrbucksEligible",event120:"ChromePluginInstall",event121:"ChromePluginSearch",event122:"ProductViewInsurance",event123:"PwPOrbucksUsed",event124:"SearchResultsRail",event125:"PwPAMEXEligible",event126:"PwP<3500ExpediaThreshold",event127:"FlightsBookedTicketPending",event128:"SearchResultsHotelAFRPropertyDisplayed",event129:"InfositeHotelAFRPropertyDisplayed",event130:"SearchResultsHotelCompressionScore",event131:"PackageSearchResultsCount",event132:"MIPOffersPresent",event133:"CreditCardEntered",event134:"CheckoutSubmitHotel",event135:"CheckoutAFRPropertyStart",event136:"CheckoutAFRPropertyPurchased",event137:"SearchWizardType",event138:"CheckoutSubmitFlight",event139:"SoftAccountModal",event140:"EmailSubscriptionUpdate",event141:"EmailUnsubscribe",event142:"AdBlockerEnabled",event143:"VoiceRecognition",event144:"OpenSearchSelectionDepth",event145:"OpenSearch",event146:"OpenSearchCharactersTyped",event147:"OpenSearchClickDepth",event148:"ShortlistSaved",event149:"ShortlistUnsaved",event150:"QualtricsSurveySubmissions",event151:"FlexSLPPage",event152:"MIPEligibleHotel",event153:"MIPEligibleCar",event154:"MIPEligibleLX",event155:"EstimatedGP",event156:"BaseBiddingGP",event157:"BiddingGP",event158:"MIPBannerClickthrough",event159:"MIPEligibleGT",event160:"HotelVacationRentals",event161:"Hotel3PIInventory",event162:"Hotel3PIisCheapest",event163:"Hotel3PIisIncremental",event164:"HotelVRTnLEvent",event165:"SearchResultsFlightPinnedOfferImpression",event166:"HotelVRroom#equalsSearchroom#",event167:"HotelVRsimilarroomsmessage",event168:"HotelVRDamageDeposit",event169:"CheckoutConfirmationMICKO",event170:"PercentReviewImpression",event171:"PercentReviewsRT-Out",event172:"PercentReviewsRT-In",event173:"RouteHappyScoreTracked",event174:"RouteHappy/RealTimeReviewRatio",event175:"RealTimeReviewsScoreTracked",event176:"RealTimeReviews",event177:"UGCPagination",event178:"UGCAutomaticReviewPresent",event179:"CheckoutStartItinHotelUpgrade",event180:"CheckoutStartFlight+Car",event181:"CheckoutStartFlight+Hotel+Car",event182:"CheckoutStartHotel+Car",event183:"CheckoutStartLX-GT",event185:"ItinUpgradeOfferImpression",event186:"ItinXsellUber",event187:"CheckoutConfirmationLXGT",event188:"CheckoutConfirmationRail",event189:"CheckoutConfirmationLX",event190:"ItinInsuranceSAProduct",event191:"CheckoutConfirmationFlight",event192:"CheckoutConfirmationFH",event193:"CheckoutConfirmationFC",event194:"CheckoutConfirmationFHC",event195:"CheckoutConfirmationHC",event196:"CheckoutConfirmationHotel",event197:"CheckoutConfirmationCar",event198:"AdobeVisitorID1stPartyCookie",event199:"UISOrders",event200:"AWSExpweb",event201:"AWSCloudPages",event202:"AWSProcessedBookings",event203:"FlightSubPubDiscountShownFSR",event204:"FlightSubPubDiscountShownUDP",event205:"StorefrontmWeb",event206:"StorefrontExpweb",event207:"StorefrontProjectMercury",event208:"AppNotificationReceipt",event209:"AppAlexaIntents",event211:"AppiOS3DTouch",event212:"AppNotificationEntry",event214:"AppUserFavorite",event215:"AppUserUnfavorite",event216:"AppGoogleAutoLogIn",event217:"AppiOSWebCredentialsLogin",event218:"AppGoogleSmartLockSignIn",event219:"AppFacebookLogin",event220:"PageUsableTimeLogged",event221:"PageUsableTime",event222:"ScrollDepthSinglePageCKO",event223:"TimeBeforeAnalyticsLogged",event224:"TimeBeforeAnalytics",event225:"CheckoutSinglePage",event226:"MODOfferPresent",event227:"MarketingClick",event228:"FlexHomepage",event230:"UDPFlightPaidSeatToggle",event231:"AppNon-ImageBytesDownloaded",event232:"AppNon-ImageBytesUploaded",event233:"AppImageBytesDownloaded",event234:"AppImageBytesUploaded",event235:"AppTimetoClickLogged",event236:"AppTimetoClick",event237:"AppAPICallTimeLogged",event238:"AppAPICallTime",event239:"MERSignUp",event240:"HotelRefundable",event241:"HotelNonRefundable",event242:"HotelDomestic",event243:"HotelInternational",event244:"AppStorefrontSearchFieldsChanged",event245:"AppSearchResultsFlightScrollDepth",event246:"FlexAMPPages",event247:"StorefrontAjaxStart",event248:"StorefrontAjaxComplete",event249:"StorefrontAjaxTiming",event250:"ItinActiveHotel",event251:"ItinActiveFlight",event252:"ItinActiveCar",event253:"ItinActiveLX",event254:"ItinActiveRail",event255:"ItinActivePackageFH",event256:"ItinActiveCruise",event257:"ItinActiveGT",event259:"AttachEligibleUser",event260:"CGDReviewsImpression",event261:"ChangeFlightSummaryProductView",event262:"ChangeFlightReviewChangebutton",event263:"ChangeFlightReviewCallbackbutton",event264:"SearchResultsHotelCacheHit",event265:"SearchResultsHotelCacheMiss",event266:"InsuranceGP",event267:"AppBannerImpression",event268:"AppBannerClick",event269:"HandleCount",event270:"CallCount",event271:"HandleDuration",event272:"AppFSRClickedListposition",event273:"AppFSFZeroresults",event274:"APPUDPFFUpgrade",event275:"APPUDPFFChange",event276:"APPMobCache",event277:"APPOWCachedNon-Bookable",event278:"AppBannerImpression-Footer",event279:"UDPMARScount",event280:"UDPAverageHotelXSellPrice",event281:"UDPAverageHotelXSellStarRating",event282:"AppHSRPinnedResultPresent",event283:"AppHSRPinnedResultSoldOut",event284:"UDPRecommenderServicecount",event285:"UDPMDIAPIcount",event286:"AppTripsCallMade",event287:"AppTripsCallSuccess",event288:"AppTripsCallFailure",event289:"SavingsGuaranteeBannerImpression",event290:"SavingsGuaranteeBannerClick",event291:"SavingsGuaranteeCKOPayment",event292:"SavingsGuaranteePointsBurned",event293:"AppSuccessfulVoiceSearch",event294:"AppPartialVoiceSearch",event295:"AppVoiceSearchClickDepth",event296:"InfositeHotelRoomsandRates-Impression",event297:"InfositeHotelRoomsandRates-Click",event298:"AppSearchResultsHotelScrollDepth",event299:"SearchResultsLX-GTNone",event300:"RFRRID10%Sample",event301:"ShoppingCartAddHotel",event302:"ShoppingCartAddCar",event303:"ShoppingCartAddFlight",event304:"ShoppingCartAddLX",event305:"ShoppingCartAddLX-GT",event306:"ShoppingCartAddInsurance",event307:"ShoppingCartAddCruise",event308:"ShoppingCartAddRail",event309:"ShoppingCartAdd3PP",event311:"ShoppingCartRemoveHotel",event312:"ShoppingCartRemoveCar",event313:"ShoppingCartRemoveFlight",event314:"ShoppingCartRemoveLX",event315:"ShoppingCartRemoveLX-GT",event316:"ShoppingCartRemoveInsurance",event317:"ShoppingCartRemoveCruise",event318:"ShoppingCartRemoveRail",event319:"ShoppingCartRemove3PP",event320:"AppMarketingDeepLinkOpen",event321:"AppLSModuleWizard",event322:"AppLSModuleActiveItinerary",event323:"AppLSModuleAirAttach",event324:"AppLSModuleMemberPricing",event325:"AppLSModuleMyLists",event326:"AppLSModuleHotelsNearby-Android",event327:"AppLSModuleAccountSignin/Creation",event328:"AppLSModuleGlobalNavBar",event329:"AppLSModuleLastMinuteDeals",event330:"AppHolidayPromotion-Impression",event331:"AppHolidayPromotion-Click",event332:"AppKochavaInstall",event333:"AppGreedycallsmade",event334:"AppGreedycallsterminated",event335:"AppStorefrontFHAppUpdate",event343:"KrazyGlueMLOBImpression",event344:"KrazyGlueFallbackImpression",event345:"KrazyGluePrimingImpression",event346:"ListsEmptySavedList",event347:"ListsNumberofSavedItems",event348:"ListsEmptyRecentSearches",event349:"ListsNumberofRecentSearches",event352:"AppSearchResultsLXScroll",event353:"AppInfositeLXDateChange",event354:"TimedifferenceUserteam",event355:"InfositeHotelLXOffers",event356:"ShortlistSaveAttempt",purchase:"Purchase",event370:"HotelFeeL26Breakout",event371:"HotelFeeProperty",event372:"HotelFeeResort",event373:"HotelFeePerPersonPerNight",event374:"HotelFeeGroupedMandatory",event375:"HotelFeeOther",event383:"SearchPinnedHotelViewer",event390:"SearchResultLXHasReviews",event391:"SearchResultsLXNoReviews",event365:"PriceChangeTotalDollarDifference",event377:"PriceChangeFltBaseFareDifference",event378:"PriceChangeFltBaseFareChangePercent",event379:"PriceChangeFltTaxDifference",event380:"PriceChangeFltTaxChangePercent",event381:"PriceChangeFltFeeDifference",event382:"PriceChangeFltFeeChangePercent",event385:"PriceChangeFltDollarDifference",event386:"PriceChangeHotDollarDifference",event392:"PriceChangeHotBaseFareDifference",event393:"PriceChangeHotBaseFareChangePercent",event394:"PriceChangeHotTaxDifference",event395:"PriceChangeHotTaxChangePercent",event396:"PriceChangeHotFeeDifference",event397:"PriceChangeHotFeeChangePercent",event387:"PriceChangeCarDollarDifference",event408:"PriceChangeLXDollarDifference",event406:"SLPaffHeroImageFallback",event407:"HotelNumberOfSoldOut",event409:"CheaperAlternativeDates",event418:"HotelNumberPerPage",event417:"HotelNumberofUnpriced",event426:"SLPaffFallBackImageUsed",event428:"SLPaffNumFallBackImages",event429:"SLPaffNumTotalImages",event430:"LX3PIInventory",event437:"HotelLargePartySearch",event439:"HotelLargePartySearchSymmetric",event440:"NoCCEnabledHotelSearch",event441:"NoCCEnabledHotelInfositeView",event442:"NoCCEnabledHotelCheckoutStart",event443:"NoCCEnabledHotelPurchaseConfirmation",event445:"GPSSearchDestinationInteract",event446:"GSPSearchDestinationScrolled",event447:"HotelMultiSAProperty",event455:"SearchResultsThirdPartyPackage",event465:"CheckoutConfirmationFlightSingleSplitTicket"},v=function(){function e(){a(this,e)}return r(e,[{key:"getUtag",value:function(){s("dctk.tealium.getUtag")}}]),e}(),c=function(){function e(){a(this,e),this.tealiumProxy=new v,this.isCompatibilityLayer=!0}return r(e,[{key:"onReady",value:function(e){e()}},{key:"trackEvent",value:function(e,t,n,r){if((e=function(e,t,n,r){if("string"==typeof e){var a=e;e={type:a}}t&&(e.name=t);n&&(e.trackVars=n);r&&(e.trackEvents=r);!e.rfrr&&e.trackVars&&e.trackVars.prop16&&e.trackVars.eVar28&&e.trackVars.prop16===e.trackVars.eVar28&&(e.rfrr=e.trackVars.prop16,delete e.trackVars.prop16,delete e.trackVars.eVar28);return e}(e,t,n,r)).trackVars&&Object.keys(e.trackVars).length>0&&!e.microMessages)throw new Error("Add params.microMessages in addition to params.trackVars "+e.trackVars);if(!e.rfrr)throw new Error("params.rfrr is required");e.name||(e.name=e.rfrr),e.type||(e.type="o"),null==e.isUserBased||e.isUserBased||(e.name="ape:"+e.name);var a=void 0;switch(e.type){case"o":a="click";break;case"e":a="exit";break;case"i":a="impression";break;default:a=null}var i=[];return i.push({schemaName:"referrer",messageContent:{referrerId:e.rfrr,linkName:e.name,eventType:a}}),e.microMessages&&(i=i.concat(e.microMessages)),e.trackEvents&&(i=i.concat(function(e){var t=/([^,=]+)=?([^,]*)/g,n=[],r=void 0;for(;r=t.exec(e);){var a={name:u(r[1])};if(r[2]){var i=parseFloat(r[2]);isNaN(i)||(a.value=i)}n.push({schemaName:"events",messageContent:a})}return n}(e.trackEvents))),l().trackEvent(i)}},{key:"trackAction",value:function(e,t,n,r){return this.trackEvent({name:"RFRR Action Link",rfrr:e,trackVars:n,trackEvents:r})}},{key:"trackNextPage",value:function(e,t,n,r){return this.trackEvent({name:"RFRR Next Page Link",rfrr:e,trackVars:n,trackEvents:r})}},{key:"trackExit",value:function(e,t,n,r){return this.trackEvent({type:"e",name:"RFRR Exit Link",rfrr:e,trackVars:n,trackEvents:r})}},{key:"trackImpression",value:function(e,t,n){return this.trackEvent({type:"i",isUserBased:!1,rfrr:e,trackVars:t,trackEvents:n})}},{key:"evaluateExperiment",value:function(e){p("/api/bucketing/v1/evaluateExperiments",e)}},{key:"evaluateExperimentAndLog",value:function(e){p("/api/bucketing/v1/evaluateExperimentsAndLog",e)}},{key:"logExperiments",value:function(e){this.evaluateExperimentAndLog(e)}},{key:"logExperiment",value:function(e){this.evaluateExperimentAndLog(e)}},{key:"addExperiments",value:function(){s("dctk.addExperiments")}},{key:"track",value:function(){s("dctk.track")}},{key:"initOmniture",value:function(){s("dctk.initOmniture")}},{key:"setupOmniture",value:function(){s("dctk.setupOmniture")}},{key:"clearOmnitureObj",value:function(){s("dctk.clearOmnitureObj")}},{key:"s_exp_trackClick",value:function(){s("dctk.s_exp_trackClick")}},{key:"trackHotelPos",value:function(){s("dctk.trackHotelPos")}},{key:"verifyExposedExperiments",value:function(){s("dctk.verifyExposedExperiments")}},{key:"logging",get:function(){return l().getClientLog()}},{key:"loggingAdapter",get:function(){return this.logging}},{key:"tealium",get:function(){return this.tealiumProxy}},{key:"enabled",get:function(){return!0}},{key:"omtr",get:function(){return s("dctk.omtr"),{}}},{key:"experimentsExposed",get:function(){return s("dctk.experimentsExposed"),""}}]),e}();function s(e){var t=new Error(e+" not supported by DCTK compatibility layer");l().getClientLog().logError(t)}function l(){var e=i.getInstance();if(!e)throw new Error("Race condition: PlatformAnalytics instance has not yet been created");return e}function u(e){return o[e]?o[e]:e}function p(e,t){var n=void 0;n=t.xmlHttpRequest?t.xmlHttpRequest:new XMLHttpRequest,t.callback&&(n.onload=function(){n.status>=200&&n.status<300?t.callback(function(e){var t={id:void 0,value:0,experiments:[]};e.message&&(t.error=h(e.message));if(e.evaluatedExperiments&&(t.experiments=e.evaluatedExperiments,e.evaluatedExperiments.length>0)){var n=e.evaluatedExperiments[0];n.message&&(t.error=h(n.message)),t.id=n.id,t.value=n.value}return t}(JSON.parse(n.responseText))):t.callback(g("Non-2xx response"))},n.onerror=function(){return t.callback(g("Connection error"))},n.ontimeout=function(){return t.callback(g("Timeout"))}),n.open("POST",e),n.setRequestHeader("Content-Type","application/json"),n.send(function(e){var t={verbose:!0};e.id&&(e.id instanceof Array?t.id=e.id:t.id=[e.id]);e.name&&(e.name instanceof Array?t.name=e.name:t.name=[e.name]);e.guid?t.guid=e.guid:t.guid=d(/DUAID=([^;]+)/);e.tpid?t.tpid=e.tpid:t.tpid=Number(d(/tpid=v\.1,([^;]+)/));e.eapid?t.eapid=e.eapid:t.eapid=Number(d(/iEAPID=([^,^;]+)/));e.pageName?t.pageName=e.pageName:t.pageName=l()._ctx.pageName;var n=function(){if(document&&document.cookie){var e=/abov=([^;]+)/.exec(decodeURIComponent(document.cookie));if(e)return e[1]}return""}();""!==n&&(t.overrides=n);return JSON.stringify(t)}(t))}function d(e){if(document&&null!=document.cookie){var t=e.exec(decodeURIComponent(document.cookie));if(t)return t[1];throw new Error(e+" not found in cookies")}return""}function h(e){var t=e.id;return e.description&&(t+=" ("+e.description+")"),new Error(t)}function g(e){return{error:e,value:0}}e.exports=new c}])});
//# sourceMappingURL=dctk-compatibility-amd.js.map