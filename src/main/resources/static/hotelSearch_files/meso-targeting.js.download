!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=137)}({13:function(e,t,r){"use strict";var n=r(15);let o;o={environmentName:"Production",environmentShort:"PROD",dfp:{network:"23171577"},adsense:{testenv:"off"},uciservice:"https://www.uciservice.com",hooklogic:"https://travelads.hlserve.com",lshopsearch:"https://lshop-search-service.us-west-2.prod.expedia.com",proxy:"https://www.uciservice.com/md/api/v1/proxy",deeplink:"https://www.uciservice.com/deeplink",performance:{enabled:!1,randomIntMax:100,collectorWebUrl:"https://collector.prod.expedia.com/creativePerformance.json?stream=true&persist=true"}};const i=Object(n.a)({appName:"ads-templates",dfp:{gpt:"https://www.googletagservices.com/tag/js/gpt.js",network:"11850712",surl:"https://pubads.g.doubleclick.net/gampad/adx",gptlight:"https://securepubads.g.doubleclick.net/static/glade.js"},abacus:{endpoint:"/api/bucketing/v1"},adsense:{testenv:"on"},meso:{storage:{targeting:"com.expedia.meso.targeting"}},uciservice:"https://adtargeting-service.int.expedia.com",hooklogic:"https://dev2.travelhook.com/",lshopsearch:"https://lshop-search-service.us-west-2.test.expedia.com",proxy:"https://ads-delivery-service.us-west-2.test.expedia.com/api/v1/proxy",deeplink:"https://deep-link-service.us-west-2.test.expedia.com",others:{hotelLinkDirect:{holdoutPercentage:20}},performance:{enabled:!0,randomIntMax:5,collectorWebUrl:"https://collector.test.expedia.com/creativePerformance.json?stream=true&persist=true"}},o);t.a=i},137:function(e,t,r){"use strict";r.r(t);var n=r(42),o=r(13),i=r(24),a=r(16),c=r(25),s=r.n(c),u=r(14),d=r(19),f=r(20);const{promiseFetch:l}=i.a,{getGuid:p}=a.a;let m={};window&&window.meso&&window.meso.initialize&&"function"==typeof window.meso.initialize.observe&&window.meso.initialize.observe("adinfo",()=>!0,e=>{m=Object.assign({},e)});var g=(e={})=>{const t=Object.assign({siteId:m.siteId||"",userId:p(),_:Date.now()},e),r=s.a.stringify(t),n=`${o.a.uciservice}/adinfo?${r}`;return f.a.clearAndMark(u.d),l(n,{credentials:"include",mode:"cors"}).then(e=>{if(e&&e.errors&&e.errors.length>0)throw new Error(`Could not retrieve targeting information from ${n}`);f.a.clearAndMark(u.c),f.a.clearAndMeasure(u.b,u.d,u.c);const t=Object(d.h)(u.b);return t&&Object(d.a)({fetchTargeting:t}),e.json()})},w=r(6),y=r(17);let h,v={},b={},E=null,j=0,x=0;const k=()=>Promise.resolve((()=>{let e=window&&window.localStorage&&window.localStorage.getItem(o.a.meso.storage.targeting);try{e=JSON.parse(e)}catch(t){w.a.error("Error reading targeting from local storage",t),e={}}return e})()),S=()=>Promise.all([Promise.resolve(v),k()]).then(e=>Object.assign({},...e)),O=e=>{v=e,(e=>{window.localStorage&&window.localStorage.setItem(o.a.meso.storage.targeting,JSON.stringify(e))})(e)},T=e=>!0===e?"1":!1===e?"0":Array.isArray(e)?String(e.map(e=>T(e))):String(e),A=e=>{document.dispatchEvent(new CustomEvent("MesoTargeting",{detail:{type:"update",targeting:e,adinfoLastUpdated:j,targetingLastUpdated:x}}))},M=(e={})=>{const t=e.adinfo&&e.adinfo.dest;(null===E||t&&t!==h)&&(h=t,E=((e={})=>g(e).then(e=>(j=Date.now(),e&&e.targeting||{})).catch(()=>{}))(e.adinfo));const r=[S(),E,Promise.resolve(e.targeting||{})];Promise.all(r).then(e=>Object.assign({},...e)).then(e=>(e=>(Object.keys(e).forEach(t=>{e[t]=T(e[t])}),e))(e)).then(e=>{(e=>{for(const t in e)if(e[t]!==v[t])return!0;return!1})(e)&&(x=Date.now(),O(e),A(e))}).catch(e=>{w.a.error("Error loading targeting",e)})},C=r.n(y)()(()=>{M(b),b={}},0,{leading:!1,trailing:!0}),P=(e={})=>{b=Object.assign(b,e),C()};document&&document.addEventListener("MesoTargeting",e=>{"register"===(e&&e.detail&&e.detail.type)&&S().then(e=>{A(e)})}),S().then(e=>{A(e)}),window&&(window.meso=window.meso||{},window.meso.targeting=window.meso.targeting||[],window.meso.targeting.isEventQueue||(window.meso.targeting=Object(n.a)(P,window.meso.targeting)))},14:function(e,t,r){"use strict";r.d(t,"f",function(){return l}),r.d(t,"e",function(){return p}),r.d(t,"d",function(){return m}),r.d(t,"c",function(){return g}),r.d(t,"b",function(){return w}),r.d(t,"a",function(){return y}),r.d(t,"h",function(){return s}),r.d(t,"g",function(){return u}),r.d(t,"j",function(){return d}),r.d(t,"i",function(){return f});const n={connectEnd:!0,connectStart:!0,decodedBodySize:!0,domComplete:!0,domContentLoadedEventEnd:!0,domContentLoadedEventStart:!0,domInteractive:!0,domainLookupEnd:!1,domainLookupStart:!1,duration:!0,encodedBodySize:!0,entryType:!0,fetchStart:!0,initiatorType:!0,loadEventEnd:!0,loadEventStart:!0,name:!0,nextHopProtocol:!1,redirectCount:!1,redirectEnd:!1,redirectStart:!1,requestStart:!0,responseEnd:!0,responseStart:!0,secureConnectionStart:!0,startTime:!0,transferSize:!0,type:!0,unloadEventEnd:!0,unloadEventStart:!0,workerStart:!1},o={connectEnd:!0,connectStart:!0,domComplete:!0,domContentLoadedEventEnd:!0,domContentLoadedEventStart:!0,domInteractive:!0,domLoading:!1,domainLookupEnd:!1,domainLookupStart:!1,fetchStart:!0,loadEventEnd:!0,loadEventStart:!0,navigationStart:!0,redirectEnd:!1,redirectStart:!1,requestStart:!0,responseEnd:!0,responseStart:!0,secureConnectionStart:!0,unloadEventEnd:!0,unloadEventStart:!0},i={connectEnd:!0,connectStart:!0,decodedBodySize:!0,domainLookupEnd:!1,domainLookupStart:!1,duration:!0,encodedBodySize:!0,entryType:!0,fetchStart:!0,initiatorType:!0,name:!0,nextHopProtocol:!1,redirectEnd:!1,redirectStart:!1,requestStart:!0,responseEnd:!0,responseStart:!0,secureConnectionStart:!0,startTime:!0,transferSize:!0,workerStart:!1},a={duration:!0,entryType:!0,name:!0,startTime:!0},c=e=>{const t=[];return Object.keys(e).forEach(r=>{e.hasOwnProperty(r)&&!0===e[r]&&t.push(r)}),t},s=()=>c(n),u=()=>c(o),d=()=>c(i),f=()=>c(a),l="Page Usable",p="Page Change",m="adinfo.fetchTargeting.start",g="adinfo.fetchTargeting.end",w="adinfo.fetchTargeting",y="ads-loader.js"},15:function(e,t,r){"use strict";var n=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===o}(e)}(e)};var o="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function i(e,t){return!1!==t.clone&&t.isMergeableObject(e)?c(function(e){return Array.isArray(e)?[]:{}}(e),e,t):e}function a(e,t,r){return e.concat(t).map(function(e){return i(e,r)})}function c(e,t,r){(r=r||{}).arrayMerge=r.arrayMerge||a,r.isMergeableObject=r.isMergeableObject||n;var o=Array.isArray(t);return o===Array.isArray(e)?o?r.arrayMerge(e,t,r):function(e,t,r){var n={};return r.isMergeableObject(e)&&Object.keys(e).forEach(function(t){n[t]=i(e[t],r)}),Object.keys(t).forEach(function(o){r.isMergeableObject(t[o])&&e[o]?n[o]=c(e[o],t[o],r):n[o]=i(t[o],r)}),n}(e,t,r):i(t,r)}c.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(e,r){return c(e,r,t)},{})};var s=c;t.a=s},16:function(e,t,r){"use strict";const n=e=>{const t=document.cookie.match(`(^|;) ?${e}=([^;]*)(;|$)`);return t?t[2]:null},o=(e,t,r=30)=>{const n=new Date;n.setTime(n.getTime()+864e5*r),document.cookie=`${e}=${t};path=/;expires=${n.toGMTString()};`},i=()=>n("DUAID");t.a={getGuid:i,getCookie:n,setCookie:o,deleteCookie:e=>{o(e,"",-1)},parseSiteInfo:()=>{return{user:i(),guid:i(),site:1,tpid:(()=>{const e=n("tpid");return null!==e&&e.match(/^.*,[0-9]+$/)?e.split(",")[1]:null})(),eapid:(()=>{const e=n("iEAPID");return null!==e&&e.match(/^[0-9]+$/)?e:null})(),abov:n("abov")}},parseOverrideExperiments:()=>{try{const e={},t=n("meov");return(null===t?[]:t.split(",")).forEach(t=>{const r=t.split(".");e[r[0]]=r[1]}),e}catch(e){return{}}}}},17:function(e,t,r){(function(t){var r="Expected a function",n=NaN,o="[object Symbol]",i=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,s=/^0o[0-7]+$/i,u=parseInt,d="object"==typeof t&&t&&t.Object===Object&&t,f="object"==typeof self&&self&&self.Object===Object&&self,l=d||f||Function("return this")(),p=Object.prototype.toString,m=Math.max,g=Math.min,w=function(){return l.Date.now()};function y(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function h(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&p.call(e)==o}(e))return n;if(y(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=y(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(i,"");var r=c.test(e);return r||s.test(e)?u(e.slice(2),r?2:8):a.test(e)?n:+e}e.exports=function(e,t,n){var o,i,a,c,s,u,d=0,f=!1,l=!1,p=!0;if("function"!=typeof e)throw new TypeError(r);function v(t){var r=o,n=i;return o=i=void 0,d=t,c=e.apply(n,r)}function b(e){var r=e-u;return void 0===u||r>=t||r<0||l&&e-d>=a}function E(){var e=w();if(b(e))return j(e);s=setTimeout(E,function(e){var r=t-(e-u);return l?g(r,a-(e-d)):r}(e))}function j(e){return s=void 0,p&&o?v(e):(o=i=void 0,c)}function x(){var e=w(),r=b(e);if(o=arguments,i=this,u=e,r){if(void 0===s)return function(e){return d=e,s=setTimeout(E,t),f?v(e):c}(u);if(l)return s=setTimeout(E,t),v(u)}return void 0===s&&(s=setTimeout(E,t)),c}return t=h(t)||0,y(n)&&(f=!!n.leading,a=(l="maxWait"in n)?m(h(n.maxWait)||0,t):a,p="trailing"in n?!!n.trailing:p),x.cancel=function(){void 0!==s&&clearTimeout(s),d=0,o=u=i=s=void 0},x.flush=function(){return void 0===s?c:j(w())},x}}).call(this,r(27))},19:function(e,t,r){"use strict";r.d(t,"f",function(){return c}),r.d(t,"e",function(){return s}),r.d(t,"d",function(){return u}),r.d(t,"c",function(){return d}),r.d(t,"i",function(){return f}),r.d(t,"b",function(){return l}),r.d(t,"h",function(){return g}),r.d(t,"g",function(){return w}),r.d(t,"a",function(){return y});var n=r(14),o=r(20),i=r(16);const a=(e,t)=>{if(!e||e.length<1||!t)return null;const r={};return e.forEach(e=>{void 0!==t[e]&&(r[e]=t[e])}),r.name&&(r.name=(e=>e&&(e.startsWith("https://")||e.startsWith("https://"))&&e.indexOf("?")>-1?e.substring(0,e.indexOf("?")):e)(r.name)),r},c=e=>{if(!e)return null;const t=n.h();return a(t,e)},s=()=>{const e=o.a.getEntriesByType("navigation")[0];return c(e)},u=e=>{if(!e)return null;const t=n.g();return a(t,e)},d=()=>{const e=o.a.getDeprecatedTiming();return u(e)},f=e=>{if(!e||e.length<1)return null;const t=[],r=n.j();return e.forEach(e=>{t.push(a(r,e))}),t},l=e=>{if(!e||e.length<1)return null;const t=o.a.getEntriesByType("resource");if(!t||t.length<1)return null;const r=e.map(e=>e.src),i=t.filter(e=>r.includes(e.name)||-1!==e.name.indexOf(n.a));return f(i)},p=(e,t)=>{if(!e||!t)return null;const r=o.a.getEntriesByName(e,t)[0];if(!r)return null;const i=n.i();return a(i,r)},m=e=>p(e,"mark"),g=e=>p(e,"measure"),w=()=>({guid:i.a.getGuid(),pageChange:m(n.e),pageUsable:m(n.f)}),y=e=>{"object"!=typeof e||Object.keys(e).length<1||(window.meso=window.meso||{},window.meso.performance=window.meso.performance||{},Object.keys(e).forEach(t=>{window.meso.performance[t]=e[t]}))}},20:function(e,t,r){"use strict";var n=r(6);const o=e=>{try{void 0!==window.performance&&"function"==typeof window.performance.mark&&window.performance.mark(e)}catch(e){n.a.error(e,{adAction:"performance.mark",message:"Error creating mark"})}},i=e=>{try{void 0!==window.performance&&"function"==typeof window.performance.clearMarks&&window.performance.clearMarks(e)}catch(e){n.a.error(e,{message:"Error clearing marks",adAction:"performance.clearMarks"})}},a=(e,t,r)=>{try{void 0!==window.performance&&"function"==typeof window.performance.measure&&window.performance.measure(e,t,r)}catch(e){n.a.error(e,{message:"Error creating measure",adAction:"performance.measure"})}},c=e=>{try{void 0!==window.performance&&"function"==typeof window.performance.clearMeasures&&window.performance.clearMeasures(e)}catch(e){n.a.error(e,{message:"Error clearing measures",adAction:"performance.clearMeasures"})}},s=(e,t)=>{try{if(void 0!==window.performance&&"function"==typeof window.performance.getEntriesByName)return window.performance.getEntriesByName(e,t)}catch(e){n.a.error(e,{message:"Error getting entries by name",adAction:"performance.getEntriesByName"})}return[]};t.a={mark:o,clearMarks:i,clearAndMark:e=>{i(e),o(e)},measure:a,clearMeasures:c,clearAndMeasure:(e,t,r)=>{c(e),a(e,t,r)},getEntriesByName:s,getDuration:e=>{const t=s(e,"measure");let r;return t&&t.length>0&&(r=t[0])&&r.duration?r.duration:null},getEntriesByType:e=>{try{if(void 0!==window.performance&&"function"==typeof window.performance.getEntriesByType)return window.performance.getEntriesByType(e)}catch(e){n.a.error(e,{message:"Error getting entries by type",adAction:"performance.getEntriesByType"})}return[]},getDeprecatedTiming:()=>{try{if(void 0!==window.performance&&void 0!==window.performance.timing)return window.performance.timing}catch(e){n.a.error(e,{message:"Error getting deprecated timing",adAction:"performance.getDeprecatedTiming"})}return null}}},24:function(e,t,r){"use strict";t.a={promiseFetch:(e,t={})=>{const r=t&&t.timeout||5e3;return Promise.race([fetch(e,t),new Promise((e,t)=>setTimeout(()=>t(new Error("Timeout")),r))])},sanitizeProtocol:e=>e.replace(/(^\w+:|^)\/\//,"//")}},25:function(e,t,r){"use strict";const n=r(31),o=r(32),i=r(33);function a(e,t){return t.encode?t.strict?n(e):encodeURIComponent(e):e}function c(e,t){return t.decode?o(e):e}function s(e){const t=e.indexOf("?");return-1===t?"":e.slice(t+1)}function u(e,t){const r=function(e){let t;switch(e.arrayFormat){case"index":return(e,r,n)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===n[e]&&(n[e]={}),n[e][t[1]]=r):n[e]=r};case"bracket":return(e,r,n)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==n[e]?n[e]=[].concat(n[e],r):n[e]=[r]:n[e]=r};case"comma":return(e,t,r)=>{const n="string"==typeof t&&t.split("").indexOf(",")>-1?t.split(","):t;r[e]=n};default:return(e,t,r)=>{void 0!==r[e]?r[e]=[].concat(r[e],t):r[e]=t}}}(t=Object.assign({decode:!0,arrayFormat:"none"},t)),n=Object.create(null);if("string"!=typeof e)return n;if(!(e=e.trim().replace(/^[?#&]/,"")))return n;for(const o of e.split("&")){let[e,a]=i(o.replace(/\+/g," "),"=");a=void 0===a?null:c(a,t),r(c(e,t),a,n)}return Object.keys(n).sort().reduce((e,t)=>{const r=n[t];return Boolean(r)&&"object"==typeof r&&!Array.isArray(r)?e[t]=function e(t){return Array.isArray(t)?t.sort():"object"==typeof t?e(Object.keys(t)).sort((e,t)=>Number(e)-Number(t)).map(e=>t[e]):t}(r):e[t]=r,e},Object.create(null))}t.extract=s,t.parse=u,t.stringify=((e,t)=>{if(!e)return"";const r=function(e){switch(e.arrayFormat){case"index":return t=>(r,n)=>{const o=r.length;return void 0===n?r:null===n?[...r,[a(t,e),"[",o,"]"].join("")]:[...r,[a(t,e),"[",a(o,e),"]=",a(n,e)].join("")]};case"bracket":return t=>(r,n)=>void 0===n?r:null===n?[...r,[a(t,e),"[]"].join("")]:[...r,[a(t,e),"[]=",a(n,e)].join("")];case"comma":return t=>(r,n,o)=>n?0===o?[[a(t,e),"=",a(n,e)].join("")]:[[r,a(n,e)].join(",")]:r;default:return t=>(r,n)=>void 0===n?r:null===n?[...r,a(t,e)]:[...r,[a(t,e),"=",a(n,e)].join("")]}}(t=Object.assign({encode:!0,strict:!0,arrayFormat:"none"},t)),n=Object.keys(e);return!1!==t.sort&&n.sort(t.sort),n.map(n=>{const o=e[n];return void 0===o?"":null===o?a(n,t):Array.isArray(o)?o.reduce(r(n),[]).join("&"):a(n,t)+"="+a(o,t)}).filter(e=>e.length>0).join("&")}),t.parseUrl=((e,t)=>{const r=e.indexOf("#");return-1!==r&&(e=e.slice(0,r)),{url:e.split("?")[0]||"",query:u(s(e),t)}})},27:function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},31:function(e,t,r){"use strict";e.exports=(e=>encodeURIComponent(e).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`))},32:function(e,t,r){"use strict";var n=new RegExp("%[a-f0-9]{2}","gi"),o=new RegExp("(%[a-f0-9]{2})+","gi");function i(e,t){try{return decodeURIComponent(e.join(""))}catch(e){}if(1===e.length)return e;t=t||1;var r=e.slice(0,t),n=e.slice(t);return Array.prototype.concat.call([],i(r),i(n))}function a(e){try{return decodeURIComponent(e)}catch(o){for(var t=e.match(n),r=1;r<t.length;r++)t=(e=i(t,r).join("")).match(n);return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},r=o.exec(e);r;){try{t[r[0]]=decodeURIComponent(r[0])}catch(e){var n=a(r[0]);n!==r[0]&&(t[r[0]]=n)}r=o.exec(e)}t["%C2"]="�";for(var i=Object.keys(t),c=0;c<i.length;c++){var s=i[c];e=e.replace(new RegExp(s,"g"),t[s])}return e}(e)}}},33:function(e,t,r){"use strict";e.exports=((e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const r=e.indexOf(t);return-1===r?[e]:[e.slice(0,r),e.slice(r+t.length)]})},42:function(e,t,r){"use strict";r.d(t,"a",function(){return n});const n=(e,t=[],r={defer:!1})=>{if(t&&t.isEventQueue)throw new Error("Meso event queue is already initialized.");const n=new class{constructor(e,t=[],r={}){if(!Array.isArray(t))throw new Error("Meso event queue requires an array.");this._callback=e,this._executedEvents=[],this._unExecutedEvents=t,this._opts=r,this.isEventQueue=!0}push(...e){this._opts.defer?setTimeout(()=>{this._executedEvents.push(...e),this._callback(...e)},0):(this._executedEvents.push(...e),this._callback(...e))}executeQueue(e=this._unExecutedEvents.length){for(;this._unExecutedEvents.length>0&&e>0;)this.push(this._unExecutedEvents.pop()),e-=1}get executedEvents(){return this._executedEvents}get unExecutedEvents(){return this._unExecutedEvents}}(e,t,r);return n.executeQueue(r.limit),n}},6:function(e,t,r){"use strict";window.meso=window.meso||{},window.meso.logging=window.meso.logging||[];t.a={info:(e,t)=>{window.meso.logging.push({type:"info",message:e,extra:t})},warn:(e,t)=>{window.meso.logging.push({type:"warn",message:e,extra:t})},error:(e,t)=>{window.meso.logging.push({type:"error",exception:e,extra:t})},trackEvent:(e,t,r)=>{window.meso.logging.push({type:"track-event",name:e,vars:t,events:r})},trackAction:(e,t,r)=>{window.meso.logging.push({type:"track-action",name:e,vars:t,events:r})}}}});
//# sourceMappingURL=meso-targeting.js.map