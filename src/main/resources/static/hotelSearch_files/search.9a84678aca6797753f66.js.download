(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"6nn/":function(e,t,r){r.r(t),r.d(t,"Playback",function(){return v}),r.d(t,"ChangeSearchForm",function(){return b});var a,n=r("GiK3"),i=r("zBEt"),o=r("OSg3"),s=r("B1JX"),l=r("zqAW"),c=r("AQYs"),p=r("vc39"),u=r("2eDV"),h=r("y5TW"),d=r("CYWc"),m=r("KaGk"),f=(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),y=function(e,t,r,a){var n,i=arguments.length,o=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,a);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(i<3?n(o):i>3?n(t,r,o):n(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},g=Object(l.ClickTracker)(s.Link),k=Object(l.ClickTracker)(d.UitkLinkButton),v=function(e){function t(t){var r=e.call(this,t)||this;r.controlAfterSubmit=r.controlAfterSubmit.bind(r),r.afterSubmit=r.afterSubmit.bind(r),r.handleExpand=r.handleExpand.bind(r),r.onUpdateResults=r.onUpdateResults.bind(r),r.fetchDatePickerRates=r.fetchDatePickerRates.bind(r);var a=t.searchResults&&t.searchResults.searchAndFilterDisplayOptions&&t.searchResults.searchAndFilterDisplayOptions.searchFormExpanded;return r.state={jsEnabled:!1,searchFormExpanded:a},r}return f(t,e),t.prototype.componentDidMount=function(){this.setState({jsEnabled:!0})},Object.defineProperty(t.prototype,"searchDateRange",{get:function(){var e=this.props.searchResults&&this.props.searchResults.searchCriteria,t=this.props.l10n;return e&&e.startDate&&e.endDate?t.formatDateString(e.startDate,{skeleton:"MMMd"})+" â€“ "+t.formatDateString(e.endDate,{skeleton:"MMMd"}):""},enumerable:!0,configurable:!0}),t.prototype.controlAfterSubmit=function(){this.setState({searchFormExpanded:!1})},t.prototype.afterSubmit=function(){this.setState({searchFormExpanded:!0})},t.prototype.onUpdateResults=function(){this.props.searchResults.clearDefaultRequestFields(),this.props.searchResults.shouldFetch=!0},t.prototype.handleExpand=function(){var e=this;this.setState({searchFormExpanded:!this.state.searchFormExpanded},function(){e.sendTracking(e.state.searchFormExpanded?"ChangeSearch":"CloseForm")})},t.prototype.sendTracking=function(e){var t=this.props.analytics;t&&"function"==typeof t.trackEvent&&t.trackEvent(":"+e,"Edit search form",t.omnitureData,null)},t.prototype.fetchDatePickerRates=function(){var e=this.props,t=e.searchResults,r=e.context,a=e.l10n,n=t.searchCriteria,i=n.startDate,o=n.endDate,s=n.adults,l=n.children,c=n.regionId;return t.fetchHSRRates(a,i,o,s,l,c,r)},t.prototype.render=function(){var e=this.state.jsEnabled,t=this.props,r=t.searchResults,a=t.l10n,i=r.searchCriteria,o=i&&i.destination,s=r&&r.isLoading,l=r&&r.searchedDestination,u=s?o:o||l||n.createElement(c.LocalizedText,{message:"hotels.searchResults.playback.destinationMissing.text"}),d=i&&i.guestCount,f=this.fetchDatePickerRates,y=n.createElement("div",{className:"playback__subheading"},n.createElement("span",{className:"playback__date-range"},this.searchDateRange),d>0&&n.createElement("span",{className:"playback__guest-count"},n.createElement(c.LocalizedText,{message:1===d?"hotels.searchResults.singleGuest":"hotels.searchResults.numberOfGuests",data:[d]}))),v=n.createElement(n.Fragment,null,n.createElement(h.UitkIcon,{className:"playback__icon",description:a.formatText("hotels.searchResults.backToSearchResults.a11yLabel"),id:"playback-icon",name:"search",title:a.formatText("hotels.searchResults.title")}),n.createElement("div",{className:"playback__title"},n.createElement("h1",{className:"playback__heading truncate","data-stid":"content-location-title"},u),y)),_=n.createElement(g,{className:"playback__section playback__action all-l-margin-three",linkName:"Edit search form",rfrr:":ChangeSearch",to:"/Hotels"},v),E=n.createElement("div",{onClick:this.handleExpand,className:"playback__section playback__action form_expander all-l-margin-three"},v),S=n.createElement("div",{className:"uitk-grid all-cell-1-6 all-grid-align-center"},n.createElement("div",{className:"uitk-cell all-r-padding-two all-l-padding-two all-b-padding-two all-t-padding-two"},n.createElement(k,{linkName:"Close search form",onClick:this.handleExpand,align:m.UitkLinkAlign.CENTER},n.createElement(c.LocalizedText,{message:"hotels.searchResults.close.text"})))),O={onUpdateResults:this.onUpdateResults,afterSubmit:this.controlAfterSubmit},w={onUpdateResults:this.onUpdateResults,afterSubmit:this.afterSubmit},M=n.createElement(b,{searchResults:r,control:O,variant:w,fetchDatePickerRates:f});return n.createElement(p.Viewport,null,n.createElement(p.ViewSmall,null,n.createElement("div",{className:"playback","data-stid":"section-hotel-search"},e?this.state.searchFormExpanded?M:E:_,this.state.searchFormExpanded&&S)),n.createElement(p.ViewMedium,null,M))},t=y([c.withLocalization,Object(o.inject)("analytics","context","routeStore","searchResults","searchCriteria"),o.observer],t)}(n.Component),b=function(e){var t=e.searchResults,r=(e.control,e.variant),a=e.fetchDatePickerRates,o=t&&t.searchCriteria,s=t&&t.sortAndFilter,l=s&&s.options,c=s&&s.defaults,p=["destination","dateRange","rooms"],h=["startDate","endDate"],d=Object.keys(p).map(function(e){var t;return(t={})[e]="uitk-cell all-y-gutter-two m-cell-1-1 l-cell-1-3 xl-cell-1-3",t});return n.createElement("div",{className:"all-r-padding-two all-l-padding-two all-b-padding-two all-t-padding-two","data-stid":"section-hotel-search"},n.createElement(i.AbacusExperiment,{name:"PWA_HSR_Rate_Calendar_Helper"},n.createElement(i.AbacusControl,null,n.createElement(u.SearchForm,{className:"uitk-grid l-x-gutter-three all-x-gutter-two all-y-gutter-two",wrapperClasses:d,model:o,onUpdateResults:r.onUpdateResults,sortAndFilterOptions:l,sortAndFilterDefaults:c,provideDefaultSubmitButton:!0,displayFields:p,ignoreFields:h,afterSubmit:r.afterSubmit,autoSubmit:!0})),n.createElement(i.AbacusVariant,{bucket:1},n.createElement(u.SearchForm,{className:"uitk-grid l-x-gutter-three all-x-gutter-two all-y-gutter-two",wrapperClasses:d,model:o,onUpdateResults:r.onUpdateResults,sortAndFilterOptions:l,sortAndFilterDefaults:c,provideDefaultSubmitButton:!0,displayFields:p,ignoreFields:h,afterSubmit:r.afterSubmit,autoSubmit:!0,fetchDatePickerRates:a}))))}},"AqV/":function(e,t){e.exports=function(e){function t(r,a,n){this.extend(t,e.maps.OverlayView),this.map_=r,this.markers_=[],this.clusters_=[],this.sizes=[53,56,66,78,90],this.styles_=[],this.ready_=!1;var i=n||{};this.gridSize_=i.gridSize||60,this.minClusterSize_=i.minimumClusterSize||2,this.markerLabel_=i.markerLabel,this.maxZoom_=i.maxZoom||null,this.styles_=i.styles||[],this.zoomOnClick_=!0,null!=i.zoomOnClick&&(this.zoomOnClick_=i.zoomOnClick),this.averageCenter_=!1,null!=i.averageCenter&&(this.averageCenter_=i.averageCenter),this.setupStyles_(),this.setMap(r),this.prevZoom_=this.map_.getZoom();var o=this;e.maps.event.addListener(this.map_,"zoom_changed",function(){var e=o.map_.getZoom(),t=o.map_.minZoom||0,r=Math.min(o.map_.maxZoom||100,o.map_.mapTypes[o.map_.getMapTypeId()].maxZoom);e=Math.min(Math.max(e,t),r),o.prevZoom_!=e&&(o.prevZoom_=e,o.resetViewport())}),e.maps.event.addListener(this.map_,"idle",function(){o.redraw()}),a&&(a.length||Object.keys(a).length)&&this.addMarkers(a,!1)}function r(e){this.markerClusterer_=e,this.map_=e.getMap(),this.gridSize_=e.getGridSize(),this.minClusterSize_=e.getMinClusterSize(),this.averageCenter_=e.isAverageCenter(),this.center_=null,this.markers_=[],this.bounds_=null,this.lowestPrice_=null,this.lowestPriceLabel_="",this.isSoldOut_=!0,this.clusterIcon_=new a(this,e.getStyles(),e.getGridSize())}function a(t,r){t.getMarkerClusterer().extend(a,e.maps.OverlayView),this.styles_=r,this.cluster_=t,this.center_=null,this.map_=t.getMap(),this.div_=null,this.sums_=null,this.visible_=!1,this.setMap(this.map_)}return t.prototype.extend=function(e,t){return function(e){for(var t in e.prototype)this.prototype[t]=e.prototype[t];return this}.apply(e,[t])},t.prototype.onAdd=function(){this.setReady_(!0)},t.prototype.draw=function(){},t.prototype.setupStyles_=function(){if(!this.styles_.length)for(var e,t=0;e=this.sizes[t];t++)this.styles_.push({height:e,width:e})},t.prototype.fitMapToMarkers=function(){for(var t,r=this.getMarkers(),a=new e.maps.LatLngBounds,n=0;t=r[n];n++)a.extend(t.getPosition());this.map_.fitBounds(a)},t.prototype.setStyles=function(e){this.styles_=e},t.prototype.getStyles=function(){return this.styles_},t.prototype.isZoomOnClick=function(){return this.zoomOnClick_},t.prototype.isAverageCenter=function(){return this.averageCenter_},t.prototype.getMarkers=function(){return this.markers_},t.prototype.getTotalMarkers=function(){return this.markers_.length},t.prototype.setMaxZoom=function(e){this.maxZoom_=e},t.prototype.getMaxZoom=function(){return this.maxZoom_},t.prototype.calculator_=function(e,t){for(var r=0,a=e.length,n=a;0!==n;)n=parseInt(n/10,10),r++;return{text:a,index:r=Math.min(r,t)}},t.prototype.setCalculator=function(e){this.calculator_=e},t.prototype.getCalculator=function(){return this.calculator_},t.prototype.addMarkers=function(e,t){if(e.length)for(var r=0;a=e[r];r++)this.pushMarkerTo_(a);else if(Object.keys(e).length)for(var a in e)this.pushMarkerTo_(e[a]);t||this.redraw()},t.prototype.pushMarkerTo_=function(t){if(t.isAdded=!1,t.draggable){var r=this;e.maps.event.addListener(t,"dragend",function(){t.isAdded=!1,r.repaint()})}this.markers_.push(t)},t.prototype.addMarker=function(e,t){this.pushMarkerTo_(e),t||this.redraw()},t.prototype.removeMarker_=function(e){var t=-1;if(this.markers_.indexOf)t=this.markers_.indexOf(e);else for(var r,a=0;r=this.markers_[a];a++)if(r==e){t=a;break}return-1!=t&&(e.setMap(null),this.markers_.splice(t,1),!0)},t.prototype.removeMarker=function(e,t){var r=this.removeMarker_(e);return!(t||!r)&&(this.resetViewport(),this.redraw(),!0)},t.prototype.removeMarkers=function(e,t){for(var r,a=e===this.getMarkers()?e.slice():e,n=!1,i=0;r=a[i];i++){var o=this.removeMarker_(r);n=n||o}if(!t&&n)return this.resetViewport(),this.redraw(),!0},t.prototype.setReady_=function(e){this.ready_||(this.ready_=e,this.createClusters_())},t.prototype.getTotalClusters=function(){return this.clusters_.length},t.prototype.getMap=function(){return this.map_},t.prototype.setMap=function(e){this.map_=e},t.prototype.getGridSize=function(){return this.gridSize_},t.prototype.setGridSize=function(e){this.gridSize_=e},t.prototype.getMinClusterSize=function(){return this.minClusterSize_},t.prototype.setMinClusterSize=function(e){this.minClusterSize_=e},t.prototype.getExtendedBounds=function(t){var r=this.getProjection(),a=new e.maps.LatLng(t.getNorthEast().lat(),t.getNorthEast().lng()),n=new e.maps.LatLng(t.getSouthWest().lat(),t.getSouthWest().lng()),i=r.fromLatLngToDivPixel(a);i.x+=this.gridSize_,i.y-=this.gridSize_;var o=r.fromLatLngToDivPixel(n);o.x-=this.gridSize_,o.y+=this.gridSize_;var s=r.fromDivPixelToLatLng(i),l=r.fromDivPixelToLatLng(o);return t.extend(s),t.extend(l),t},t.prototype.isMarkerInBounds_=function(e,t){return t.contains(e.getPosition())},t.prototype.clearMarkers=function(){this.resetViewport(!0),this.markers_=[]},t.prototype.updateMarker=function(e,t){this.markers_[t].setMap(null),this.markers_[t]=e},t.prototype.resetViewport=function(e){for(var t,r=0;t=this.clusters_[r];r++)t.remove();var a;for(r=0;a=this.markers_[r];r++)a.isAdded=!1,e&&a.setMap(null);this.clusters_=[]},t.prototype.repaint=function(){var e=this.clusters_.slice();this.clusters_.length=0,this.resetViewport(),this.redraw(),window.setTimeout(function(){for(var t,r=0;t=e[r];r++)t.remove()},0)},t.prototype.redraw=function(){this.createClusters_()},t.prototype.distanceBetweenPoints_=function(e,t){if(!e||!t)return 0;var r=(t.lat()-e.lat())*Math.PI/180,a=(t.lng()-e.lng())*Math.PI/180,n=Math.sin(r/2)*Math.sin(r/2)+Math.cos(e.lat()*Math.PI/180)*Math.cos(t.lat()*Math.PI/180)*Math.sin(a/2)*Math.sin(a/2);return 6371*(2*Math.atan2(Math.sqrt(n),Math.sqrt(1-n)))},t.prototype.addToClosestCluster_=function(e){for(var t,a=4e4,n=null,i=(e.getPosition(),0);t=this.clusters_[i];i++){var o=t.getCenter();if(o){var s=this.distanceBetweenPoints_(o,e.getPosition());s<a&&(a=s,n=t)}}n&&n.isMarkerInClusterBounds(e)?n.addMarker(e):((t=new r(this)).addMarker(e),this.clusters_.push(t))},t.prototype.createClusters_=function(){if(this.ready_)for(var t,r=new e.maps.LatLngBounds(this.map_.getBounds().getSouthWest(),this.map_.getBounds().getNorthEast()),a=this.getExtendedBounds(r),n=0;t=this.markers_[n];n++)!t.isAdded&&this.isMarkerInBounds_(t,a)&&this.addToClosestCluster_(t)},r.prototype.isMarkerAlreadyAdded=function(e){if(this.markers_.indexOf)return-1!=this.markers_.indexOf(e);for(var t,r=0;t=this.markers_[r];r++)if(t==e)return!0;return!1},r.prototype.addMarker=function(t){if(this.isMarkerAlreadyAdded(t))return!1;if(this.center_){if(this.averageCenter_){var r=this.markers_.length+1,a=(this.center_.lat()*(r-1)+t.getPosition().lat())/r,n=(this.center_.lng()*(r-1)+t.getPosition().lng())/r;this.center_=new e.maps.LatLng(a,n),this.calculateBounds_()}}else this.center_=t.getPosition(),this.calculateBounds_();t.isAdded=!0,this.markers_.push(t);var i=this.markers_.length;if(i<this.minClusterSize_&&t.getMap()!=this.map_&&t.setMap(this.map_),i==this.minClusterSize_)for(var o=0;o<i;o++)this.markers_[o].setMap(null);if(i>=this.minClusterSize_&&t.setMap(null),!!t.label){var s=parseInt(t.label.text.replace(/\D/g,""),10);Number.isNaN(s)||(!this.lowestPrice_||s<this.lowestPrice_)&&(this.lowestPrice_=s,this.lowestPriceLabel_=t.label.text),this.isSoldOut_&&(this.isSoldOut_=!1)}return this.updateIcon(),!0},r.prototype.getMarkerClusterer=function(){return this.markerClusterer_},r.prototype.getBounds=function(){for(var t,r=new e.maps.LatLngBounds(this.center_,this.center_),a=this.getMarkers(),n=0;t=a[n];n++)r.extend(t.getPosition());return r},r.prototype.remove=function(){this.clusterIcon_.remove(),this.markers_.length=0,delete this.markers_},r.prototype.getSize=function(){return this.markers_.length},r.prototype.getMarkers=function(){return this.markers_},r.prototype.getCenter=function(){return this.center_},r.prototype.calculateBounds_=function(){var t=new e.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(t)},r.prototype.isMarkerInClusterBounds=function(e){return this.bounds_.contains(e.getPosition())},r.prototype.getMap=function(){return this.map_},r.prototype.updateIcon=function(){var e=this.map_.getZoom(),t=this.markerClusterer_.getMaxZoom();if(t&&e>t)for(var r,a=0;r=this.markers_[a];a++)r.setMap(this.map_);else if(this.markers_.length<this.minClusterSize_)this.clusterIcon_.hide();else{var n=this.markerClusterer_.getStyles().length,i=this.markerClusterer_.getCalculator()(this.markers_,n);this.clusterIcon_.setCenter(this.center_),i.text=this.markerClusterer_.markerLabel_(i.text,this.lowestPriceLabel_,this.isSoldOut_),this.clusterIcon_.setSums(i),this.clusterIcon_.show()}},a.prototype.triggerClusterClick=function(){var t=this.cluster_.getMarkerClusterer();e.maps.event.trigger(t,"clusterclick",this.cluster_),t.isZoomOnClick()&&this.map_.fitBounds(this.cluster_.getBounds())},a.prototype.onAdd=function(){if(this.div_=document.createElement("DIV"),this.visible_){var t=["uitk-type-200","map__marker-cluster"];this.cluster_.isSoldOut_&&t.push("map__marker-cluster--sold-out"),this.div_.classList.add.apply(this.div_.classList,t),this.div_.innerHTML=this.sums_.text}var r=this.getPanes();r.overlayMouseTarget.appendChild(this.div_),r.overlayMouseTarget.style.zIndex=200;var a=this;e.maps.event.addDomListener(this.div_,"click",function(){a.triggerClusterClick()})},a.prototype.draw=function(){if(this.visible_){var t=this.cluster_.getMarkerClusterer();e.maps.event.trigger(t,"drawcluster",this.cluster_);var r=this.getProjection().fromLatLngToDivPixel(this.center_);this.div_.style.top=r.y-this.div_.clientHeight+"px",this.div_.style.left=r.x-this.div_.clientWidth/2+"px"}},a.prototype.hide=function(){this.div_&&(this.div_.style.display="none"),this.visible_=!1},a.prototype.show=function(){if(this.div_){this.getPosFromLatLng_(this.center_);this.div_.style.display=""}this.visible_=!0},a.prototype.remove=function(){this.setMap(null)},a.prototype.onRemove=function(){this.div_&&this.div_.parentNode&&(this.hide(),this.div_.parentNode.removeChild(this.div_),this.div_=null)},a.prototype.setSums=function(e){this.sums_=e,this.text_=e.text,this.index_=e.index,this.div_&&(this.div_.innerHTML=this.text_)},a.prototype.setCenter=function(e){this.center_=e},t}},B6gz:function(e,t,r){r.r(t),r.d(t,"Sidebar",function(){return u});var a,n=r("GiK3"),i=r("OSg3"),o=r("uX+Z"),s=r("2eDV"),l=r("AQYs"),c=(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),p=function(e,t,r,a){var n,i=arguments.length,o=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,a);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(i<3?n(o):i>3?n(t,r,o):n(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.prototype.scrollToTop=function(){window.scrollTo(0,0)},t.prototype.render=function(){var e=this.props,t=e.searchResults,r=e.isActive,a=this.props.l10n.formatText,i=t&&t.searchCriteria,l=t&&t.sortAndFilter,c=l&&l.options,p=l&&l.defaults,u=t&&t.searchAndFilterDisplayOptions&&t.searchAndFilterDisplayOptions.filters,h=u&&u.displayFields,d=u&&u.ignoreFields,m=t.map&&t.map.staticMapSrc;return n.createElement("section",{className:"desktop-sidebar"},n.createElement("div",{className:"all-b-padding-six uitk-card-separator-bottom"},n.createElement(o.a,{isActive:r,mapImage:m})),n.createElement("div",{className:"all-t-padding-six"},n.createElement("h3",{className:"is-visually-hidden"},a("hotels.searchResults.filtersDialog.title")),n.createElement(s.SearchForm,{className:"all-b-padding-twelve uitk-dialog__search-form",model:i,sortAndFilterOptions:c,sortAndFilterDefaults:p,provideDefaultSubmitButton:!1,displayFields:h,ignoreFields:d,autoSubmit:!0,afterSubmit:this.scrollToTop,searchable:!0})))},t.defaultProps={isActive:!1,l10n:null},t=p([l.withLocalization,Object(i.inject)("searchResults"),i.observer],t)}(n.Component)},"Cc/f":function(e,t,r){r.r(t);var a,n=r("GiK3"),i=r("OSg3"),o=r("AQYs"),s=r("B1JX"),l=r("Dhs5"),c=r("vc39"),p=r("zqAW"),u=r("CYWc"),h=r("d6px"),d=r("zBEt"),m=r("th27"),f=r("X4mx"),y=r("l92f"),g=r("2eDV"),k=(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),v=function(){return(v=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},b=function(e,t,r,a){var n,i=arguments.length,o=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,a);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(i<3?n(o):i>3?n(t,r,o):n(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},_=Object(p.ClickTracker)(u.UitkPrimaryFloatingButton),E=function(e){function t(t){var r=e.call(this,t)||this;return r.buttonRef=n.createRef(),r.formRef=null,r.clearFilters=r.clearFilters.bind(r),r.closeDialog=r.closeDialog.bind(r),r.formRefCallback=r.formRefCallback.bind(r),r.getSearchFormBottomSection=r.getSearchFormBottomSection.bind(r),r.getSearchFormTopSection=r.getSearchFormTopSection.bind(r),r}return k(t,e),t.prototype.formRefCallback=function(e){this.formRef=e?e.wrappedInstance?e.wrappedInstance:e:null},t.prototype.closeDialog=function(){"function"==typeof this.props.onDismiss&&this.props.onDismiss()},t.prototype.clearFilters=function(){var e=this.formRef;e&&"function"==typeof e.clearDisplayfields&&e.clearDisplayfields()},t.prototype.getSearchFormTopSection=function(){var e=this.props,t=e.analytics,r=e.l10n,a=(this.formRef&&this.formRef.displayFieldsActiveLength)>0,i={action:this.closeDialog,iconLabel:r.formatText("hotels.searchResults.filtersDialog.closeButton.label"),header:n.createElement(o.LocalizedText,{message:"hotels.searchResults.filtersDialog.title"}),analytics:t&&t.setupTracker("CloseFilterDialog","close search filters dialog"),actionContent:n.createElement(u.UitkTertiaryButton,{type:"reset",disabled:!a,onClick:this.clearFilters,text:n.createElement(o.LocalizedText,{message:"hotels.searchResults.filtersDialog.clearButton.label"})})};return n.createElement(y.UitkToolbar,v({},i))},t.prototype.getSearchFormBottomSection=function(){return n.createElement(f.UitkScrim,{type:f.UitkScrimType.BUTTON},n.createElement(_,{"data-stid":"submit-hotel-filters",domRef:this.buttonRef,type:"submit",isFullWidth:!0,size:u.UitkButtonSize.LARGE,text:n.createElement(o.LocalizedText,{message:"hotels.searchResults.filtersDialog.submitButton.label"}),rfrr:"FilterControlDone",linkName:"done search filters dialog"}))},t.prototype.render=function(){var e=this.props.searchResults,t=e&&e.searchCriteria,r=e&&e.sortAndFilter,a=r&&r.options,i=r&&r.defaults,s=e&&e.searchAndFilterDisplayOptions&&e.searchAndFilterDisplayOptions.filters,l=s&&s.displayFields,c=s&&s.ignoreFields,p={dialogShow:!0,animation:m.UitkDialogAnimationType.SLIDEUP};return n.createElement(m.UitkFullscreenDialog,v({},p),n.createElement(d.AbacusExperiment,{name:"PWA_Contextual_Top_Filters"},n.createElement(d.AbacusControl,null),n.createElement(d.AbacusVariant,{bucket:1})),n.createElement(g.SearchForm,{className:"all-b-padding-twelve uitk-dialog__search-form",formRef:this.formRefCallback,model:t,sortAndFilterOptions:a,sortAndFilterDefaults:i,renderSearchFormTopSection:this.getSearchFormTopSection,renderSearchFormBottomSection:this.getSearchFormBottomSection,fieldsWrapper:{Tag:m.UitkDialogContent},provideDefaultSubmitButton:!1,displayFields:l,ignoreFields:c,fieldNameOverrides:{amenityIcons:"amenities",pricing:"price"},searchable:!0}),n.createElement("span",{className:"is-visually-hidden"},n.createElement(o.LocalizedText,{message:"hotels.searchResults.filtersDialog.a11yLabel"})))},b([h.observable],t.prototype,"formRef",void 0),t=b([o.withLocalization,Object(i.inject)("analytics")],t)}(n.Component),S=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function a(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(a.prototype=r.prototype,new a)}}(),O=function(){return(O=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},w=function(e,t,r,a){var n,i=arguments.length,o=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,a);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(i<3?n(o):i>3?n(t,r,o):n(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},M=Object(p.ClickTracker)(u.UitkSecondaryButton),C=function(e){function t(t){var r=e.call(this,t)||this;return r.filtersBtn=n.createRef(),r.onDismiss=r.onDismiss.bind(r),r}return S(t,e),t.prototype.render=function(){var e=this.props,t=e.isActive,r=e.searchResults,a=e.routeStore,i=r.isLoading,p=r.isError,u=r.sortAndFilter,h=u&&u.options&&u.options.appliedFilterCount,d=h>0,m=a.mergeQueryString(a.search,{pwaDialog:"filter"}),f=t?{domRef:this.filtersBtn,tag:s.Link,to:{pathname:a.pathname,search:m}}:{},y=n.createElement("span",null,d&&n.createElement("span",null,n.createElement("strong",{"aria-hidden":"true",className:"uitk-type-100 uitk-type-medium pwa-theme--color-white tools__filter-count"},h),n.createElement("span",{className:"is-visually-hidden"},n.createElement(o.LocalizedText,{message:"hotels.searchResults.appliedFiltersCount.a11yLabel",data:[h]}))),n.createElement(o.LocalizedText,{message:"hotels.searchResults.openFiltersDialog.label"}));return n.createElement(n.Fragment,null,n.createElement(M,O({"data-stid":"open-hotel-filters",disabled:!t||i||p||null,linkName:"Launch filters takeover",rfrr:":FilterControl",icon:d?null:"tune",text:y,isFullWidth:!0},f)),n.createElement(l.QueryRoute,{query:{pwaDialog:"filter"}},n.createElement(c.Layer,{id:"tools-filterdrawer",onDismiss:this.onDismiss},n.createElement(E,{searchCriteria:r.searchCriteria,searchResults:r,onDismiss:this.onDismiss}))))},t.prototype.onDismiss=function(){var e=this.props.routeStore;e&&"function"==typeof e.goBack&&e.goBack(),this.filtersBtn.current&&"function"==typeof this.filtersBtn.current.focus&&this.filtersBtn.current.focus()},t.defaultProps={isActive:!1},t=w([Object(i.inject)("layerManager","routeStore","searchResults"),i.observer],t)}(n.Component),R=r("uX+Z"),P=r("zmhr"),x=r("OAwv"),D=r("3u11"),T=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function a(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(a.prototype=r.prototype,new a)}}(),L=function(){return(L=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},N=function(e){function t(t){var r=e.call(this,t)||this;return r.state={hide:!1},r.dismissPillAndUpdateSearch=r.dismissPillAndUpdateSearch.bind(r),r.sendTracking=r.sendTracking.bind(r),r}return T(t,e),t.prototype.dismissPillAndUpdateSearch=function(){var e=this.props,t=e.routeStore,r=e.pill;if(this.sendTracking(),r.query&&r.query.length>0)t.updateSearch(r.query);else if(r.generated){var a=L({},t.queryParams),n=r.value,i=a[r.name],o=void 0;o=i instanceof Array?i.filter(function(e){return!Object(D.b)(e,n)}):Object(D.b)(i,n)?null:i,a[r.name]=o,t.updateSearch(Object(x.stringify)(a))}this.setState({hide:!0}),document&&document.dispatchEvent&&"function"==typeof document.dispatchEvent&&CustomEvent&&document.dispatchEvent(new CustomEvent("mesoSlotFilterUpdate",{detail:{type:"slotFilter",editType:"remove",filterData:r}}))},t.prototype.sendTracking=function(){var e=this.props,t=e.pill,r=e.analytics,a="playback."+t.name+"."+t.value;r.clickTracker("."+a,a)()},t.prototype.render=function(){var e=this.props.pill;if(this.state.hide||!e||!e.label)return null;var t=e.name,r=e.label,a=e.value,i="playback-filter-pill-"+t+"-"+("string"==typeof a?a.replace(/,/g,"-"):a);return n.createElement("div",{className:"all-r-padding-two all-t-margin-three"},n.createElement(P.UitkRemovablePill,{id:i,key:i,onClick:this.dismissPillAndUpdateSearch,disabled:this.props.disabled},n.createElement("span",{className:"playback-pill-grid-item-label"},r)))},t}(n.Component),A=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function a(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(a.prototype=r.prototype,new a)}}(),j=function(e,t,r,a){var n,i=arguments.length,o=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,a);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(i<3?n(o):i>3?n(t,r,o):n(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},U=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return A(t,e),t.prototype.render=function(){var e=this.props,t=e.routeStore,r=e.analytics,a=e.searchResults,i=a&&a.sortAndFilter,o=a&&a.isLoading,s=i&&i.pills,l=null;return s&&(l=s.map(function(e){return n.createElement(N,{key:"playback-filter-"+e.name+"-"+e.value,pill:e,disabled:o,routeStore:t,analytics:r})})),n.createElement("section",{className:"uitk-scroll-horizontal uitk-grid s-x-gutter-two m-x-gutter-two playback-pill-grid"},n.createElement("div",{className:"uitk-grid all-grid-nowrap s-x-padding-two m-x-padding-two"},l))},t=j([Object(i.inject)("searchResults","routeStore","analytics"),i.observer],t)}(n.Component),I=r("KaGk"),F=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function a(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(a.prototype=r.prototype,new a)}}(),H=function(e,t,r,a){var n,i=arguments.length,o=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,a);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(i<3?n(o):i>3?n(t,r,o):n(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},z=Object(p.ClickTracker)(I.UitkLink),B=function(e){function t(t){var r=e.call(this,t)||this;return r.handleClick=r.handleClick.bind(r),r}return F(t,e),t.prototype.handleClick=function(){var e=this.props,t=e.model;e.routeStore.updateSearch({useRewards:Boolean(t.swpActionValue)},{},!0)},t.prototype.render=function(){var e=this.props.model;return e?n.createElement("h3",{className:"uitk-type-200 uitk-type-center uitk-neutral-700","data-stid":"swp-toggle"},e.loyaltyPointsMessage+" ",n.createElement(z,{"aria-label":e.swpActionMessage,onClick:this.handleClick,linkName:"PWA.SWP.Toggle",rfrr:"swpToggle: "+e.swpActionMessage,inline:!0,type:I.UitkLinkTypeSize.SMALL},n.createElement("button",null,n.createElement("span",null,e.swpActionMessage)))):null},t=H([Object(i.inject)("routeStore"),i.observer],t)}(n.Component),V=r("dmEO"),W=r("y5TW"),G=Object(p.ClickTracker)("a"),Z=function(e){var t=e.isLoading,r=e.resultCountMessage,a=e.pointsAppliedMessage,i=e.loyaltyMessagingModel,o=e.l10n,s=e.showPointsMessage,l=r.header,c=r.separator,p=r.subHeader,u=r.link,h=r.icon,d="uitk-type-200 pwa-theme--grey-700 tools__title uitk-type-center uitk-type-bold";return n.createElement("header",{className:"tools__summary all-b-padding-two"},t&&n.createElement("p",{className:d},o.formatText("hotels.searchResults.loadingMessage.text")),!t&&(l||p)&&n.createElement("p",{className:d},l," ",p&&l&&c,p&&n.createElement(V.UitkMoreInfoTrigger,{className:"all-l-padding-one link__title",type:200},n.createElement(G,{href:u,linkName:"Sort Disclaimer",rfrr:"HOT.HSR.RecommendedSort.FAQlink"},p,h&&n.createElement(W.UitkIcon,{name:h})))),s&&i&&Object.keys(i).length>0?n.createElement(B,{model:i}):a&&n.createElement("h3",{className:"uitk-type-200 uitk-type-center tools__points-message uitk-neutral-700"},a))};r.d(t,"Tools",function(){return Y});var q=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function a(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(a.prototype=r.prototype,new a)}}(),Q=function(e,t,r,a){var n,i=arguments.length,o=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,a);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(i<3?n(o):i>3?n(t,r,o):n(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},Y=function(e){function t(t){var r=e.call(this,t)||this;return r.state={toolsActive:!1},r.searchToolsWrapper=n.createRef(),r}return q(t,e),t.prototype.componentDidMount=function(){this.setState({toolsActive:!0})},t.prototype.render=function(){var e=this.props,t=e.l10n,r=e.searchResults,a=e.multiItem,i=r.primaryPageMessagingModel;return n.createElement("section",{className:this.props.className+" tools",ref:this.searchToolsWrapper.value},n.createElement(Z,{isLoading:r.isLoading,l10n:t,resultCountMessage:r.resultTitleModel,pointsAppliedMessage:r.pointsAppliedMessage,loyaltyMessagingModel:r.loyaltyMessagingModel,showPointsMessage:a&&0===a.itemCount}),n.createElement(K,{primaryPageMessagingModel:i}),n.createElement(c.Viewport,null,n.createElement(c.ViewSmall,null,n.createElement(X,{isActive:this.state.toolsActive})),n.createElement(c.ViewLarge,null,n.createElement("span",null))),n.createElement(U,null))},t.defaultProps={l10n:null},t=Q([o.withLocalization,Object(i.inject)("searchResults","multiItem"),i.observer],t)}(n.Component),K=function(e){var t=e.primaryPageMessagingModel;return t&&t.description?n.createElement("section",{className:"uitk-cell uitk-type-medium uitk-type-center","data-stid":"pay-in-installments-messaging"},n.createElement("span",{className:"uitk-type-200 uitk-neutral-700"},t.description)):null},X=function(e){var t=e.isActive;return n.createElement("div",{className:"uitk-flex uitk-flex-gap-two tools__actions all-b-padding-three"},n.createElement("div",{className:"uitk-flex-grow-2"},n.createElement(C,{isActive:t})),n.createElement("div",{className:"uitk-flex-grow-1"},n.createElement(R.a,{isActive:t})))}},"M/bf":function(e,t,r){r.r(t);var a,n=r("GiK3"),i=r("iJm4"),o=r("XDQ7"),s=r("WOLG"),l=r("Avz1"),c=function(){return(c=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},p=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&(r[a[n]]=e[a[n]])}return r},u=function(e){var t,r=e.resultType,a=p(e,["resultType"]);switch(r){case l.a.MESSAGING:t=s.MessagingCard;break;case l.a.HOTEL:default:t=o.a}return n.createElement(t,c({},a))},h=r("y5TW"),d=r("T3U3"),m=r("B1JX"),f=r("zqAW"),y=Object(f.ClickTracker)(m.Link),g=function(e){var t=e.dateRange,r=e.index,a=e.link,i=e.price;return n.createElement(d.UitkCard,null,n.createElement(d.UitkCardContent,null,n.createElement(d.UitkCardLink,null,n.createElement(y,{linkName:"Search alternate dates",rfrr:".Compression.AlternateDates.Option"+(r+1),to:a,replace:!0},t)),n.createElement("div",{className:"uitk-grid all-grid-nowrap pwa-theme--link all-y-padding-two all-x-padding-three"},n.createElement("div",{className:"uitk-cell all-cell-1-2"},t),n.createElement("div",{className:"uitk-cell all-cell-1-2 uitk-type-right"},i," ",n.createElement(h.UitkIcon,{name:"navigate_next",size:h.UitkIconSize.SMALL})))))},k=r("vc39"),v=(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return v(t,e),t.prototype.render=function(){var e=n.createElement(d.UitkCard,{className:"insights-card"},n.createElement(d.UitkCardContent,null,n.createElement(d.UitkCardTextSegment,{className:"uitk-grid"},this.renderIcon(this.props.icon),this.renderHeader(this.props.heading),this.renderSubHeader(this.props.icon,this.props.subHeading),this.props.children)));return n.createElement(k.Viewport,null,n.createElement(k.ViewSmall,null,e),n.createElement(k.ViewMedium,null,n.createElement(d.UitkCard,{className:"insights-card all-grid-align-middle uitk-type-center"},n.createElement(d.UitkCardContent,null,n.createElement(d.UitkCardTextSegment,{className:"uitk-grid"},this.renderIcon(this.props.icon),this.renderHeader(this.props.heading),this.renderSubHeader(this.props.icon,this.props.subHeading),this.props.children)))),n.createElement(k.ViewLarge,null,e))},t.prototype.renderHeader=function(e){return e?n.createElement("div",{className:"uitk-cell"},n.createElement("h3",{className:"uitk-type-300"},e)):null},t.prototype.renderSubHeader=function(e,t){if(!t)return null;var r=e?"all-cell-fill all-x-gutter-three":"all-y-gutter-one";return n.createElement("div",{className:"uitk-cell uitk-type-200 "+r},t)},t.prototype.renderIcon=function(e){return e?n.createElement("div",{className:"uitk-cell all-cell-shrink "},n.createElement(h.UitkIcon,{name:e,className:"pwa-theme--grey-700"})):null},t}(n.PureComponent),_=function(e){var t=e.compression,r=e.dateOptions;return n.createElement(b,{heading:t.heading,subHeading:t.subHeading},r&&r.map(function(e,t){return n.createElement(g,{key:"dateOption-"+t,dateRange:e.dateRange,index:t,link:e.searchLink,price:e.minPrice})}))},E=r("sfv7"),S=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function a(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(a.prototype=r.prototype,new a)}}(),O=function(){return(O=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},w=function(e){function t(t){var r=e.call(this,t)||this;return r.state={adServed:!1},r.adRef=n.createRef(),r}return S(t,e),t.prototype.componentDidMount=function(){var e=this,t=this.adRef.current;t&&t.addEventListener("mesoAd",function(t){t&&t.detail&&("AD-LOAD-PASS"===t.detail.code&&e.setState({adServed:!0}),"AD-LOAD-FAIL"===t.detail.code&&e.setState({adServed:!1}))})},t.prototype.render=function(){return n.createElement(k.Viewport,null,n.createElement(k.ViewMedium,null,n.createElement(n.Fragment,null,n.createElement("li",{"data-stid":"native-results-listing",className:this.state.adServed?this.props.className:""},n.createElement("meso-native-results-listing",O({ref:this.adRef},this.props))),n.createElement(E.a,{pageName:"page.Hotels.Search"}))))},t}(n.Component),M=r("56g/");r.d(t,"Results",function(){return x});var C=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function a(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(a.prototype=r.prototype,new a)}}(),R=function(){return(R=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},P=new Array(6).fill({}),x=function(e){function t(t){var r=e.call(this,t)||this;return r.state={hotelsMaxDisplay:M.a.INITIAL_HOTEL_RENDER_COUNT},r}return C(t,e),t.prototype.componentWillUnmount=function(){i.dequeueAll("HSR")},t.prototype.componentDidMount=function(){this.setState({hotelsMaxDisplay:this.props.hotelsMaxDisplay})},t.prototype.componentDidUpdate=function(){this.state.hotelsMaxDisplay!==this.props.hotelsMaxDisplay&&this.setState({hotelsMaxDisplay:this.props.hotelsMaxDisplay})},t.prototype.render=function(){var e=this.props,t=e.loading,r=e.insights,a=e.hotels,i=e.setResultRef,o=e.className,s=e.endDate,c=e.startDate,p=e.hotelListings,h=e.messageListings,d=r&&r.compression,m=r&&r.alternateDateOptions,f=t&&(!a||0===a.length),y="listing "+o,g=h&&h.length>0,k=g&&h.map(function(e){return e.index}),v=g&&h.reduce(function(e,t){return e[t.index]=t,e},{}),b=f?P:p.slice(0,this.state.hotelsMaxDisplay);return n.createElement("section",{className:"results","data-stid":"section-results"},n.createElement("ol",{className:"uitk-grid all-x-gutter-three all-y-gutter-three results-list"},b.map(function(e,t){var r={className:y,endDate:s,startDate:c,index:t,lazyLoadImg:t>=3,loading:f,setResultRef:i};return n.createElement(n.Fragment,{key:"resultListing-"+t},11===t&&n.createElement(w,{className:o,uci:"NRL"}),d&&3===t&&n.createElement("li",{className:y},n.createElement(_,{key:"region-compression-card",compression:d,dateOptions:m})),g&&k.includes(t)&&n.createElement(u,R({},r,{key:"resultMessageListing-"+t,model:v[t].model,resultType:l.a.MESSAGING})),n.createElement(u,R({},r,{key:e.id?"resultListing-"+e.id+"-"+t:"resultListing-"+t,model:e.model||e,resultType:e.resultType})))})))},t}(n.Component)},WvkB:function(e,t,r){r.r(t);var a,n,i=r("y1vT"),o=r("GiK3"),s=r("d6px"),l=r("OSg3"),c=r("zBEt"),p=r("Dhs5"),u=r("zqAW"),h=r("vc39"),d=r("AQYs"),m=r("ToBc"),f=r("CYWc"),y=r("y5TW"),g=r("yo39"),k=r("l92f"),v=r("th27"),b=r("B1JX"),_=r("Mlow"),E=function(){return(E=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},S=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&(r[a[n]]=e[a[n]])}return r},O="uitk-cell s-cell-1-2 m-cell-1-3 l-cell-1-4 xl-cell-1-4",w=function(e){var t=e.className,r=void 0===t?"":t,a=S(e,["className"]);return o.createElement("td",E({className:O+" "+r},a))},M=r("2T4e"),C=(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),R=function(){return(R=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},P=function(e,t,r,a){var n,i=arguments.length,o=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,a);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(i<3?n(o):i>3?n(t,r,o):n(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},x=Object(u.ClickTracker)(b.Link),D=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return C(t,e),t.prototype.render=function(){var e=this.props,t=e.hotel,r=e.position,a=e.l10n;if(!t)return o.createElement("th",{key:"header-"+r,scope:"col",className:O});var n=R({},t);return o.createElement("th",{key:"header-"+r,scope:"col",className:O},o.createElement("div",{className:"compare-table-heading"},t.thumbnail&&t.thumbnail.src&&o.createElement(_.UitkFigure,{ratio:_.UitkFigureAspectRatioType.R4_3,className:"all-image-fit-cover"},o.createElement(x,{to:t.infositeUrl||"",linkName:"View Property",className:"uitk-type-regular uitk-type-200",rfrr:".Comparison.PropertyPhoto"+r},o.createElement(_.UitkImage,{src:t.thumbnail.src,alt:t.thumbnail.caption})),t.shortlistModel&&t.shortlistModel.meta&&t.shortlistModel.meta.hotelId&&o.createElement(M.a,{key:t.shortlistModel.meta.hotelId,favorited:t.shortlistModel.favorited,saveUrl:t.shortlistModel.saveUrl,removeUrl:t.shortlistModel.removeUrl,meta:t.shortlistModel.meta,labelSave:a.formatText("hotels.searchResults.shortlist.saveToList.a11yLabel",t.name),labelRemove:a.formatText("hotels.searchResults.shortlist.removeFromList.a11yLabel",t.name),category:"hotel",onSaveMessage:a.formatText("hotels.searchResults.shortlist.saveToList.notification",t.name),id:"compare-table-favorite-"+t.shortlistModel.meta.hotelId,referralObject:{favorite:{rfrr:"Comparison.SaveFavorite."+r},unfavorite:{rfrr:"Comparison.RemoveFavorite."+r}},replayHotelModel:n}))),t.name&&o.createElement("div",{className:"all-t-margin-three all-b-margin-two uitk-type-300 uitk-type-medium overflow-wrap"},t.name),t.infositeUrl&&o.createElement(x,{to:t.infositeUrl,linkName:"View Property",className:"uitk-type-regular uitk-type-200",rfrr:".Comparison.ViewProperty"+r},o.createElement(d.LocalizedText,{message:"hotels.shortlist.replay.compareTable.linkText"})))},t=P([d.withLocalization],t)}(o.Component),T=r("jNVU"),L=function(e){var t=e.hotel,r=e.id;if(!t.price)return o.createElement(w,{key:r});var a=t.price;return o.createElement(w,{key:r,"data-stid":"price-cell"},!a.priceMessage&&o.createElement("span",null,a.lead&&o.createElement("span",{className:"uitk-type-300 uitk-type-medium"},a.lead," "),a.qualifier&&o.createElement("span",{className:"uitk-type-200"},a.qualifier)),a.priceMessage&&o.createElement(T.a,{theme:T.a.theme[a.priceMessage.theme]},a.priceMessage.text))},N=function(e){var t=e.hotel,r=e.id;if(!t.reviews)return o.createElement(w,{key:r}," ",o.createElement(A,null)," ");var a=t.reviews;return o.createElement(w,{key:r,"data-stid":"reviews-cell"},a.localizedOverallRating&&o.createElement("span",null,a.localizedOverallRating&&o.createElement("span",{className:"uitk-type-300 uitk-type-medium"},o.createElement("span",null,a.localizedOverallRating),"/5 "),o.createElement("span",{className:"uitk-type-200"},a.superlative&&o.createElement("span",null,a.superlative," "),a.localizedCount&&o.createElement("span",null,"("+a.localizedCount+")"))),!a.localizedOverallRating&&o.createElement(A,null))},A=function(){return o.createElement("span",{className:"uitk-type-300 uitk-type-medium","data-stid":"content-hotel-no-reviews"},o.createElement(d.LocalizedText,{message:"hotels.searchResults.noReviews.text"}))},j=r("aYG5"),U=function(e){var t=e.hotel,r=e.id;return t.comparisonModel&&t.comparisonModel.starRating&&t.starRatingIcon?o.createElement(w,{key:r},o.createElement(j.UitkRating,{icon:j.UitkRatingIcon[t.starRatingIcon],rating:String(t.comparisonModel.starRating)})):o.createElement(w,{key:r})},I=r("3u11");!function(e){e.NORMAL="NORMAL",e.STRIKETHROUGH="STRIKETHROUGH"}(n||(n={}));var F=function(e){var t=e.amenity,r=e.id;if(!t)return o.createElement(w,{key:"amenityRow-"+r});var a,i=Object(I.a)(t);switch(t.theme){case n.STRIKETHROUGH:a=o.createElement(w,{key:"amenityRow-"+r,className:"uitk-type-200 pwa-theme--grey-500"},o.createElement(y.UitkIcon,{name:i.icon,size:y.UitkIconSize.SMALL})," ",o.createElement("del",null,t.description));break;case n.NORMAL:default:a=o.createElement(w,{key:"amenityRow-"+r,className:"uitk-type-200"},o.createElement(y.UitkIcon,{name:i.icon,size:y.UitkIconSize.SMALL})," ",t.description)}return a};function H(e){return e&&"function"==typeof e.slice&&Array.isArray(e.slice())}var z=function(){return(z=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},B=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&(r[a[n]]=e[a[n]])}return r},V=function(e){var t=e.className,r=void 0===t?"":t,a=B(e,["className"]);return o.createElement("tr",z({className:"uitk-grid all-grid-nowrap all-r-margin-six all-r-padding-six "+r},a))},W=function(e){var t,r=e.amenities,a=(t=r)&&H(t)&&H(t[0])?t[0].map(function(e,r){return t.map(function(e){return e[r]})}):null;return a&&a.map(function(e,t){return o.createElement(V,{key:"amenitiesRow-"+t},e.map(function(e,t){return o.createElement(F,{amenity:e,key:t,id:t})}))})},G=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function a(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(a.prototype=r.prototype,new a)}}(),Z=Object(u.ClickTracker)(b.Link),q=function(e){var t=e.hotel,r=e.id;return t.comparisonModel&&t.comparisonModel.neighborhoodName?o.createElement(w,{key:r,className:"uitk-type-200 overflow-wrap","data-stid":"neighborhood-cell"},t.comparisonModel.neighborhoodName):o.createElement(w,{key:r,className:"uitk-type-200"})},Q=function(e){var t=e.hotel,r=e.position;return t.infositeUrl?t.infositeUrl&&o.createElement(w,{key:"viewProperty-"+r},o.createElement(Z,{to:t.infositeUrl,linkName:"View Property",rfrr:".Comparison.ViewProperty"+r},o.createElement(d.LocalizedText,{message:"hotels.shortlist.replay.compareTable.linkText"}))):o.createElement(w,{key:"viewProperty-"+r})},Y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return G(t,e),t.prototype.render=function(){var e=this.props.tableData.hotels,t=[],r=[],a=[],n=[],i=[],s=[],l=[];return e&&e.length>0?(e.forEach(function(e,c){if(e){var p=c+1;t.push(o.createElement(D,{hotel:e,position:p,key:"header-"+c})),r.push(o.createElement(L,{hotel:e,id:"price-"+c,key:"price-"+c})),a.push(o.createElement(N,{hotel:e,id:"reviews-"+c,key:"reviews-"+c})),n.push(o.createElement(q,{hotel:e,id:"neighborhood-"+c,key:"neighborhood-"+c})),i.push(o.createElement(U,{hotel:e,id:"star-"+c,key:"star-"+c})),s.push(o.createElement(Q,{hotel:e,position:p,key:"viewProperty-"+c})),e.comparisonModel&&e.comparisonModel.amenities&&l.push(e.comparisonModel.amenities)}}),o.createElement("div",{className:"pwa-theme--grey-800"},o.createElement("div",{className:"uitk-table-horzoverflow compare-table"},o.createElement("table",{className:"uitk-table theme-striped border-vertical uitk-cell"},o.createElement("thead",{className:"uitk-table-head"},t.length>0&&o.createElement(V,null,t)),o.createElement("tbody",{className:"uitk-table-body"},r.length>0&&o.createElement(V,null,r),a.length>0&&o.createElement(V,null,a),n.length>0&&o.createElement(V,null,n),i.length>0&&o.createElement(V,null,i),l.length>0&&o.createElement(W,{amenities:l}),s.length>0&&o.createElement(V,null,s)))))):null},t}(o.PureComponent),K=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function a(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(a.prototype=r.prototype,new a)}}(),X=function(){return(X=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},J=function(e,t,r,a){var n,i=arguments.length,o=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,a);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(i<3?n(o):i>3?n(t,r,o):n(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},$=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return K(t,e),t.prototype.render=function(){var e=this.props,t=e.onDismiss,r=e.hotels,a=e.l10n,n={type:k.ToolbarType.BACK,header:a.formatText("hotels.shortlist.replay.compareTable.title")},i={hotels:r};return o.createElement(v.UitkFullscreenDialog,{dialogShow:!0},o.createElement(k.UitkToolbar,X({},n,{action:t})),o.createElement(v.UitkDialogContent,null,o.createElement(Y,{tableData:i})))},t=J([d.withLocalization],t)}(o.Component),ee=r("XDQ7"),te=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function a(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(a.prototype=r.prototype,new a)}}(),re=function(){return(re=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},ae=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return te(t,e),t.prototype.render=function(){var e=this.props.model,t=re({},e,{price:re({},e.price,{strikeOut:""}),reviews:re({},e.reviews,{localizedCount:""})}),r=this.props.className+" listing";return o.createElement(ee.a,re({},this.props,{className:r,model:t}))},t}(o.Component);r.d(t,"ReplayShortlisted",function(){return pe});var ne=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function a(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(a.prototype=r.prototype,new a)}}(),ie=function(){return(ie=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},oe=function(e,t,r,a){var n,i=arguments.length,o=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,a);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(i<3?n(o):i>3?n(t,r,o):n(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},se=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var a,n,i=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(a=i.next()).done;)o.push(a.value)}catch(s){n={error:s}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return o},le=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(se(arguments[t]));return e},ce=Object(u.ClickTracker)(f.UitkPrimaryButton),pe=function(e){function t(t){var r=e.call(this,t)||this;return r.state={isBottomSheetExpanded:!1,fireInitialTracking:!1},r.openDialog=r.openDialog.bind(r),r.onDismiss=r.onDismiss.bind(r),r.onSheetExpand=r.onSheetExpand.bind(r),r.onSheetCollapse=r.onSheetCollapse.bind(r),r.updateReplayHotelsDebounced=i(r.updateReplayHotels,500,{leading:!0,trailing:!0}),r}return ne(t,e),Object.defineProperty(t.prototype,"watchedSearchCriteria",{get:function(){var e=this.props.searchCriteria;return{regionId:e.regionId,startDate:e.startDate,endDate:e.endDate,adults:e.adults,children:e.children}},enumerable:!0,configurable:!0}),t.prototype.componentDidMount=function(){var e=this,t=this.props,r=t.shortlist,a=t.category;r.isLoading&&(this.setState({fireInitialTracking:!0}),this.updateReplayHotelsDebounced()),this.disposeCriteriaObserver=Object(s.observe)(this,"watchedSearchCriteria",function(){e.setState({fireInitialTracking:!0}),r.resetReplayData(a),e.updateReplayHotelsDebounced()})},t.prototype.componentWillUnmount=function(){"function"==typeof this.disposeCriteriaObserver&&this.disposeCriteriaObserver()},t.prototype.componentDidUpdate=function(){this.state.isBottomSheetExpanded&&this.props.shortlist.shouldFetchFreshData&&this.updateReplayHotelsDebounced(!0)},t.prototype.updateReplayHotels=function(e){var t=this;void 0===e&&(e=!1);var r=this.props,a=r.context,n=r.shortlist,i=r.searchCriteria,o=r.currentHotel,s=r.category,l=r.regionId;if(a&&n&&i){var c=o&&o.hotel&&o.hotel.region&&o.hotel.region.id||l;n.fetchReplayHotels(a,s,i,c,e).then(function(){t.state.fireInitialTracking&&t.fireTrackingEvents(s),t.setState({fireInitialTracking:!1})})}},t.prototype.headerListEmpty=function(){return o.createElement("div",{className:"replay-header-container-empty-list uitk-grid all-l-padding-three"},o.createElement("div",{className:"uitk-grid all-grid-align-start all-grid-align-middle all-x-gutter-three"},o.createElement(y.UitkIcon,{name:"favorite",className:"uitk-cell all-cell-shrink"}),o.createElement("div",{className:"replay-bar-empty-message uitk-cell all-cell-fill"},o.createElement("h4",{className:"uitk-type-bold pwa-theme--grey-900"},o.createElement(d.LocalizedText,{message:"hotels.shortlist.replay.noSave.title"})),o.createElement("span",{className:"pwa-theme--grey-900"},o.createElement(d.LocalizedText,{message:"hotels.shortlist.replay.noSave.text"})))))},t.prototype.headerListFilled=function(e,t,r){return o.createElement("div",{className:"replay-header-container uitk-grid all-grid-align-left all-grid-align-middle"},o.createElement("div",{className:"replay-bar-save-message uitk-grid all-grid-align-left",key:"replay-bar-save-message"},o.createElement("div",null,o.createElement(m.UitkFlagBadge,{key:"replay-bar-favorite-count-badge",shape:m.UitkBadgeShapeType.PILL,theme:m.UitkBadgeThemeType.URGENT},o.createElement(y.UitkIcon,{key:"replay-bar-favorite-count-icon",name:"favorite",size:y.UitkIconSize.EXTRA_SMALL}),e),o.createElement("span",{className:"uitk-icon all-x-margin-two",key:"replay-bar-save-text"},o.createElement(d.LocalizedText,{message:"hotels.shortlist.replay.save.text"}))),r&&o.createElement("div",{className:"all-l-margin-two"},o.createElement(m.UitkFlagBadge,{key:"replay-bar-viewed-count-badge",shape:m.UitkBadgeShapeType.PILL,theme:m.UitkBadgeThemeType.LINK},o.createElement(y.UitkIcon,{key:"replay-bar-viewed-count-icon",name:"visibility",size:y.UitkIconSize.EXTRA_SMALL}),t),o.createElement("span",{className:"uitk-icon all-x-margin-two",key:"replay-bar-save-text"},o.createElement(d.LocalizedText,{message:"hotels.shortlist.replay.view.text"})))))},t.prototype.setOmnitureProperties=function(e){var t=e+1;return{navigation:{linkName:"View selected hotel",rfrr:":Drawer.Hotel.Click."+t},favorite:{linkName:"Add to lists",rfrr:":Drawer.Hotel.Save."+t},unfavorite:{linkName:"Remove from lists",rfrr:":Drawer.Hotel.Unsave."+t},close:{linkName:"Remove selected hotel",rfrr:":Drawer.Hotel.Close."+t}}},t.prototype.fireTrackingEvents=function(e){var t=this.props,r=t.shortlist,a=t.analytics,n=t.displayViewed,i={rfrr:"FavoritedHotels."+r[e].favorited.length,linkName:"Number of favorited hotels"};if(a.trackEvent(i.rfrr,i.linkName,a.omnitureData,null),n){var o={rfrr:"ViewedHotels."+r[e].recentlyViewed.length,linkName:"Number of viewed hotels"};a.trackEvent(o.rfrr,o.linkName,a.omnitureData,null)}},t.prototype.openDialog=function(){this.props.routeStore.updateSearch({pwaDialog:"compare"})},t.prototype.onDismiss=function(){this.props.routeStore.goBack(),this.props.analytics.clickTracker(".Comparison.BackArrow","Compare Table Dismiss",null,null)()},t.prototype.onSheetExpand=function(){this.setState({isBottomSheetExpanded:!0})},t.prototype.onSheetCollapse=function(){this.setState({isBottomSheetExpanded:!1})},t.prototype.render=function(){var e=this,t=this.props,r=t.shortlist,a=t.category,n=t.analytics,i=t.displayViewed,s=t.l10n,l=r&&r[a],u=l&&r[a].favorited||[],d=l&&r[a].recentlyViewed||[],m=u.length>0,y=d.length>0,k=d.filter(function(e){return!r[a].favorited||!r[a].favorited.some(function(t){return t.id===e.id})}),v=m||y&&i?this.headerListFilled(u.length,d.length,i):this.headerListEmpty(),b=n.setupTracker("Drawer","OpenDrawer_CloseDrawer"),_=le(u,k),E={isModalLocked:!(m||y&&i),className:"modal-bottom-sheet",sheetHeader:v,analytics:b,onExpand:this.onSheetExpand,onCollapse:this.onSheetCollapse};return o.createElement("div",{className:"replay-bar"},o.createElement(g.UitkModalBottomSheet,ie({},E),(m||y&&i)&&o.createElement("div",{className:"uitk-scroll-horizontal uitk-grid uitk-cell"},o.createElement("ul",{className:"uitk-grid uitk-cell no-bullet all-grid-nowrap all-x-gutter-three replay-bar-list"},u&&u.map(function(t,r){var a=t.id,n={id:a,name:t.name,thumbnail:t.thumbnail,infositeUrl:t.infositeUrl,price:t.price,reviews:t.reviews,shortlistModel:t.shortlistModel};return o.createElement(ae,{key:"shortlisted-"+a,replayId:"replay-favorited",model:n,className:"uitk-cell s-cell-2-3 m-cell-1-2 l-cell-1-2 xl-cell-1-2",referralObject:e.setOmnitureProperties(r),displayViewed:i})}),i&&k&&k.map(function(t,r){var a=t.id,n={id:a,name:t.name,thumbnail:t.thumbnail,infositeUrl:t.infositeUrl,price:t.price,reviews:t.reviews,shortlistModel:t.shortlistModel};return o.createElement(ae,{key:"viewed-"+a,replayId:"replay-viewed",model:n,className:"uitk-cell s-cell-2-3 m-cell-1-2 l-cell-1-2 xl-cell-1-2",referralObject:e.setOmnitureProperties(u.length+r),displayViewed:i})}))),_&&_.length>0&&o.createElement(c.AbacusExperiment,{name:"LS_PWA_ComparisonModule"},o.createElement(c.AbacusControl,null,o.createElement("div",null)),o.createElement(c.AbacusVariant,{bucket:1},o.createElement("div",{className:"uitk-grid"},o.createElement("div",{className:"uitk-cell all-y-padding-three all-x-padding-three"},o.createElement(ce,{disabled:r.isLoading,rfrr:".CompareButton",isFullWidth:!0,"data-stid":"compare-button",size:f.UitkButtonSize.SMALL,linkName:"Compare",text:s.formatText("hotels.shortlist.replay.compareButton.label"),onClick:this.openDialog})))))),o.createElement(p.QueryRoute,{query:{pwaDialog:"compare"}},o.createElement(h.Layer,{id:"compare-table",onDismiss:this.onDismiss},o.createElement($,{onDismiss:this.onDismiss,hotels:_}))))},t.defaultProps={displayViewed:!1},oe([s.computed],t.prototype,"watchedSearchCriteria",null),t=oe([d.withLocalization,Object(l.inject)("shortlist","context","searchCriteria","analytics","routeStore","currentHotel"),l.observer],t)}(o.Component)},YhvS:function(e,t,r){r.r(t),r.d(t,"ChangeSearchDialog",function(){return h});var a,n=r("GiK3"),i=r("AQYs"),o=r("l92f"),s=r("th27"),l=r("2eDV"),c=(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),p=function(){return(p=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},u=function(e,t,r,a){var n,i=arguments.length,o=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,a);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(i<3?n(o):i>3?n(t,r,o):n(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},h=function(e){function t(t){var r=e.call(this,t)||this;return r.onDismiss=r.onDismiss.bind(r),r}return c(t,e),t.prototype.onDismiss=function(){this.props.onDismiss&&this.props.onDismiss()},t.prototype.render=function(){var e={iconLabel:this.props.l10n.formatText("hotels.searchResults.cancelButton.a11yLabel"),header:this.props.l10n.formatText("hotels.searchResults.title"),type:o.ToolbarType.CLOSE},t=this.props,r=t.searchResults,a=t.analytics.setupTracker(":CancelSearch","Cancel search form"),i=r&&r.searchCriteria,c=r.searchAndFilterDisplayOptions&&r.searchAndFilterDisplayOptions.changeSearch,u=c&&c.displayFields,h=c&&c.ignoreFields;return n.createElement(s.UitkFullscreenDialog,p({},{dialogShow:!0,className:"search-form-overlay"}),n.createElement(o.UitkToolbar,p({},e,{analytics:a,action:this.onDismiss})),n.createElement("section",{className:"search-form-overlay-main"},n.createElement("div",{className:"all-x-padding-two all-y-padding-two","data-stid":"section-hotel-search"},n.createElement(l.SearchForm,{className:"uitk-grid all-x-gutter-two all-y-gutter-two",model:i,formAction:"/Hotel-Search",displayFields:u,ignoreFields:h}))))},t=u([i.withLocalization],t)}(n.Component)},bB1d:function(e,t,r){r.r(t),r.d(t,"AddPropertyPrompt",function(){return p});var a,n=r("GiK3"),i=r("zBEt"),o=r("KaGk"),s=r("y5TW"),l=r("AQYs"),c=(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),p=function(e){function t(t){var r=e.call(this,t)||this;return r.state={clicked:!1},r.addProperty=r.addProperty.bind(r),r}return c(t,e),t.prototype.render=function(){var e=this.state.clicked;return n.createElement(i.AbacusExperiment,{name:"LS_PWA_ADD_PROPERTY_PROMPT"},n.createElement(i.AbacusControl,null),n.createElement(i.AbacusVariant,{bucket:1},n.createElement("section",{className:"uitk-cell all-y-gutter-two uitk-type-center"},!e&&n.createElement(o.UitkLink,null,n.createElement("a",{href:"#",onClick:this.addProperty},n.createElement(s.UitkIcon,{size:s.UitkIconSize.SMALL,name:"add"}),n.createElement(l.LocalizedText,{message:"multiProperty.addPropertyPrompt"}))),e&&n.createElement("p",{className:"uitk-type-200 pwa-theme--grey-700 uitk-type-medium"},n.createElement(l.LocalizedText,{message:"multiProperty.inProgress"})))))},t.prototype.addProperty=function(){var e=this.props.analytics;e&&"function"==typeof e.trackEvent&&e.trackEvent(".addPropertyClicked","Clicked on Add Property",e.omnitureData,null),this.setState({clicked:!0})},t}(n.Component)},"fUy/":function(e,t,r){var a,n=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__decorate||function(e,t,r,a){var n,i=arguments.length,o=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,a);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(i<3?n(o):i>3?n(t,r,o):n(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},o=r("GiK3"),s=r("d6px").computed,l=r("OSg3"),c=l.inject,p=l.observer,u=r("zqAW"),h=u.ClickTracker,d=u.withAnalytics,m=r("vc39"),f=m.Layer,y=m.Viewport,g=m.ViewSmall,k=m.ViewLarge,v=r("Dhs5").QueryRoute,b=r("zBEt"),_=b.AbacusControl,E=b.AbacusExperiment,S=b.AbacusVariant,O=r("AQYs").withLocalization,w=r("B1JX").Link,M=r("cYcL").liveAnnounce,C=h(r("CYWc").UitkSecondaryButton),R=r("hJRV").MainRegion,P=r("VsoX").SideRailRegion,x=r("nY/O").MasterPage,D=d(x),T=x.wrappedComponent.sideRailTypes,L=r("/LmM").Overlay,N=r("M/bf").Results,A=r("6nn/").Playback,j=r("va8f").ToolbarRegion,U=r("Cc/f").Tools,I=r("bB1d").AddPropertyPrompt,F=r("B6gz").Sidebar,H=r("F5Ss").MesoIntentMediaExp,z=r("+2MM").MesoFooter,B=r("c+zd").MesoSideRail,V=r("YhvS").ChangeSearchDialog,W=r("WvkB").ReplayShortlisted,G=r("Da3f").RewardsEducationDialog,Z=r("4Vwg").MultiItem,q=r("Sdx3").PageName,Q=function(e){function t(t){var r=e.call(this,t)||this;return r.resultRefs=[],r.handleOnDismiss=r.handleOnDismiss.bind(r),r.setResultRef=r.setResultRef.bind(r),r.state={jsEnabled:!1},r}return n(t,e),Object.defineProperty(t.prototype,"omnitureData",{get:function(){if(this.props.searchResults&&this.props.analytics){var e=this.props.searchResults.omnitureData||null;if(e)return this.props.analytics.mergeOmnitureData(e)}return null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"universalDataObject",{get:function(){return this.props.searchResults&&"object"==typeof this.props.searchResults.universalDataObject?this.props.searchResults.universalDataObject:{}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"backToChangeSearchQuery",{get:function(){var e=this.props.routeStore;if(e&&"function"==typeof e.mergeQueryString)return e.mergeQueryString(e.search,{pwaOverlay:"changeSearch"})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"loading",{get:function(){var e=this.props,t=e.searchResults,r=e.uiPage;return t.isLoading&&!r.displayProgressIndicator},enumerable:!0,configurable:!0}),t.prototype.componentDidMount=function(){this.announceLoadingState(),this.setState({jsEnabled:!0})},t.prototype.componentDidUpdate=function(){this.announceLoadingState()},t.prototype.announceLoadingState=function(){var e,t=this.props.searchResults,r=t.isLoading,a=t.isError,n=t.isEmpty,i=this.props.l10n;(e=r?i.formatText("hotels.searchResults.resultsLoading.liveAnnounce"):a?i.formatText("hotels.searchResults.errorRetrievingResults.liveAnnounce"):n?i.formatText("hotels.searchResults.emptyResults.liveAnnounce"):i.formatText("hotels.searchResults.resultsUpdated.liveAnnounce"))!==this.lastLoadingStateMessage&&(M(e,"assertive"),this.lastLoadingStateMessage=e)},t.prototype.handleOnDismiss=function(){var e=this.props.routeStore;e&&"function"==typeof e.goBack&&e.goBack()},t.prototype.setResultRef=function(e,t){this.resultRefs[t]=e},t.prototype.render=function(){var e=this.props.searchResults.regionId,t=this.props,r=t.page,a=t.shortlist,n=t.l10n,i=t.analytics,s=t.searchResults,l=a&&a.hotel&&a.hotel.favorited,c=a&&a.hotel&&a.hotel.recentlyViewed,p=this.resolveDestination();r.title=p?n.formatText("hotels.searchResults.successfulSearch.pageTitle",p):n.formatText("hotels.searchResults.invalidSearch.pageTitle");var u=s&&s.rewardsDialogContent&&s.rewardsDialogContent.rewardsEducation;return o.createElement(D,{className:"search-results",route:this.props.route,loading:this.loading,pageUsable:!0,omnitureData:this.omnitureData,universalDataObject:this.universalDataObject,sideRailType:T.NEXT_TO_MAIN_AND_TOOLBAR},o.createElement(j,{className:"search-results-toolbar"},o.createElement(A,null)),o.createElement(R,{className:"search-results__main all-x-padding-two"},o.createElement("div",{className:"search-results-listing all-y-padding-three"},o.createElement(I,{analytics:i}),o.createElement(U,null),o.createElement(y,null,o.createElement(g,null,this.renderResults()),o.createElement(k,null,o.createElement(E,{name:"PWA_Contextual_Top_Filters"},o.createElement(_,null),o.createElement(S,{bucket:1})),o.createElement("div",{className:"uitk-grid all-y-padding-two"},o.createElement("div",{className:"uitk-cell all-cell-1-4"},o.createElement(F,{isActive:this.state.jsEnabled})),o.createElement("div",{className:"uitk-cell all-cell-3-4 all-x-gutter-six"},this.renderResults(1)))))),this.renderErrorMessage(),o.createElement(E,{name:"Shopping_PWA_Enable_Hearting_Replay"},o.createElement(_,null),o.createElement(S,{bucket:1},o.createElement("div",{className:"replay-shortlist-sheet"},l&&o.createElement(W,{regionId:e,category:"hotel",displayViewed:!1}))),o.createElement(S,{bucket:2},o.createElement("div",{className:"replay-shortlist-sheet"},(l||c)&&o.createElement(W,{regionId:e,category:"hotel",displayViewed:!0})))),o.createElement(H,{pageName:q.SEARCH}),o.createElement(v,{query:{pwaDialog:"rewardsEducation"}},o.createElement(G,{rewardsEducation:u}))),o.createElement(P,null,o.createElement(B,{pageName:q.SEARCH})))},t.prototype.renderResults=function(e){void 0===e&&(e=3);var t=this.props.searchResults,r=t.hotels,a=t.isLoading,n=t.hotelsMaxDisplay,i=t.insights,s=t.messages,l=t.searchCriteria,c=t.maxHotelsDisplayedPerLoad,p=t.splitListings,u=l.endDate,h=l.startDate,d=this.props.l10n,m=p(r,s),f=m.hotelListings,y=m.messageListings,g=!r||n>=f.length,k=a||g||!this.state.jsEnabled,v=":LoadMore"+n/c,b="uitk-cell xl-cell-1-"+e+" l-cell-1-"+e+" m-cell-1-1 s-cell-1-1";return o.createElement(o.Fragment,null,o.createElement("h2",{className:"is-visually-hidden"},d.formatText("hotels.search.results.heading")),o.createElement(N,{loading:this.loading,className:b,endDate:u,hotels:r,hotelsMaxDisplay:n,startDate:h,insights:i,setResultRef:this.setResultRef,messages:s,hotelListings:f,messageListings:y}),!g&&o.createElement("section",{className:"uitk-flex uitk-flex-justify-content-center all-t-padding-three"},o.createElement(C,{rfrr:v,linkName:"Show more results",disabled:k,onClick:this.handleShowMore.bind(this),"data-stid":"show-more-results",text:d.formatText("hotels.searchResults.paginationButton.label")})),o.createElement(z,{pageName:q.SEARCH,destination:this.resolveDestination()}),o.createElement(E,{name:"LS_PWA_PLAYBACK_AREA"},o.createElement(_,null),o.createElement(S,{bucket:1},o.createElement(Z,{analytics:this.props.analytics}))))},t.prototype.refreshAds=function(){document&&CustomEvent&&"function"==typeof document.dispatchEvent&&document.dispatchEvent(new CustomEvent("mesoTriggeredRefresh",{detail:{type:"impressionRefresh"}}))},t.prototype.showMoreHotels=function(){var e=this;this.props.uiPage.showProgressIndicator(400),this.props.searchResults.showMoreHotels(this.props.context,this.props.experiment).then(function(t){e.resultRefs[t].focus()})},t.prototype.handleShowMore=function(){this.refreshAds(),this.showMoreHotels()},t.prototype.renderErrorMessage=function(){var e=this.props.searchResults||{},t=e.isError,r=e.isEmpty,a=this.resolveDestination(),n=this.props.l10n;return t||r?o.createElement("div",{className:"uitk-type-center"},o.createElement(Y,{errorMessage:""+n.formatText("hotels.searchResults.destinationMissing.message")}),!a&&o.createElement(K,{analytics:this.props.analytics,onDismiss:this.handleOnDismiss,query:this.backToChangeSearchQuery,l10n:n})):null},t.prototype.resolveDestination=function(){var e=this.props.searchResults,t=e.searchedDestination;return e.searchCriteria.destination||t},i([s.struct],t.prototype,"omnitureData",null),i([s.struct],t.prototype,"universalDataObject",null),t=i([O,c("searchResults","page","layerManager","context","uiPage","analytics","routeStore","shortlist","experiment"),p],t)}(o.Component),Y=function(e){var t=e.errorMessage,r=e.children;return o.createElement("div",{className:"uitk-type-300 pwa-theme--grey-700 uitk-type-center search-results-error"},o.createElement("p",null,t),r)},K=function(e){var t=e.analytics,r=e.onDismiss,a=e.query,n=e.l10n;return o.createElement("div",{className:"backToChangeSearch"},o.createElement(C,{linkName:"Back to change search",rfrr:":destinationMissingChangeSearch",tag:w,to:{search:a},text:n.formatText("header.search.linkText")}),o.createElement(v,{query:{pwaOverlay:"changeSearch"}},o.createElement(f,{id:"destination-missing-changesearch",onDismiss:r},o.createElement(L,{type:"takeover",openAnimation:"slideup"},o.createElement(V,{analytics:t,onDismiss:r})))))};e.exports=Q},"uX+Z":function(e,t,r){var a,n=r("GiK3"),i=r("OSg3"),o=r("B1JX"),s=r("Dhs5"),l=r("vc39"),c=r("AQYs"),p=r("zqAW"),u=r("CYWc"),h=r("d6px"),d=r("zBEt"),m=r("KuLc"),f=r("AqV/"),y=(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),g=function(){return(g=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},k=function(e,t,r,a){var n,i=arguments.length,o=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,a);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(i<3?n(o):i>3?n(t,r,o):n(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},v=function(e){function t(t){var r=e.call(this,t)||this;return r.addEventsToMarkerClusterer=r.addEventsToMarkerClusterer.bind(r),r.createGoogleMapsMarker=r.createGoogleMapsMarker.bind(r),r.createMarkerClusterer=r.createMarkerClusterer.bind(r),r.createPin=r.createPin.bind(r),r.getUpdatedMarkerIndex=r.getUpdatedMarkerIndex.bind(r),r.isHasHeartIcon=r.isHasHeartIcon.bind(r),r.updateSingleMarker=r.updateSingleMarker.bind(r),r}return y(t,e),t.prototype.shouldComponentUpdate=function(e){return e.map!==this.props.map||e.google!==this.props.google||e.searchChanged||e.singleMarkerChanged},t.prototype.render=function(){var e=this,t=this.props,r=t.google,a=t.map,n=t.onMapClick;if(a&&r){if(!this.markerClusterer||this.props.searchChanged&&!this.props.singleMarkerChanged){this.props.markers.filter(function(t){return e.isSoldOut(t)}).map(function(t,r){return e.createGoogleMapsMarker(t,r)});var i=this.props.markers.filter(function(t){return!e.isSoldOut(t)&&!e.isAirport(t)&&!e.isLandmark(t)}).map(function(t,r){return e.createGoogleMapsMarker(t,r)});this.createMarkerClusterer(i),this.addEventsToMarkerClusterer(this.markerClusterer),this.props.markers.filter(function(t){return e.isLandmark(t)||e.isAirport(t)}).map(function(t,r){return e.createGoogleMapsMarker(t,r)})}else this.props.singleMarkerChanged&&this.updateSingleMarker(this.getUpdatedMarkerIndex());r&&r.maps&&r.maps.event&&r.maps.event.addDomListener(a,"mouseup",function(){e.props.markerSelected&&"function"==typeof n&&n()})}return null},t.prototype.createMarkerClusterer=function(e){this.markerClusterer&&this.markerClusterer.clearMarkers();var t=this.props,r=t.map,a=t.google,n=t.l10n,i=f(a),o={gridSize:40,minimumClusterSize:10,averageCenter:!0,maxZoom:21,markerLabel:function(e,t,r){return r?n.formatText("maps.markers.cluster.soldOut.label",e):n.formatText("maps.markers.cluster.available.label",e,t)}};this.markerClusterer=new i(r,e,o),this.props.onMarkersUpdate()},t.prototype.addEventsToMarkerClusterer=function(e){var t=this.props,r=t.google,a=t.onClusterDraw,n=t.onClusterSelect;e.addListener("clusterclick",function(){n()}),r.maps&&r.maps.event&&r.maps.event.addListenerOnce(e,"drawcluster",function(){a()})},t.prototype.createGoogleMapsMarker=function(e,t,r){var a=this.props,n=a.google,i=a.onSelect,o=this.isHasHeartIcon(e),s=this.createPin(e,o,t);return(e.sheet||e.isActionable)&&(s.marker.addListener("click",function(){i(s)}),n.maps&&n.maps.event&&n.maps.event.addDomListener(s.marker.anchor,"click",function(){i(s)}),r&&i(s)),s.marker.hotel=e.sheet?e.sheet:e.hotel,s.marker.hotelId=e.sheet?e.sheet.id:e.hotel.hotelId,s.marker.isFavorited=o,s.marker.isSoldOut=this.isSoldOut(e),s.marker.label={text:e.label},s.marker.position=s.marker.getPosition(),s.marker},t.prototype.isLandmark=function(e){return e.icon&&"LANDMARK"===e.icon},t.prototype.isAirport=function(e){return e.icon&&"AIRPORT"===e.icon},t.prototype.isSoldOut=function(e){return!(!e.icon||"SOLD_OUT"!==e.icon)||e.isSoldOut},t.prototype.createPin=function(e,t,r){var a=this.props,n={hasHeartIcon:t,zIndex:r,google:a.google,map:a.map,position:e.position,hotel:e.hotel,sheet:e.sheet};if(this.isSoldOut(e))return new m.SoldOutMarker(n);var i=this.isLandmark(e),o=this.isAirport(e),s=g({},n,{label:e.label});return i?new m.PlaceMarker(s):o?new m.AirportMarker(s):new m.PriceMarker(s)},t.prototype.isHasHeartIcon=function(e){var t=this.props,r=t.shouldShowHeartIcon,a=t.shortlist,n=a.hotel&&a.hotel.favorited&&a.hotel.favorited.find(function(t){return t.id===(e.sheet?e.sheet.id:e.hotel.id)}),i=a.hotel&&a.hotel.favoritedLocally&&a.hotel.favoritedLocally[e.sheet?e.sheet.id:e.hotel.id];return r&&(i||n)},t.prototype.getUpdatedMarkerIndex=function(){var e=this.props.hotelIdFromMap;return e&&this.markerClusterer&&this.markerClusterer.markers_&&this.markerClusterer.markers_.length>0?this.markerClusterer.markers_.findIndex(function(t){return(t.sheet?t.sheet.id:t.hotelId)===e}):-1},t.prototype.updateSingleMarker=function(e){var t=this.props,r=t.markers,a=t.shortlist;if(null!=e&&r[e]){var n=r&&this.createGoogleMapsMarker(r[e],e,!0);n.isFavorited=!n.isFavorited,this.markerClusterer&&this.markerClusterer.updateMarker(n,e),a.resetHotelIdFromMap(),this.props.onSingleMarkerUpdate()}},t=k([c.withLocalization,Object(i.inject)("shortlist"),i.observer],t)}(n.Component),b=r("/NTa"),_=r("EbQm"),E=function(e){var t=e.messageDismissed,r=e.onMapSearch,a=e.searchInProgress,i=e.searchMessage,o=e.showSearchButton;return n.createElement("div",{className:"map-viewer__search"},n.createElement("div",{className:"map-viewer__search-button uitk-type-center"},(o||a)&&n.createElement(u.UitkSecondaryFloatingButton,{className:"elevation-4",disabled:a,onClick:r},n.createElement(c.LocalizedText,{message:"maps.viewer.searchButton.text"}))),n.createElement(_.UitkToast,{show:!!i,onDismiss:t},i),n.createElement(b.UitkPageLoader,{className:"map-viewer__loader",visible:a}))},S=r("cYcL"),O=r("Mlow"),w=r("yo39"),M=r("ToBc"),C=r("T3U3"),R=r("2T4e"),P=Object(p.ClickTracker)(o.Link),x=function(e){var t=e.sheet,r=e.selectedHotel,a=e.onClick,i=e.onFavoriteClick,o=e.isVisible,s=e.l10n;if(!t)return null;var c=S.classNames("uitk-cell","all-cell-fill","all-cell-1-2","all-l-padding-three","all-b-padding-three"),p=r&&2===Object.keys(r).length&&Object.keys(r).includes("id")&&Object.keys(r).includes("title"),u="ModuleMapPinnedPropertyLink";return n.createElement(w.UitkSheet,{className:"uitk-grid hsr-map-sheet",isVisible:o},n.createElement("div",{className:"uitk-cell all-cell-1-4"},n.createElement(L,{linkOff:t.linkOff,onClick:a,photoUrl:t.photoUrl,rfrrHotelLink:u})),n.createElement("div",{className:c},n.createElement(j,{sheet:t,isPOI:p,hotel:r,l10n:s,onFavoriteClick:i,rfrrHeart:"ModuleMapPinnedPropertyHeart"})),!p&&n.createElement(l.Viewport,null,n.createElement(l.ViewSmall,null,n.createElement(C.UitkCardLink,null,n.createElement(P,{linkName:"View hotel",onClick:a,rfrr:u,to:t.linkOff||""}))),n.createElement(l.ViewLarge,null,n.createElement(C.UitkCardLink,null,n.createElement(P,{linkName:"View hotel",target:"_blank",onClick:a,rfrr:u,to:t.linkOff||""})))))},D=function(e){var t=e.badgeText,r=e.badgeTheme,a=M.UitkInlineBadge&&M.UitkInlineBadge.Theme||{};return n.createElement(M.UitkInlineBadge,{theme:a[r]},t)},T=function(e){var t=e.subtitle;return n.createElement("div",{className:"uitk-cell all-cell-1-1 uitk-type-200__medium map-viewer__info-sheet-reviews"},n.createElement("span",{className:"map-viewer__info-sheet-reviews--rating"},t))},L=function(e){var t=e.linkOff,r=e.onClick,a=e.photoUrl,i=e.rfrrHotelLink;return a?n.createElement(P,{linkName:"View hotel",onClick:r,rfrr:i,to:t||""},n.createElement(O.UitkFigure,{className:"all-image-fit-cover",src:a})):n.createElement(O.UitkFigure,{className:"all-image-fit-cover"},n.createElement(O.UitkImage,{placeholderImage:!0,alt:""}))},N=function(e){var t=e.hotel,r=e.l10n,a=e.onClick,i=e.rfrrHeart,o=e.sheet,s=t.hotelId,l=t.shortlistModel,c=l&&l.meta;return s&&l?n.createElement(R.a,{category:"hotel",favorited:l.favorited,id:""+s,key:s,labelRemove:r.formatText("hotels.searchResults.shortlist.removeFromList.a11yLabel",name),labelSave:r.formatText("hotels.searchResults.shortlist.saveToList.a11yLabel",o.name),meta:c,onClick:a,onSaveMessage:r.formatText("hotels.searchResults.shortlist.saveToList.notification",name),referralObject:{favorite:{rfrr:i+".SaveFavorite"},unfavorite:{rfrr:i+".RemoveFavorite"}},removeUrl:l.removeUrl,replayHotelModel:o,rfrr:i,saveUrl:l.saveUrl}):null},A=function(e){var t=e.sheet,r=e.l10n,a=t.badgeText,i=t.badgeTheme,o=t.leadPrice,s=t.strikeoutPrice;return o?n.createElement("div",{className:"uitk-cell all-cell-1-1 uitk-type-right all-t-padding-two all-r-padding-three"},a&&i&&n.createElement(D,{badgeText:a,badgeTheme:i}),n.createElement("div",{className:"uitk-grid all-grid-align-end all-t-padding-half all-cell-1-2 map-viewer__info-sheet-price"},s&&n.createElement("del",{className:"uitk-cell all-cell-fill uitk-type-right uitk-type-300 uitk-type-medium\n              all-x-padding-one all-t-padding-half map-viewer__info-sheet-price--strikethrough"},n.createElement("span",{className:"is-visually-hidden map-viewer__info-sheet-price--strikethrough--a11y"},r.formatText("hotels.infosite.rateInfoDialog.strikeOut",s)),n.createElement("span",{className:"map-viewer__info-sheet-price--strikethrough--text pwa-theme--grey-700","aria-hidden":"true"},s)),o&&n.createElement("div",{className:"uitk-cell all-cell-shrink all-cell-1-2 uitk-type-bold uitk-type-500"},o))):n.createElement("div",{className:"uitk-cell uitk-type-400 map-viewer__info-sheet-price map-viewer__info-sheet-price--soldout"},n.createElement(c.LocalizedText,{message:"maps.sheets.hotel.soldOut.text"}))},j=function(e){var t=e.hotel,r=e.isPOI,a=e.l10n,i=e.onFavoriteClick,o=e.rfrrHeart,s=e.sheet,l=s.distanceFromPOI,c=s.subtitle,p=s.title,u=s.vipMessage,h=t&&t.hotelId&&t.shortlistModel?"":"all-r-padding-three";return n.createElement("div",{className:"uitk-grid"},n.createElement("div",{className:"uitk-grid"},n.createElement("div",{className:"uitk-cell all-cell-fill all-t-padding-three "+h,"data-stid":"hsr-map-sheet-content"},u&&n.createElement("div",{className:"uitk-type-200 uitk-type-medium map-vip"},u),n.createElement("div",{className:"uitk-type-500 uitk-type-bold truncate map-viewer__info-sheet-name"},p),l&&n.createElement(U,{distanceFromPOI:l}),c&&n.createElement(T,{subtitle:c})),t&&n.createElement(N,{hotel:t,l10n:a,onClick:i,rfrrHeart:o,sheet:s})),!r&&n.createElement(A,{sheet:s,l10n:a}))},U=function(e){var t=e.distanceFromPOI;return n.createElement(d.AbacusExperiment,{name:"PWA_HSR_Map_Add_POI_Marker"},n.createElement(d.AbacusControl,null),n.createElement(d.AbacusVariant,{bucket:1},n.createElement("div",{className:"uitk-cell all-cell-1-1 uitk-type-200__medium pwa-theme--grey-700 map-viewer__info-sheet-poi"},t)))},I=r("vc5H"),F=r("l92f"),H=r("th27"),z=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function a(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(a.prototype=r.prototype,new a)}}(),B=function(){return(B=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},V=function(e,t,r,a){var n,i=arguments.length,o=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,a);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(i<3?n(o):i>3?n(t,r,o):n(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},W=function(e){function t(t){var r=e.call(this,t)||this;return r.setUpAnalyticsTrackers(t.analytics),r.dismissSheet=r.dismissSheet.bind(r),r.onFavoriteClick=r.onFavoriteClick.bind(r),r.onMapPan=r.onMapPan.bind(r),r.onMapSearch=r.onMapSearch.bind(r),r.onMarkerSelect=r.onMarkerSelect.bind(r),r.onMarkersUpdate=r.onMarkersUpdate.bind(r),r.onSingleMarkerUpdate=r.onSingleMarkerUpdate.bind(r),r.onSheetClick=r.onSheetClick.bind(r),r.zIndex=t.searchResults.map&&t.searchResults.map.markers&&t.searchResults.map.markers.length?t.searchResults.hotels.length:0,r.state={markerSelected:!1,searchChanged:!1,selectedHotel:void 0,selectedMarker:null,singleMarkerChanged:!1},r}return z(t,e),t.prototype.setUpAnalyticsTrackers=function(e){var t=function(){return null},r=e&&e.clickTracker?e.clickTracker.bind(e):t;this.trackMapPan=r("Module.Map.Pan","User panning PWA HSR Map",null,t),this.trackMapSearch=r("Module.Map.Search.Button","User clicking the map search button on PWA HSR Map",null,t),this.trackMapZoomIn=r("Module.Map.Zoom.In","User zooming in on PWA HSR Map",null,t),this.trackMapZoomOut=r("Module.Map.Zoom.Out","User zooming out on PWA HSR Map",null,t),this.trackMarkerSelect=r("Module.Map.HotelSelect","User selecting a pin on the PWA HSR map",null,t),this.trackClusterDisplayed=r("Module.Map.HotelClusterDisplayed","User has seen at least one cluster on the PWA HSR map",null,t),this.trackClusterSelect=r("Module.Map.HotelClusterSelect","User selecting a cluster on the PWA HSR map",null,t)},t.prototype.componentDidMount=function(){var e=this,t=this.props,r=t.routeStore,a=t.shortlist,n=t.searchResults;this.cancelHotelWatch=Object(h.autorun)(function(){r.state&&r.state.selectedHotelId&&r.state.selectedHotelId!==e.state.selectedHotel&&e.setState({selectedHotel:n.findHotel(r.state.selectedHotelId),selectedMarker:e.findSelectedHotel(r.state.selectedHotelId),showSheet:!1}),n.hotels&&n.hotels.length>0&&e.setState({searchChanged:!0})}),this.cancelShortlistWatch=Object(h.autorun)(function(){var t=a.hotel.favoritedLocally;a.isLoading||0!==Object.keys(t).length||e.setState({searchChanged:!0})})},t.prototype.componentWillUnmount=function(){this.cancelHotelWatch&&(this.cancelHotelWatch(),this.cancelHotelWatch=void 0),this.cancelShortlistWatch&&(this.cancelShortlistWatch(),this.cancelShortlistWatch=void 0)},t.prototype.deDuplicateMarkers=function(e){var t={};return e&&e.length?e.filter(function(e){var r=e&&e.sheet,a=e&&e.hotel,n=r?r.id:a&&a.id,i=n&&!t[n];return n&&(t[n]=!0),i}):[]},t.prototype.render=function(){var e=this,t=this.props,r=t.context,a=t.searchResults,i=t.l10n,o=this.state,s=o.markerSelected,l=o.searchChanged,c=o.selectedHotelId,p=o.singleMarkerChanged,u=a&&a.map,h={type:F.ToolbarType.CLOSE,header:a.searchedDestination,iconLabel:this.props.l10n.formatText("maps.closeButton.label")},f=this.props.analytics.setupTracker(".Module.Map.Link","Close Map Dialog"),y=B({},u,{locale:r.locale,onPan:this.onMapPan,onZoomIn:this.trackMapZoomIn,onZoomOut:this.trackMapZoomOut,pageName:"HotelSearch",clickablePOIs:!1}),g={markers:u&&u.markers?this.deDuplicateMarkers(u.markers):[],markerSelected:s,experiment:this.props.experiment,onClusterDraw:this.trackClusterDisplayed,onClusterSelect:this.trackClusterSelect,onMapClick:this.dismissSheet,onSelect:this.onMarkerSelect,onSingleMarkerUpdate:this.onSingleMarkerUpdate,onMarkersUpdate:this.onMarkersUpdate,withClustering:!0,searchChanged:l,singleMarkerChanged:p,hotelIdFromMap:c};return n.createElement(H.UitkFullscreenDialog,B({},{dialogShow:!0,strictFullscreen:!0}),n.createElement(F.UitkToolbar,B({},h,{action:this.props.onDismiss,analytics:f})),n.createElement(E,{onMapSearch:this.onMapSearch,messageDismissed:a.dismissMapMessage,showSearchButton:u.showSearchButton,searchMessage:this.props.searchResults.error?this.props.l10n.formatText("maps.viewer.searchError.text"):u.searchMessage,searchInProgress:this.props.searchResults.isLoading}),u.markers&&n.createElement(I.ErrorBoundary,{label:"hsr.map.errorboundary"},u.markers.filter(function(e){return e.sheet&&e.sheet.distanceFromPOI}).length>0&&n.createElement(d.AbacusExperiment,{name:"PWA_HSR_Map_Add_POI_Marker"},n.createElement(d.AbacusControl,null),n.createElement(d.AbacusVariant,{bucket:1})),n.createElement(m.UitkMap,B({},y),n.createElement(v,B({},g,{shouldShowHeartIcon:!0})))),function(){if(e.state.selectedHotel)return e.state.selectedMarker&&e.state.selectedMarker.sheet?n.createElement(x,{sheet:e.state.selectedMarker.sheet,isVisible:e.state.showSheet,onClick:e.onSheetClick,onFavoriteClick:e.onFavoriteClick,selectedHotel:e.state.selectedHotel,l10n:i}):null}())},t.prototype.onSheetClick=function(){var e=this.props,t=e.shortlist,r=e.analytics,a=e.experiment;if(t.hotel.recentlyViewed&&this.state.selectedHotel&&"function"==typeof t.addToRecentlyViewed&&(t.addToRecentlyViewed(this.state.selectedHotel,"hotel"),this.shouldFireViewedHotelsTrackingEvent(a))){var n={rfrr:"ViewedHotels."+t.hotel.recentlyViewed.length,linkName:"Number of viewed hotels"};r.trackEvent(n.rfrr,n.linkName,r.omnitureData,null)}var i=this.state.selectedHotel.sheet?this.props.searchResults.findHotel(this.state.selectedHotel.sheet.id):this.state.selectedHotel;this.props.currentHotel.setSearchResultAsCurrentHotel(i)},t.prototype.onFavoriteClick=function(){this.setState({singleMarkerChanged:!0})},t.prototype.onMapPan=function(e,t){this.props.searchResults.displaySearchButton(),this.setState({center:e,zoom:t}),this.trackMapPan()},t.prototype.onMarkerSelect=function(e){this.setState({selectedHotelId:e.sheet?e.sheet.id:e.hotel.hotelId}),this.trackMarkerSelect(),this.selectMarker(e)},t.prototype.onSingleMarkerUpdate=function(){this.setState({singleMarkerChanged:!1})},t.prototype.onMarkersUpdate=function(){this.setState({searchChanged:!1})},t.prototype.shouldFireViewedHotelsTrackingEvent=function(e){var t=e&&e.exposures,r=t&&t.Shopping_PWA_Enable_Hearting_Replay;return r&&2===r.bucket},t.prototype.selectMarker=function(e){this.state.selectedMarker&&"function"==typeof this.state.selectedMarker.blur&&this.state.selectedMarker.blur(),this.zIndex+=1,e&&"function"==typeof e.focus&&e.focus(this.zIndex),this.setState({markerSelected:!0,selectedMarker:e,selectedHotel:this.findSelectedHotelGivenMarker(e),showSheet:!0})},t.prototype.findSelectedHotelGivenMarker=function(e){if(e&&e.sheet){var t=e.sheet.id&&this.props.searchResults.findHotel(e.sheet.id.toString());return t||e.sheet}return e.hotel},t.prototype.findSelectedHotel=function(e){if(e){var t=this.props.searchResults.map.markers,r=t&&t.find(function(t){return t.id&&t.id===e});return r&&r.hotel||null}},t.prototype.onMapSearch=function(){this.trackMapSearch();var e=this.state.center,t=e.lat()+","+e.lng();this.props.routeStore.updateSearch({regionId:"",destination:"",selected:"",latLong:t})},t.prototype.dismissSheet=function(){var e=this.state.selectedMarker;e&&"function"==typeof e.blur&&e.blur(),this.setState({showSheet:!1,markerSelected:!1})},t=V([c.withLocalization,Object(i.inject)("analytics","context","currentHotel","experiment","routeStore","searchResults","shortlist"),i.observer],t)}(n.Component);r.d(t,"a",function(){return K});var G=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function a(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(a.prototype=r.prototype,new a)}}(),Z=function(){return(Z=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},q=function(e,t,r,a){var n,i=arguments.length,o=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,a);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(i<3?n(o):i>3?n(t,r,o):n(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o},Q=Object(p.ClickTracker)(o.Link),Y=Object(p.ClickTracker)(u.UitkSecondaryButton),K=function(e){function t(t){var r=e.call(this,t)||this;return r.onMapDialogClosed=r.onMapDialogClosed.bind(r),r.mapBtn=n.createRef(),r}return G(t,e),t.prototype.render=function(){var e=this.props,t=e.isActive,r=e.searchResults,a=e.routeStore,i=e.mapImage,p=e.l10n,u=r.isLoading,h=r.isError,d=r.isEmpty,m=a.mergeQueryString(a.search,{pwaOverlay:"map"}),f={pathname:a.pathname,search:m},y=t?{domRef:this.mapBtn,tag:o.Link,to:f}:{};return n.createElement(n.Fragment,null,n.createElement(s.QueryRoute,{query:{pwaOverlay:"map"}},n.createElement(l.Layer,{id:"tools-map"},n.createElement(W,{onDismiss:this.onMapDialogClosed}))),i&&n.createElement(C.UitkCard,{imageType:"header"},n.createElement(C.UitkCardMedia,null,n.createElement(O.UitkFigure,{ratio:O.UitkFigureAspectRatioType.R21_9},n.createElement(O.UitkImage,{alt:p.formatText("hotels.searchResults.openMapDialog.label"),src:i}))),n.createElement(C.UitkCardContent,null,n.createElement(C.UitkCardTextSegment,{className:"uitk-type-300 uitk-type-center uitk-button-old-link"},n.createElement(c.LocalizedText,{message:"hotels.searchResults.openMapDialog.label"})),n.createElement(C.UitkCardLink,null,n.createElement(Q,{linkName:"Launch dynamic map",rfrr:"Module.MapOpen.Link",to:f},n.createElement(c.LocalizedText,{message:"hotels.searchResults.openMapDialog.label"}))))),!i&&n.createElement(Y,Z({"data-stid":"open-dynamic-map",disabled:!t||u||h||d||null,linkName:"Launch dynamic map",rfrr:"Module.MapOpen.Link",icon:"map",text:p.formatText("hotels.searchResults.openMapDialog.label"),isFullWidth:!0},y)))},t.prototype.onMapDialogClosed=function(){this.props.routeStore.updateSearch({pwaOverlay:void 0}),this.mapBtn.current&&"function"==typeof this.mapBtn.current.focus&&this.mapBtn.current.focus()},t.defaultProps={isActive:!1,l10n:null},t=q([c.withLocalization,Object(i.inject)("searchResults","layerManager","routeStore"),i.observer],t)}(n.Component)}}]);
//# sourceMappingURL=search.9a84678aca6797753f66.js.map