!function(e){var t={};function r(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=133)}({118:function(e,t){if(window){const e={"MESO-INTENT-MEDIA":(e={})=>{const t=e["MESO-INTENT-MEDIA"]||{},r=t.page&&t.page.attributes||{},i=document.getElementsByTagName("meso-intent-media");Array.from(i).forEach(e=>{Object.keys(r).forEach(t=>{e.hasAttribute(t)||e.setAttribute(t,String(r[t]))})})}};window.addEventListener("mesoRender",t=>{if(t&&t.detail){const r=t.detail.content||{};Object.keys(r).forEach(t=>{e.hasOwnProperty(t)&&e[t](r)})}})}},12:function(e,t,r){"use strict";t.a=((e,t)=>{if("string"!=typeof e)throw new Error("registerComponent requires a name of type string");if(!t)throw new Error("registerComponent requires a valid component");WebComponents&&WebComponents.waitFor(()=>{window&&customElements&&void 0===customElements.get(e)&&customElements.define(e,t)})})},133:function(e,t,r){"use strict";r.r(t);r(118);var i=r(22),n=r(12),s=r(16),o=r(44),a=r(6);class c extends i.a{constructor(){super(),this.adContextValues={},this.attributeValues={}}static get requiredAttributes(){return["page_id","site_name","site_country","site_language","show_exit_units"]}static get requiredProperties(){return["site_currency",...c.requiredAttributes]}static get observedAttributes(){return["src",...c.requiredProperties]}static get registeredAttributes(){return[{name:"src",type:"string"},{name:"site_name",type:"string"},{name:"page_id",type:"string"},{name:"site_country",type:"string"},{name:"site_language",type:"string"},{name:"show_exit_units",type:"string"}]}static get contextChangedAttributes(){return["display_format_type","travel_date_start","travel_date_end","travelers","adults","children","hotel_city","hotel_country","hotel_state","hotel_airport_code","hotel_rooms","publisher_hotel_property_name","publisher_hotel_property_id","referrer_source","referrer_channel","user_member_id","publisher_session_id","publisher_user_id","is_logged_in_user","is_member","site_currency","is_signed_up_for_promo_email","user_previously_searched"]}static get cookieValues(){const e={},t=s.a.getCookie("IAID"),r=s.a.getCookie("JSESSION"),i=s.a.getCookie("DUAID");return null!==t&&(e.machine_id=t),null!==r&&(e.publisher_session_id=r),null!==i&&(e.publisher_user_id=i.toUpperCase()),e}trigger(){this.updateGlobalProperties(),this.isInitialized?this.refresh():this.hasRequiredValues&&this.init()}init(){o.a.loadScript(this.src,{defer:""}),this.isInitialized=!0}refresh(){window.IntentMedia&&"function"==typeof window.IntentMedia.trigger?window.IntentMedia.trigger("refresh"):a.a.error("Trying to refresh intent media but intent media is not initialized")}updateGlobalProperties(){window.IntentMediaProperties=Object.assign(window.IntentMediaProperties||{},this.adContextValues,this.constructor.cookieValues,this.attributeValues)}get hasRequiredValues(){return Object.keys(this.adContextValues).length>0&&"string"==typeof this.src&&this.src.length>0&&this.constructor.requiredAttributes.every(e=>this.hasAttribute(e))&&this.constructor.requiredProperties.every(e=>window.IntentMediaProperties&&void 0!==window.IntentMediaProperties[e])}adContextChanged(e){Object.entries(e).forEach(([e,t])=>{this.constructor.contextChangedAttributes.includes(e)&&(this.adContextValues[e]=t)}),this.trigger()}connectedCallback(){super.connectedCallback(),this.refreshcb=(()=>this.trigger()),document.addEventListener("IntentMediaRefresh",this.refreshcb)}disconnectedCallback(){super.disconnectedCallback(),this.refreshcb&&document.removeEventListener("IntentMediaRefresh",this.refreshcb)}attributeChangedCallback(e,t,r){if(r!==t){switch(e){case"src":this.isInitialized=!1;break;default:this.attributeValues[e]=r}this.trigger()}}}Object(n.a)("meso-intent-media",c)},16:function(e,t,r){"use strict";const i=e=>{const t=document.cookie.match(`(^|;) ?${e}=([^;]*)(;|$)`);return t?t[2]:null},n=(e,t,r=30)=>{const i=new Date;i.setTime(i.getTime()+864e5*r),document.cookie=`${e}=${t};path=/;expires=${i.toGMTString()};`},s=()=>i("DUAID");t.a={getGuid:s,getCookie:i,setCookie:n,deleteCookie:e=>{n(e,"",-1)},parseSiteInfo:()=>{return{user:s(),guid:s(),site:1,tpid:(()=>{const e=i("tpid");return null!==e&&e.match(/^.*,[0-9]+$/)?e.split(",")[1]:null})(),eapid:(()=>{const e=i("iEAPID");return null!==e&&e.match(/^[0-9]+$/)?e:null})(),abov:i("abov")}},parseOverrideExperiments:()=>{try{const e={},t=i("meov");return(null===t?[]:t.split(",")).forEach(t=>{const r=t.split(".");e[r[0]]=r[1]}),e}catch(e){return{}}}}},22:function(e,t,r){"use strict";r.d(t,"a",function(){return i});class i extends HTMLElement{constructor(){super(),this.__componentName=this.constructor.name,this.constructor.registeredAttributes&&this.constructor.registeredAttributes.length>0&&this._registerAttributes(this.constructor.registeredAttributes)}get componentName(){return this.__componentName}static get contextChangedAttributes(){return null}requiresAdContextUpdate(e){const t=this.constructor.contextChangedAttributes;return!(Array.isArray(t)&&t.length>0)||t.some(t=>e.includes(t))}get adContextDestroyer(){return this.__adContextDestroyer}set adContextDestroyer(e){this.__adContextDestroyer=e}set template(e){this._template=e}get template(){return"function"==typeof this._template?this._template(this):""}get active(){return!0}static get registeredAttributes(){return[]}registerAdContext(){"function"==typeof this.adContextChanged&&(this.adContextDestroyer=window.meso.adcontext.observe(this.componentName,e=>this.requiresAdContextUpdate(e),e=>this.adContextChanged(e)))}connectedCallback(){this.registerAdContext(),this.draw()}disconnectedCallback(){this.adContextDestroyer&&this.adContextDestroyer(),this.clear()}clear(){for(;this.firstChild;)this.removeChild(this.firstChild)}draw(){const e=document.createElement("template");e.innerHTML=this.template,this.appendChild(document.importNode(e.content,!0))}redraw(){this.clear(),this.draw()}_getBoolean(e){return this.hasAttribute(e)}_setBoolean(e,t){Boolean(t)?this.setAttribute(e,""):this.removeAttribute(e)}_getString(e){return this.getAttribute(e)}_setString(e,t){t?this.setAttribute(e,t):this.removeAttribute(e)}_getNumber(e){const t=this.getAttribute(e);return null===t?null:Number(t)}_setNumber(e,t){t?this.setAttribute(e,Number(t)):this.removeAttribute(e)}_registerAttribute(e,t,r={get:e=>e,set:e=>e}){let i,n;switch(t){case"string":i=(()=>r.get(this._getString(e))),n=(t=>r.set(this._setString(e,t)));break;case"number":i=(()=>r.get(this._getNumber(e))),n=(t=>r.set(this._setString(e,t)));break;case"boolean":i=(()=>r.get(this._getBoolean(e))),n=(t=>r.set(this._setBoolean(e,t)))}Object.defineProperty(this,e,{enumberable:!0,configurable:!1,get:i,set:n})}_registerAttributes(e){e.forEach(e=>{const{name:t,type:r,callbacks:i}=e;this._registerAttribute(t,r,i)})}}},44:function(e,t,r){"use strict";t.a={promiseScript:(e,t={})=>new Promise((r,i)=>{const n=document.head.getElementsByTagName("script");for(let t=0;t<n.length;t++)if(n[t].getAttribute("src")===e)return void r(n[t]);const s=["defer","async"],o=document.createElement("script");o.onload=(()=>{r({element:o})}),o.onerror=(()=>{i({error:`Failed to load script: ${e}`})}),Object.keys(t).forEach(e=>{-1!==s.indexOf[e]&&(o[e]=t[e])}),o.src=e,document.head.appendChild(o)}),loadScript:(e,t={})=>{const r=document.getElementsByTagName("body")[0].getElementsByTagName("script");for(let t=0;t<r.length;t++)if(r[t].src&&r[t].src===e)return;((e,t={})=>{const r=["defer","async","load"],i=document.createElement("script");i.src=e,Object.keys(t).forEach(e=>{-1!==r.indexOf[e]&&("function"==typeof t[e]?i.addEventListener(e,t[e]):i[e]=t[e])}),document.getElementsByTagName("body")[0].appendChild(i)})(e,t)}}},6:function(e,t,r){"use strict";window.meso=window.meso||{},window.meso.logging=window.meso.logging||[];t.a={info:(e,t)=>{window.meso.logging.push({type:"info",message:e,extra:t})},warn:(e,t)=>{window.meso.logging.push({type:"warn",message:e,extra:t})},error:(e,t)=>{window.meso.logging.push({type:"error",exception:e,extra:t})},trackEvent:(e,t,r)=>{window.meso.logging.push({type:"track-event",name:e,vars:t,events:r})},trackAction:(e,t,r)=>{window.meso.logging.push({type:"track-action",name:e,vars:t,events:r})}}}});
//# sourceMappingURL=meso-intent-media.js.map